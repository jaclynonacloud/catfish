{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Functions.ts","src/Game.ts","src/ObjectPool.ts","src/entities/Cat.ts","src/entities/Entity.ts","src/entities/Fish.ts","src/entities/Puffer.ts","src/entities/specials/Owen.ts","src/entities/specials/Persephone.ts","src/entities/specials/Riley.ts","src/entities/specials/Special.ts","src/main.ts","src/managers/DataManager.ts","src/managers/LoadManager.ts","src/managers/ProgressManager.ts","src/managers/ScreenManager.ts","src/managers/SoundManager.ts","src/screens/EndScreen.ts","src/screens/GameScreen.ts","src/screens/IntermediaryScreen.ts","src/screens/MenuScreen.ts","src/screens/Screen.ts","src/screens/SplashScreen.ts","src/screens/TutorialCreator.ts","src/ui/Sprites.ts","src/ui/custom/LevelSelectDisplay.ts","src/ui/display/Container.ts","src/ui/display/Layout.ts","src/ui/partials/GameScore.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Logging","message","console","log","_message","LoadManager_1","ProgressManager_1","ScreenManager_1","SplashScreen_1","MenuScreen_1","GameScreen_1","EndScreen_1","Functions_1","Sprites_1","IntermediaryScreen_1","DataManager_1","Game","canvasDiv","_this","this","_classCallCheck","_canvas","width","WIDTH","height","HEIGHT","_lastGameTime","_scaling","Promise","res","rej","__awaiter","regeneratorRuntime","mark","_callee","splash","wrap","_context","prev","next","_stage","createjs","StageGL","antialias","setClearColor","enableMouseOver","update","ScreenManager","registerScreen","SplashScreen","setCurrentScreen","getScreenByKey","addEventListener","LoadManager","ASSETS_UPDATED","Text","Math","ceil","Percentage","toString","loadAssets","catch","err","warn","success","DataManager","loadWorldsData","error","ProgressManager","WorldsData","changeCurrentLevel","getLevelDataByIndex","Sprites","setup","MenuScreen","GameScreen","EndScreen","IntermediaryScreen","Ticker","framerate","FRAME_RATE","on","stop","levelData","_currentLevel","currentScore","_currentScore","children","ch","scaleX","scaleY","_scaleChildren","gameTime","getMeasuredFPS","CurrentScreen","ObjectPool","obj","type","poolObj","active","Pool","push","_getObjectByType","_getObjectByObj","_pool","forEach","find","Entity_1","SoundManager_1","Cat","game","gameScreen","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","Spritesheets","Kitty_Spritesheet","_gameScreen","_speed","_fishCaughtMultiplier","_caughtFish","_isGrabbing","_isRising","_isInjured","_hasReachedSurface","_sprite","gotoAndPlay","ANIMATION","Idle","Entity","_this2","IsGamelogicPaused","X","Stage","mouseX","speed","mouseY","Speed","_catYTween","Tween","get","to","y","Ease","circIn","Grab","Hold","fishes","tryToGrabFishes","Y","caught","returnToSurface","_this3","removeTweens","wait","linear","reachSurface","_this4","hasNewFish","indexOf","SoundManager","playSFX","Sounds","FishGrab","release","_this5","Ow","injure","drop","CatInjure","_this6","collectFish","_this7","_get","prototype","hasHitAPuffer","hitEnemy","value","freeze","Death","spritesheet","_game","Sprite","_direction","x","_isIgnoringCollision","_ignoreCollisionTimer","container","addChild","parent","removeChild","IGNORE_COLLISION","artificialReg","arguments","undefined","reg","regX","regY","Bounds","Width","Height","bounds","StageWidth","extents","StageHeight","HIT","Right","Left","lastX","getBounds","Top","Bottom","Fish","Peeper_Spritesheet","_isCaught","_isReturning","Slow","_naturalY","Panic","hitTest","disable","abs","isNeg","IsIgnoringCollision","testStageBounds","DirectionX","startIgnoreCollision","Fast","Puffer","Puffer_Spritesheet","_cooldown","_currentCooldown","Angry","cat","Recover","Special_1","Owen","Specials_Spritesheet","SPEC_ANIMATION","Special","Persephone","Riley","Fish_1","_isOnMainPage","_resetAttentionSpan","isOnMainPage","_attnSpanDuration","random","_desiredX","floor","_desiredY","_isNeg","Game_1","document","getElementById","fileLocation","fetch","then","blob","json","_worldsData","index","flatten","concat","apply","worlds","currentLevel","getLevelIndexByData","world","level","_sheetsTotal","_sheetsLoaded","_percentage","_totalAssetsLoaded","_totalAssets","src","stage","reset","_preloadManager","LoadQueue","Sound","registerPlugins","WebAudioPlugin","HTMLAudioPlugin","FlashAudioPlugin","alternateExtensions","installPlugin","_onLoaded","_onComplete","_onError","data","setMaxConnections","loadManifest","ASSETS_LOADED","emitErrorEvent","dispatchEvent","AssetsLoadedEvent","AssetsFailedEvent","parseFloat","getItems","toFixed","AssetsUpdatedEvent","name","sheet","item","Types","JAVASCRIPT","window","id","_SpriteSheet","complete","_loadedSheet","ev","remove","IMAGE","Images","Bitmap","SOUND","emitUpdatedEvent","removeAllEventListeners","setInterval","emitLoadedEvent","Event","ASSETS_FAILED","worldsData","killAll","_readCookieData","worldIndex","levelIndex","_levelsProgress","completed","nextLevel","unlocked","nextWorld","saveCookieData","map","_specialsProgress","special","collected","unlocks","cookie","JSON","stringify","ProgressData","_getCookie","parse","levels","specials","cname","ca","decodeURIComponent","split","charAt","substring","Screen_1","key","screen","_screensLookup","tempScreen","Screen","resolve","promises","_currentScreen","Container","alpha","destroy","_callee2","_context2","all","create","enable","loop","_isPlayingSound","_ambience","sound","play","position","prefVolume","duration","playAmbience","fadeInAmbience","volume","_sfx","splice","keys","step","fadeInterval","clearInterval","killOnFinish","Container_1","_isFail","bg","Catfish_End","_container","_buttonsContainer","LAYOUT_OPTIONS","ColumnLeftBottom","addMany","btnTryAgain","btnNextLevel","btnMainMenu","_completeSpr","_failSpr","BTNSelect","CurrentLevelData","getNextLevel","intermediary","queueNextScreen","visible","TutorialCreator_1","ObjectPool_1","Persephone_1","Owen_1","Riley_1","Puffer_1","Cat_1","GameScore_1","_fishes","_puffers","_remainingFish","createPoolObject","POOL","CAT","FISH","_i","PUFFERFISH","PERSEPHONE","OWEN","RILEY","_cat","checkout","_staticContainer","BG_Spritesheet","_fishContainer","_pufferContainer","_winContainer","_gameScore","GameScore","_tutorialCreator","TutorialCreator","_pauseLogic","hitObjects","getObjectsUnderPoint","fish","puff","killedFish","win","changeCurrentScore","totalFish","combos","time","Win","elasticOut","fadeOutAmbience","levelIndices","getIndexData","completeLevel","collectSpecial","checkoutSprites","_winBanner","Shape","graphics","beginFill","drawRect","cache","_winText","generateBitmapText","TypographyWhite","mouseEnabled","forceDirectionX","flip","setNaturalY","puffer","tutorials","queueTutorials","background","gotoAndStop","musicKey","music","playAmbienceWithFadeIn","showScore","showTimer","showFishRemain","showRemainingFish","startHUD","releaseAllObjects","normalizedTime","min","grab","return","removeAllChildren","_text","screenKey","evt","setTimeout","clearTimeout","_bg","endFill","_textContainer","_txtSprite","scale","LevelSelectDisplay_1","_swipeContainer","Catfish_Main","_mainContainer","_logo","_mainButtonsContainer","btnNewGame","Menu_Spritesheet","btnOptions","btnLevelSelect","btnExit","_fancyFish","_optionsContainer","optionsBG","_btnResetData","_btnCheat","_soundOn","_soundOff","_clearedContainer","add","Typography","_levelSelectDisplay","LevelSelectDisplay","_collectedContainer","_collectibleFish","_btnUp","_btnLeft","_btnRight","_swipeSpeed","_initialSwipePos","BubblesFade","circOut","bounceOut","stageX","stageY","_dragTimer","_onMain","IsSoundPlaying","_onNewGame","_onOptions","_onLevelSelect","_onExit","_onFish","unlockAll","deleteCookieData","stopAllSound","playAllSound","_onDragStart","_onDragEnd","collFish","filter","d","toLowerCase","setMainPage","sineInOut","off","removeAllTweens","_textSpritesheet","SpriteSheet","images","frames","animations","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","Z","b","g","h","j","k","l","m","q","s","v","w","z","0","2","3","4","5","6","7","8","9",".",",","'","\"","?","!","$","img","createElement","onload","text","textEl","_tutorialQueue","_youOverlay","Tutorial_Spritesheet","_fishOverlay","_pufferOverlay","_manyOverlay","_pauseOverlay","_specialOverlay","First","You","Many","Pause","t0","KEY","_runYou","_transition","_runFish","unpauseGameLogic","abrupt","_runPuffer","_runSpecial","_runMany","nextScreen","_currentOverlay","_callee3","_context4","_callee4","_context5","catStart","pauseGameLogic","_this8","_backgrounds","Main","UI","Logo","Entities","BG","BGTop","Wave","_graphics","Timer","ScoreHUD_Spritesheet","Score","FishRemain","_buttons","NewGame","ButtonHelper","Options","LevelSelect","Exit","Fishbowl","LevelSelectBG","Menu_Level_Select","LevelEmpty","LevelComplete","LevelSpecialEmpty","LevelSpecialComplete","_setupBTNClearData","ClearData","cursor","_canClearData","_btnDataDown","_btnDataComplete","_btnDataUp","CLEAR_DATA","details","color","textObj","BitmapText","_levelButtons","_background","_levelsContainer","_levelTextContainer","LevelText","rebuild","btn","_onLevelClick","_onLevelHover","_onLevelUnhover","_levelsData","sprite","reduce","acc","target","_getDataByIndex","Layout_1","layout","_sprites","_layout","Layout","direction","alignment","crossAlignment","spacing","MAKE_VERTICAL_CENTER","updateLayout","clone","buildLayout","_toConsumableArray","sprites","_layout2","_layout3","ColumnLeftTop","VERTICAL","START","ColumnLeftCenter","CENTER","END","ColumnCenterTop","ColumnCenterCenter","ColumnCenterBottom","ColumnRightTop","ColumnRightCenter","ColumnRightBottom","_parent","_items","_alignment","_crossAlignment","_spacing","addToParent","_len","items","Array","_key","totalHeight","_item","_i2","_item2","_i3","_i4","HORIZONTAL","_useTimer","_useFishRemain","_useScore","_timerContainer","timerSprite","Graphics","_timerTextContainer","_fishRemainContainer","fishRemainSprite","_fishRemainTextContainer","_scoreContainer","scoreSprite","_scoreTextContainer"],"mappings":"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EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,EAAE,IAAMC,WAAY,CAACC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,EAAE,GAAG,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOrc,EAAE,CAAC,GAAG,IAAI,GAAOiB,EAAE,CAAC,GAAG,IAAI,GAAOqb,EAAE,CAAC,GAAG,IAAI,GAAOplB,EAAE,CAAC,GAAG,IAAI,GAAOqlB,EAAE,CAAC,GAAG,IAAI,GAAOxlB,EAAE,CAAC,GAAG,IAAI,GAAOqjB,EAAE,CAAC,GAAG,IAAI,GAAO3jB,EAAE,CAAC,GAAG,IAAI,GAAOK,EAAE,CAAC,GAAG,IAAI,GAAO0lB,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAO5lB,EAAE,CAAC,GAAG,IAAI,GAAO6lB,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOnmB,EAAE,CAAC,GAAG,IAAI,GAAOE,EAAE,CAAC,GAAG,IAAI,GAAOS,EAAE,CAAC,GAAG,IAAI,GAAOylB,EAAE,CAAC,GAAG,IAAI,GAAOtmB,EAAE,CAAC,GAAG,IAAI,GAAOumB,EAAE,CAAC,GAAG,IAAI,GAAOpmB,EAAE,CAAC,GAAG,IAAI,GAAOM,EAAE,CAAC,GAAG,IAAI,GAAO+lB,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAO7Z,EAAE,CAAC,GAAG,IAAI,GAAO1C,EAAE,CAAC,GAAG,IAAI,GAAOwc,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAO1lB,EAAE,CAAC,GAAG,IAAI,GAAO2lB,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,EAAE,CAAC,GAAG,IAAI,GAAOC,IAAI,CAAC,GAAG,IAAI,GAAOC,IAAI,CAAC,GAAG,IAAI,GAAOC,IAAI,CAAC,GAAG,IAAI,GAAOC,IAAK,CAAC,GAAG,IAAI,GAAOC,IAAI,CAAC,GAAG,IAAI,GAAOC,IAAI,CAAC,GAAG,IAAI,GAAOC,EAAI,CAAC,GAAG,IAAI,MAL7pFrlB,qUANSiV,EAAAK,0CAkBhBnF,GAAsB,IAAAlJ,EAAAhH,KAG1BqlB,EAAM1W,SAAS2W,cAAc,OAmBnC,OAlBAD,EAAIE,OAAS,SAAC5nB,GACV,IAAMqD,EAAS,IAAIM,SAASoR,OAAO2S,GACnCre,EAAKuQ,WAAW7M,SAAS1J,4PAEzB2I,CAAA7H,EAAA8H,UAAA9D,WAAAC,OAAAC,eAAAlE,EAAA8H,WAAA,SAAA5C,GAAAvI,KAAAuI,EAAakJ,IAEjBmV,EAAIpV,IAAM,2BAGVjQ,KAAKge,eAAiB,IAAI1c,SAASmU,UACnCzV,KAAKuX,WAAW7M,SAAS1K,KAAKge,gBAE9Bhe,KAAKoC,KAAO,IAEZ8N,EAAMvO,SAIC3B,gCAGKwlB,GACZxlB,KAAKge,eAAeR,oBAEpB,IAAMiI,EAAS/lB,EAAA2D,QAAQ2Y,mBAAmBwJ,EAAMxlB,KAAK4hB,kBACrD5hB,KAAKge,eAAetT,SAAS+a,GAC7BzlB,KAAKuX,WAAW7M,SAAS1K,KAAKge,gBAE9Bhe,KAAKmK,MAAMhD,MAAMxF,kBAlDzBnD,EAAAsD,aAAAA,2nBCLA,IAAA5C,EAAAhB,EAAA,2BAKamc,aA4BT,SAAAA,EAAY1U,EAAWC,gGAAqB3F,CAAAD,KAAAqa,GACxCra,KAAKmK,MAAQxE,EACb3F,KAAKmG,YAAcP,EAEnB5F,KAAK0lB,eAAiB,GAGtB1lB,KAAK2lB,YAAc,IAAIrkB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa2f,qBAAsB,OACtF5lB,KAAK6lB,aAAe,IAAIvkB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa2f,qBAAsB,QACvF5lB,KAAK8lB,eAAiB,IAAIxkB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa2f,qBAAsB,UACzF5lB,KAAK+lB,aAAe,IAAIzkB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa2f,qBAAsB,QACvF5lB,KAAKgmB,cAAgB,IAAI1kB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa2f,qBAAsB,SACxF5lB,KAAKimB,gBAAkB,IAAI3kB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa2f,qBAAsB,sDAtC1F,MAAO,CACHM,MAAU,QACVC,IAAQ,MACRja,KAAS,OACTgB,OAAW,SACXkZ,KAAS,OACTC,MAAU,QACVxY,QAAY,yDAmCQiJ,uMAEhB/Y,+FACEkX,EAAM6B,EAAK/Y,YAEX,IAAI0C,QAAQ,SAAMC,EAAKC,GAAX,OAAkBC,EAAAb,OAAA,OAAA,EAAAc,mBAAAC,KAAA,SAAAC,IAAA,OAAAF,mBAAAI,KAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAAF,EAAAolB,GAEzBrR,EAFyB/T,EAAAE,KAAAF,EAAAolB,KAIvBjM,EAAgBkM,IAAIL,MAJG,EAAAhlB,EAAAolB,KAYvBjM,EAAgBkM,IAAIJ,IAZG,GAAAjlB,EAAAolB,KAkBvBjM,EAAgBkM,IAAIra,KAlBG,GAAAhL,EAAAolB,KAwBvBjM,EAAgBkM,IAAIrZ,OAxBG,GAAAhM,EAAAolB,KA8BvBjM,EAAgBkM,IAAI1Y,QA9BG,GAAA3M,EAAAolB,KAoCvBjM,EAAgBkM,IAAIH,KApCG,GAAA,GAAA,MAAA,KAAA,EAAA,OAAAllB,EAAAE,KAAA,EAKlBpB,KAAKwmB,UALa,KAAA,EAAA,OAAAtlB,EAAAE,KAAA,EAMlBpB,KAAKymB,YAAYzmB,KAAK6lB,cANJ,KAAA,EAAA,OAAA3kB,EAAAE,KAAA,EAOlBpB,KAAK0mB,WAPa,KAAA,EAAA,OAAAxlB,EAAAE,KAAA,GAQlBpB,KAAKymB,YAAY,MARC,KAAA,GAAA,OASxBzmB,KAAKmG,YAAYwgB,mBACjBjmB,IAVwBQ,EAAA0lB,OAAA,QAAA,IAAA,KAAA,GAAA,OAAA1lB,EAAAE,KAAA,GAalBpB,KAAKwmB,UAba,KAAA,GAAA,OAAAtlB,EAAAE,KAAA,GAclBpB,KAAKymB,YAAY,MAdC,KAAA,GAAA,OAexBzmB,KAAKmG,YAAYwgB,mBACjBjmB,IAhBwBQ,EAAA0lB,OAAA,QAAA,IAAA,KAAA,GAAA,OAAA1lB,EAAAE,KAAA,GAmBlBpB,KAAK0mB,WAnBa,KAAA,GAAA,OAAAxlB,EAAAE,KAAA,GAoBlBpB,KAAKymB,YAAY,MApBC,KAAA,GAAA,OAqBxBzmB,KAAKmG,YAAYwgB,mBACjBjmB,IAtBwBQ,EAAA0lB,OAAA,QAAA,IAAA,KAAA,GAAA,OAAA1lB,EAAAE,KAAA,GAyBlBpB,KAAK6mB,aAzBa,KAAA,GAAA,OAAA3lB,EAAAE,KAAA,GA0BlBpB,KAAKymB,YAAY,MA1BC,KAAA,GAAA,OA2BxBzmB,KAAKmG,YAAYwgB,mBACjBjmB,IA5BwBQ,EAAA0lB,OAAA,QAAA,IAAA,KAAA,GAAA,OAAA1lB,EAAAE,KAAA,GA+BlBpB,KAAK8mB,cA/Ba,KAAA,GAAA,OAAA5lB,EAAAE,KAAA,GAgClBpB,KAAKymB,YAAY,MAhCC,KAAA,GAAA,OAiCxBzmB,KAAKmG,YAAYwgB,mBACjBjmB,IAlCwBQ,EAAA0lB,OAAA,QAAA,IAAA,KAAA,GAAA,OAAA1lB,EAAAE,KAAA,GAqClBpB,KAAK+mB,WArCa,KAAA,GAAA,OAAA7lB,EAAAE,KAAA,GAsClBpB,KAAKymB,YAAY,MAtCC,KAAA,GAAA,OAuCxBzmB,KAAKmG,YAAYwgB,mBACjBjmB,IAxCwBQ,EAAA0lB,OAAA,QAAA,IAAA,KAAA,GAAA,IAAA,MAAA,OAAA1lB,EAAA6C,SAAAhD,EAAAf,qDAHhCjC,EAAI,YAAGA,EAAI+Y,EAAKpY,gCAAhBX,iCAAwBA,qGAqDVipB,uKAClBzR,EAAW,GAEY,MAAxBvV,KAAKinB,iBACJ1R,EAASrQ,KACL,IAAIzE,QAAQ,SAAMC,GAAN,OAAaE,EAAAoG,OAAA,OAAA,EAAAnG,mBAAAC,KAAA,SAAAomB,IAAA,IAAA5e,EAAAtI,KAAA,OAAAa,mBAAAI,KAAA,SAAAkmB,GAAA,OAAA,OAAAA,EAAAhmB,KAAAgmB,EAAA/lB,MAAA,KAAA,EAErBE,SAASmG,MACJC,IAAI1H,KAAKinB,iBACTtf,GAAG,CAAE+N,MAAM,GAAK,IAAKpU,SAASuG,KAAKY,QACnChK,KAAK,WACF6J,EAAKnC,YAAYsP,UAAU7K,YAAYtC,EAAK2e,iBAC5CvmB,MAPa,KAAA,EAAA,IAAA,MAAA,OAAAymB,EAAApjB,SAAAmjB,EAAAlnB,8BAc1B,IAAIS,QAAQ,SAAMC,GAAN,OAAaE,EAAAoG,OAAA,OAAA,EAAAnG,mBAAAC,KAAA,SAAAsmB,IAAA,OAAAvmB,mBAAAI,KAAA,SAAAomB,GAAA,OAAA,OAAAA,EAAAlmB,KAAAkmB,EAAAjmB,MAAA,KAAA,EAAA,OAAAimB,EAAAjmB,KAAA,EAEtBX,QAAQqV,IAAIP,GAFU,KAAA,EAAA,GAKX,MAAdyR,EALyB,OAMxBhnB,KAAKinB,gBAAgBvR,MAAQ,EAC7BhV,IAPwB2mB,EAAAT,OAAA,UAAAS,EAAAjmB,KAAA,EAAA,MAAA,KAAA,EAW5BpB,KAAKinB,gBAAgBvR,MAAQ,EAG7B1V,KAAKinB,gBAAkBD,EACvBhnB,KAAKmG,YAAYsP,UAAU/K,SAAS1K,KAAKinB,iBACzCjnB,KAAKinB,gBAAgBvR,MAAQ,EAG7BpU,SAASmG,MACJC,IAAI1H,KAAKinB,iBACTtf,GAAG,CAAE+N,MAAM,GAAK,IAAKpU,SAASuG,KAAKY,QACnChK,KAAK,WACFiC,MAvBoB,KAAA,GAAA,IAAA,MAAA,OAAA2mB,EAAAtjB,SAAAqjB,EAAApnB,gRAiCzB,IAAIS,QAAQ,SAACC,EAAKC,GACrBgI,EAAKse,gBAAkBte,EAAKgd,YAE5B,IAAM2B,EAAW3e,EAAKxC,YAAYT,IAAIyC,EAGtCQ,EAAKxC,YAAYT,IAAIyC,EAAI,GAEzBQ,EAAKxC,YAAYohB,iBAEjB5e,EAAKxC,YAAYsP,UAAU/K,SAAS/B,EAAKgd,aAExChd,EAAKwB,MAAMhD,MAAOrD,GAAG,UAAW,WAE7B6E,EAAKxC,YAAYT,IAAIyC,EAAImf,EACzB5mB,MACD,GAAM,2QAQN,IAAID,QAAQ,SAACC,EAAKC,GACrBwI,EAAK8d,gBAAkB9d,EAAK0c,aAE5B1c,EAAKhD,YAAYohB,iBAEjBpe,EAAKhD,YAAYsP,UAAU/K,SAASvB,EAAK0c,cAExC1c,EAAKgB,MAAMhD,MAAOrD,GAAG,UAAW,WAC7BpD,MACD,GAAM,6QAON,IAAID,QAAQ,SAACC,EAAKC,GACrB6I,EAAKyd,gBAAkBzd,EAAKsc,eAE5Btc,EAAKrD,YAAYohB,iBAEjB/d,EAAKrD,YAAYsP,UAAU/K,SAASlB,EAAKsc,gBAExCtc,EAAKW,MAAMhD,MAAOrD,GAAG,UAAW,WAC7BpD,MACD,GAAM,8QAON,IAAID,QAAQ,SAACC,EAAKC,GACrB+I,EAAKud,gBAAkBvd,EAAKuc,gBAE5Bvc,EAAKvD,YAAYohB,iBAEjB7d,EAAKvD,YAAYsP,UAAU/K,SAAShB,EAAKuc,iBAExCvc,EAAKS,MAAMhD,MAAOrD,GAAG,UAAW,WAC7BpD,MACD,GAAM,2QAON,IAAID,QAAQ,SAACC,EAAKC,GACrB6mB,EAAKP,gBAAkBO,EAAKzB,aAE5ByB,EAAKrhB,YAAYohB,iBAEjBC,EAAKrhB,YAAYsP,UAAU/K,SAAS8c,EAAKzB,cAExCyB,EAAKrd,MAAMhD,MAAOrD,GAAG,UAAW,WAC7BpD,MACD,GAAM,6DAxOrBlC,EAAA6b,gBAAAA,8WCLA,IAAAnb,EAAAhB,EAAA,2BAGamF,+KAcL,OAAO,IAAI5C,QAAQ,SAACC,EAAKC,GAIrB0C,EAAQokB,aAAaC,KAAO,IAAIpmB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa0hB,IACxEtkB,EAAQokB,aAAaC,KAAyBhL,YAAY,kBAE3DrZ,EAAQokB,aAAaG,KAAO,IAAItmB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa4hB,UACxExkB,EAAQokB,aAAaG,KAAyBlL,YAAY,cAE3DrZ,EAAQokB,aAAaK,GAAK5oB,EAAAgD,YAAYuQ,OAAOqV,GAC7CzkB,EAAQokB,aAAaM,MAAQ7oB,EAAAgD,YAAYuQ,OAAOsV,MAIhD1kB,EAAQokB,aAAaO,KAAO,IAAI1mB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa0hB,IACxEtkB,EAAQokB,aAAaO,KAAyBphB,YAAY,WAI3DvD,EAAQ4kB,UAAUC,MAAQ,IAAI5mB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAakiB,sBACtE9kB,EAAQ4kB,UAAUC,MAA0BthB,YAAY,WACzDvD,EAAQ4kB,UAAUG,MAAQ,IAAI9mB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAakiB,sBACtE9kB,EAAQ4kB,UAAUG,MAA0BxhB,YAAY,YACzDvD,EAAQ4kB,UAAUI,WAAa,IAAI/mB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAakiB,sBAC3E9kB,EAAQ4kB,UAAUI,WAA+BzhB,YAAY,WAG9DvD,EAAQilB,SAASC,QAAU,IAAIjnB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa4hB,UACvExkB,EAAQilB,SAASC,QAA4B7L,YAAY,gBAC1D,IAAIpb,SAASknB,aAAanlB,EAAQilB,SAASC,QAA4B,eAAgB,qBAAsB,sBAG7GllB,EAAQilB,SAASG,QAAU,IAAInnB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa4hB,UACvExkB,EAAQilB,SAASG,QAA4B/L,YAAY,gBAC1D,IAAIpb,SAASknB,aAAanlB,EAAQilB,SAASG,QAA4B,cAAe,oBAAqB,qBAE3GplB,EAAQilB,SAASI,YAAc,IAAIpnB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa4hB,UAC3ExkB,EAAQilB,SAASI,YAAgChM,YAAY,cAC9D,IAAIpb,SAASknB,aAAanlB,EAAQilB,SAASI,YAAgC,aAAc,mBAAoB,oBAE7GrlB,EAAQilB,SAASK,KAAO,IAAIrnB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa4hB,UACpExkB,EAAQilB,SAASK,KAAyBjM,YAAY,cACvD,IAAIpb,SAASknB,aAAanlB,EAAQilB,SAASK,KAAyB,WAAY,iBAAkB,kBAElGtlB,EAAQilB,SAASM,SAAW,IAAItnB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa4hB,UACxExkB,EAAQilB,SAASM,SAA6BlM,YAAY,cAC3D,IAAIpb,SAASknB,aAAanlB,EAAQilB,SAASM,SAA6B,gBAAiB,sBAAuB,uBAAuB,GAIvIvlB,EAAQokB,aAAaoB,cAAgB,IAAIvnB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa6iB,mBACjFzlB,EAAQokB,aAAaoB,cAAkCnM,YAAY,aACpErZ,EAAQilB,SAASS,WAAa,IAAIznB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa6iB,mBAC1EzlB,EAAQilB,SAASS,WAA+BrM,YAAY,eAC7DrZ,EAAQilB,SAASU,cAAgB,IAAI1nB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa6iB,mBAC7EzlB,EAAQilB,SAASU,cAAkCtM,YAAY,kBAChErZ,EAAQilB,SAASW,kBAAoB,IAAI3nB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa6iB,mBACjFzlB,EAAQilB,SAASW,kBAAsCvM,YAAY,uBACpErZ,EAAQilB,SAASY,qBAAuB,IAAI5nB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa6iB,mBACpFzlB,EAAQilB,SAASY,qBAAyCxM,YAAY,0BAIvErZ,EAAQ8lB,qBAERzoB,mDAMJ2C,EAAQilB,SAASc,UAAY,IAAI9nB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAa0hB,IACzEtkB,EAAQilB,SAASc,UAA8B1M,YAAY,kBAC3DrZ,EAAQilB,SAASc,UAA8BC,OAAS,UACzDhmB,EAAQimB,eAAgB,8CAIvBjmB,EAAQilB,SAASc,UAAkBtlB,GAAG,YAAaT,EAAQkmB,cAC3DlmB,EAAQilB,SAASc,UAAkBtlB,GAAG,eAAgBT,EAAQmmB,kBAC9DnmB,EAAQilB,SAASc,UAAkBtlB,GAAG,QAAST,EAAQomB,4DAIvDpmB,EAAQilB,SAASc,UAAkB1H,IAAI,YAAare,EAAQkmB,cAC5DlmB,EAAQilB,SAASc,UAAkB1H,IAAI,eAAgBre,EAAQmmB,kBAC/DnmB,EAAQilB,SAASc,UAAkB1H,IAAI,QAASre,EAAQomB,iDAGjC9rB,GACvB0F,EAAQilB,SAASc,UAA8BxiB,YAAY,2BAC5DvD,EAAQimB,eAAgB,qCAEF3rB,GACrB0F,EAAQilB,SAASc,UAA8B1M,YAAY,kBAC5DrZ,EAAQimB,eAAgB,2CAEI3rB,GAC3B0F,EAAQilB,SAASc,UAA8B1M,YAAY,kBAEzDrZ,EAAQimB,eACNjmB,EAAQilB,SAASc,UAA8B/X,cAAc,IAAI2B,MAAM3P,EAAQqmB,kDAO7DlE,GAA+C,IAAzCmE,EAAyC,EAAA5e,UAAArM,aAAAsM,IAAAD,UAAA,GAAAA,UAAA,GAA/B,aAAc6e,EAAiB,EAAA7e,UAAArM,aAAAsM,IAAAD,UAAA,GAAAA,UAAA,GAAT,UACvD8e,EAAU,IAAIvoB,SAASc,KAAKojB,EAAMmE,EAASC,GAEjD,OADAC,EAAQ/N,MAAM,EAAG,EAAG+N,EAAQ9d,YAAY5L,MAAO0pB,EAAQ9d,YAAY1L,QAC5DwpB,6CAGsBrE,EAAMtb,GAEnC,OADgB,IAAI5I,SAASwoB,WAAWtE,EAAMtb,uCAShB,OAAO7G,EAAQokB,6CACnB,OAAOpkB,EAAQilB,0CACd,OAAOjlB,EAAQ4kB,mBA5IhC5kB,EAAAqmB,WAAoB,cAEnBrmB,EAAAokB,aAAuD,GACvDpkB,EAAAilB,SAAmD,GAEnDjlB,EAAA4kB,UAAoD,GAIpD5kB,EAAAimB,eAAwB,EAV3C9qB,EAAA6E,QAAAA,unBCHA,IAAA3D,EAAAxB,EAAA,cACAgB,EAAAhB,EAAA,8BACAiB,EAAAjB,EAAA,kCAIA0B,EAAA1B,EAAA,8BACAkB,EAAAlB,EAAA,gCAEAuH,EAAAvH,EAAA,+BAGauhB,aAYT,SAAAA,EAAY9Z,gGAAS1F,CAAAD,KAAAyf,GACjBzf,KAAKmK,MAAQxE,EACb3F,KAAK+pB,cAAgB,GAGrB/pB,KAAKuX,WAAa,IAAIjW,SAASmU,UAC/BzV,KAAKgqB,YAAc,IAAI1oB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAayY,iBAAkB,iBAElF1e,KAAKiqB,iBAAmB,IAAI3oB,SAASmU,UACrCzV,KAAKuX,WAAW7M,SAAS1K,KAAKgqB,aAI9BhqB,KAAKkqB,oBAAsB,IAAI5oB,SAASmU,UACxCzV,KAAKuX,WAAW7M,SAAS1K,KAAKkqB,qBAE9BlqB,KAAKmqB,UAAY,GAIjBnqB,KAAKoqB,qDAII,IAAArqB,EAAAC,KACTA,KAAKoqB,UACLpqB,KAAK+pB,cAAczkB,QAAQ,SAAA+kB,GACvBA,EAAIvmB,GAAG,QAAS/D,EAAKuqB,cAAevqB,GACpCsqB,EAAIvmB,GAAG,YAAa/D,EAAKwqB,cAAexqB,GACxCsqB,EAAIvmB,GAAG,WAAY/D,EAAKyqB,gBAAiBzqB,uCAK7CC,KAAK+pB,cAAczkB,QAAQ,SAAA+kB,GACvBA,EAAIxX,8DAIE,IAAA7L,EAAAhH,KAEVA,KAAK+pB,cAAczkB,QAAQ,SAAAjB,GACvB2C,EAAKuQ,WAAW3M,YAAYvG,GAC5BA,EAAGwO,0BACHxO,EAAK,OAETrE,KAAK+pB,cAAgB,GACrB/pB,KAAKiqB,iBAAiBzM,oBAGtBxd,KAAKyqB,YAAc7qB,EAAAkD,YAAYI,WAAWqM,OAAOsE,IAAI,SAACnE,EAAO3R,GACzD,MAAO,GAAGsR,OAAOC,MAAM,GAAII,GAC1BmE,IAAI,SAAClE,EAAO/R,GACT,IAAImW,EAAU5U,EAAA8D,gBAAgBoR,aAAaI,SAAS1W,GAAGH,GAEnDiH,EAAM8K,EAKV,OAJA9K,EAAI6O,SAAWvU,EAAA8D,gBAAgBoR,aAAaG,OAAOzW,GAAGH,GAAG8V,SACzD7O,EAAI2O,UAAYrU,EAAA8D,gBAAgBoR,aAAaG,OAAOzW,GAAGH,GAAG4V,UAC1D3O,EAAIkP,QAAsB,MAAXA,EAERlP,MAMf,IAAI,IAAInH,EAAI,EAAGA,EAAIsC,KAAKyqB,YAAY/rB,OAAQhB,IAExC,IAAI,IAAIK,EAAI,EAAGA,EAAIiC,KAAKyqB,YAAY/sB,GAAGgB,OAAQX,IAAK,CAChD,IAAMiG,EAAYhE,KAAKyqB,YAAY/sB,GAAGK,GAElC2sB,EAAS,IAAIppB,SAAS8I,OAAOlL,EAAAgD,YAAY+D,aAAayY,iBAAkB,eACpD,MAArB1a,EAAU+P,SAAmB/P,EAAU+P,SAAS2W,EAAO9jB,YAAY,kBAEnE5C,EAAUwP,WAAmC,MAArBxP,EAAU+P,SAAoB/P,EAAU+P,SAC/D2W,EAAO9jB,YAAY,kBAGnB5C,EAAU0P,UAIVgX,EAAOhV,MAAQ,EAEfgV,EAAOrB,OAAS,WALhBqB,EAAOhV,MAAQ,IASnBgV,EAAOpgB,EAAI,IAAMvM,EACjB2sB,EAAO9iB,EAAI,GAAKlK,EAYhBsC,KAAKiqB,iBAAiBvf,SAASggB,GAE/B1qB,KAAK+pB,cAAc7kB,KAAKwlB,GAIhC1qB,KAAKiqB,iBAAiB3f,EAAKtK,KAAKmK,MAAMqB,WAAa,EAAMxL,KAAKiqB,iBAAiBle,YAAY5L,MAAQ,EACnGH,KAAKiqB,iBAAiBriB,EAAI,IAC1B5H,KAAKuX,WAAW7M,SAAS1K,KAAKiqB,0DAKV9a,GAGpB,OADcnP,KAAKyqB,YAAYE,OAAO,SAACC,EAAKxpB,GAAN,OAAewpB,EAAIvb,OAAOjO,KACjD+N,yCAIGxR,GAAC,IAAA2K,EAAAtI,KAEfmP,EAAQnP,KAAK+pB,cAAclhB,QAAQlL,EAAEktB,QAEzC,IAAa,GAAV1b,EAAH,CAIA,IAAM6B,EAAOpR,EAAAkD,YAAYM,oBAAoB+L,GAC7C,GAAW,MAAR6B,GACCA,EAAK0C,SAAT,CAEAjO,EAAAqD,aAAaC,QAAQ7J,EAAAgD,YAAY8G,OAAOiX,aACxCxa,EAAAqD,aAAaqS,gBAAgB,YAG7Bnb,KAAKmK,MAAMhH,mBAAmB6N,GAE9B,IAAMoH,EAAehZ,EAAAwC,cAAcI,eAAe,gBAClD,IAAIvB,QAAQ,SAAMC,GAAN,OAAaE,EAAA0H,OAAA,OAAA,EAAAzH,mBAAAC,KAAA,SAAAC,IAAA,OAAAF,mBAAAI,KAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OACrBgX,EAAahW,KAAO4O,EAAKY,KADJ1Q,EAAAE,KAAA,EAEfhC,EAAAwC,cAAcG,iBAAiBqW,EAAcpY,KAAKmK,MAAMhD,OAFzC,KAAA,EAGrBiR,EAAaC,gBAAgB,OAAQ,KAErC3X,IALqB,KAAA,EAAA,IAAA,MAAA,OAAAQ,EAAA6C,SAAAhD,EAAAf,mDASPrC,GAGlB,IAAIwR,EAAQnP,KAAK+pB,cAAclhB,QAAQlL,EAAEktB,QAEzC,IAAa,GAAV1b,EAAa,CACZ,IAAM6B,EAAOhR,KAAK8qB,gBAAgB3b,GACvB,MAAR6B,GACIA,EAAK0C,WACJ1T,KAAKmqB,UAAYnZ,EAAKY,+CAKdjU,GACpBqC,KAAKmqB,UAAY,qCAII,OAAOnqB,KAAKuX,2CAChBxN,GACjB,GAAY,IAATA,EAAH,CAKA,IAAMyb,EAAO9lB,EAAA2D,QAAQ2Y,mBAAmBjS,EAAO7K,EAAAgD,YAAY+D,aAAagW,iBACvEuJ,EAAatH,MAAQ,GAEtBle,KAAKkqB,oBAAoB1M,oBACzBxd,KAAKkqB,oBAAoBxf,SAAS8a,GAGlCxlB,KAAKkqB,oBAAoB5f,EAAKtK,KAAKmK,MAAMqB,WAAa,EAAOga,EAAKzZ,YAAY5L,MAAQ,EAAK,GAC3FH,KAAKkqB,oBAAoBtiB,EAAI5H,KAAKmK,MAAMuB,YAAc,QAZlD1L,KAAKkqB,oBAAoB1M,6BAvLrChf,EAAAihB,mBAAAA,goBCZA,IAAAsL,EAAA7sB,EAAA,YAGauX,aAKT,SAAAA,IAAuG,IAA3FuV,EAA2F,EAAAjgB,UAAArM,aAAAsM,IAAAD,UAAA,GAAAA,UAAA,GAAJ,kGAAI9K,CAAAD,KAAAyV,GACnGzV,KAAKirB,SAAW,GAChBjrB,KAAKuX,WAAa,IAAIjW,SAASmU,UAC/BzV,KAAKkrB,QAAqB,MAAVF,EAAkB,IAAID,EAAAI,OAAOnrB,KAAKuX,WAAYyT,EAAOI,UAAWJ,EAAOK,UAAWL,EAAOM,eAAgBN,EAAOO,SAAYR,EAAAI,OAAOK,qBAAqBxrB,KAAKuX,kDAItKtC,EAAYyV,GAAwD,IAAAQ,EAAAnrB,EAAAC,KAAzByrB,IAAyB,EAAA1gB,UAAArM,aAAAsM,IAAAD,UAAA,KAAAA,UAAA,GAC3E,OAAyB,MAAtB/K,KAAKirB,SAAShW,KACjBjV,KAAKirB,SAAShW,GAAOyV,EAAOgB,QAEzBD,IAAcP,EAAAlrB,KAAKkrB,SAAQS,YAAbrc,MAAA4b,EAAA,EAAyB,GAAzB7b,OAAAuc,EAAkC7lB,OAAO+Q,KAAK9W,KAAKirB,UAAUpX,IAAI,SAAAgQ,GAAA,OAAK9jB,EAAKkrB,SAASpH,SAC9F,mCAGIgI,GAA+C,IAAAC,EAAA9kB,EAAAhH,KAC1D+F,OAAO+Q,KAAK+U,GAASvmB,QAAQ,SAAAue,GACzB7c,EAAKsY,IAAIuE,EAAGgI,EAAQhI,IAAI,MAG5BiI,EAAA9rB,KAAKkrB,SAAQS,YAAbrc,MAAAwc,EAAA,EAAyB,GAAzBzc,OAAAuc,EAAkC7lB,OAAO+Q,KAAK9W,KAAKirB,UAAUpX,IAAI,SAAAgQ,GAAA,OAAK7c,EAAKikB,SAASpH,6CAGpEmH,GAChBhrB,KAAKkrB,QAAUF,4CAIG,IAAAe,EAAAzjB,EAAAtI,MAClB+rB,EAAA/rB,KAAKkrB,SAAQS,YAAbrc,MAAAyc,EAAA,EAAyB,GAAzB1c,OAAAuc,EAAkC7lB,OAAO+Q,KAAK9W,KAAKirB,UAAUpX,IAAI,SAAAgQ,GAAA,OAAKvb,EAAK2iB,SAASpH,0CAM5C,OAAO7jB,KAAKuX,2CACjC,OAAOvX,KAAKirB,kDAG/B,MAAO,CAGHe,cAAkB,CAACZ,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOe,MAAOZ,eAAeP,EAAAI,OAAOe,MAAOX,QAAQ,GAC3GY,iBAAqB,CAACf,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOe,MAAOZ,eAAeP,EAAAI,OAAOiB,OAAQb,QAAQ,GAC/G7T,iBAAqB,CAAC0T,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOe,MAAOZ,eAAeP,EAAAI,OAAOkB,IAAKd,QAAQ,GAE5Ge,gBAAoB,CAAClB,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOiB,OAAQd,eAAeP,EAAAI,OAAOe,MAAOX,QAAQ,GAC9GgB,mBAAuB,CAACnB,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOiB,OAAQd,eAAeP,EAAAI,OAAOiB,OAAQb,QAAQ,GAClHiB,mBAAuB,CAACpB,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOiB,OAAQd,eAAeP,EAAAI,OAAOkB,IAAKd,QAAQ,GAE/GkB,eAAmB,CAACrB,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOkB,IAAKf,eAAeP,EAAAI,OAAOe,MAAOX,QAAQ,GAC1GmB,kBAAsB,CAACtB,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOkB,IAAKf,eAAeP,EAAAI,OAAOiB,OAAQb,QAAQ,GAC9GoB,kBAAsB,CAACvB,UAAUL,EAAAI,OAAOc,SAAUZ,UAAUN,EAAAI,OAAOkB,IAAKf,eAAeP,EAAAI,OAAOkB,IAAKd,QAAQ,aAzDvH/sB,EAAAiX,UAAAA,+VCHA,IAAA/G,EAAAxQ,EAAA,cAGaitB,aAiBT,SAAAA,EAAYxgB,EAA2BygB,EAAkBC,EAAkBC,GAAyC,IAAlBC,EAAkB,EAAAxgB,UAAArM,aAAAsM,IAAAD,UAAA,GAAAA,UAAA,GAAD,+FAAC9K,CAAAD,KAAAmrB,GAChHnrB,KAAK4sB,QAAUjiB,EACf3K,KAAK6sB,OAAS,GAEd7sB,KAAKqK,WAAa+gB,EAClBprB,KAAK8sB,WAAazB,EAClBrrB,KAAK+sB,gBAAkBzB,EACvBtrB,KAAKgtB,SAAWzB,kDAI0D,IAAA,IAA3D0B,IAA2D,EAAAliB,UAAArM,aAAAsM,IAAAD,UAAA,KAAAA,UAAA,GAAAmiB,EAAAniB,UAAArM,OAA9ByuB,EAA8BC,MAAA,EAAAF,EAAAA,EAAA,EAAA,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAA9BF,EAA8BE,EAAA,GAAAtiB,UAAAsiB,GAC1E,KAAGF,EAAMzuB,QAAU,KAEnBsB,KAAK6sB,OAASM,EAEXF,GACCjtB,KAAK4sB,QAAQpP,oBAIdxd,KAAKqK,YAAc8gB,EAAOc,UAAU,CACnC,IAAIqB,EAAc,EAElB,OAAOttB,KAAK8sB,YACR,KAAK3B,EAAOe,MACR,IAAI,IAAInuB,EAAI,EAAGA,EAAIovB,EAAMzuB,OAAQX,IAAK,CAClC,IAAM+T,EAA8Bqb,EAAMpvB,GAC1C+T,EAAKxH,EAAI,EACTwH,EAAKlK,EAAI0lB,EACTA,GAAexb,EAAK/F,YAAY1L,OAASL,KAAKgtB,SAC3CC,GAAajtB,KAAK4sB,QAAQliB,SAASoH,GAE1C,MAEJ,KAAKqZ,EAAOiB,OACR,IAAI,IAAI9S,EAAI,EAAGA,EAAI6T,EAAMzuB,OAAQ4a,IAAK,CAClC,IAAMiU,EAA8BJ,EAAM7T,GAC1CiU,EAAKjjB,EAAKoE,EAAA7O,KAAKO,MAAQ,EAAMmtB,EAAKxhB,YAAY5L,MAAQ,EACtDotB,EAAK3lB,EAAI0lB,EACTA,GAAeC,EAAKxhB,YAAY1L,OAASL,KAAKgtB,SAC3CC,GAAajtB,KAAK4sB,QAAQliB,SAAS6iB,GAE1C,MAEJ,KAAKpC,EAAOkB,IACR,IAAI,IAAImB,EAAI,EAAGA,EAAIL,EAAMzuB,OAAQ8uB,IAAK,CAClC,IAAMC,EAA8BN,EAAMK,GAC1CC,EAAKnjB,EAAIoE,EAAA7O,KAAKO,MAAQqtB,EAAK1hB,YAAY5L,MACvCstB,EAAK7lB,EAAI0lB,EACTA,GAAeG,EAAK1hB,YAAY1L,OAASL,KAAKgtB,SAC3CC,GAAajtB,KAAK4sB,QAAQliB,SAAS+iB,IAQlD,OAAOztB,KAAK+sB,iBACR,KAAK5B,EAAOe,MACR,MAEJ,KAAKf,EAAOiB,OACRkB,GAAeH,EAAMA,EAAMzuB,OAAO,GAAGqN,YAAY1L,OACjD,IAAI,IAAIqtB,EAAI,EAAGA,EAAIP,EAAMzuB,OAAQgvB,IAAK,CACEP,EAAMO,GAErC9lB,GAAM8G,EAAA7O,KAAKS,OAAS,EAAMgtB,EAAc,EAEjD,MAEJ,KAAKnC,EAAOkB,IACRiB,GAAeH,EAAMA,EAAMzuB,OAAO,GAAGqN,YAAY1L,OACjD,IAAI,IAAIstB,EAAI,EAAGA,EAAIR,EAAMzuB,OAAQivB,IAAK,CACER,EAAMQ,GAErC/lB,GAAK8G,EAAA7O,KAAKS,OAASgtB,oDAgBT7iB,GAAgC,OAAO,IAAI0gB,EAAO1gB,EAAW0gB,EAAOc,SAAUd,EAAOiB,OAAQjB,EAAOiB,OAAQ,+CAC7G3hB,GAAgC,OAAO,IAAI0gB,EAAO1gB,EAAW0gB,EAAOc,SAAUd,EAAOiB,OAAQjB,EAAOe,MAAO,YA7G/Hf,EAAAyC,WAAoB,aACpBzC,EAAAc,SAAkB,WAElBd,EAAAe,MAAe,QACff,EAAAkB,IAAa,MACblB,EAAAiB,OAAgB,SAPlC5tB,EAAA2sB,OAAAA,gWCFA,IAAAzrB,EAAAxB,EAAA,cAIaic,aAkBT,SAAAA,EAAYxU,gGAAS1F,CAAAD,KAAAma,GAJbna,KAAA6tB,WAAoB,EACpB7tB,KAAA8tB,gBAAyB,EACzB9tB,KAAA+tB,WAAoB,EAGxB/tB,KAAKmK,MAAQxE,EAEb3F,KAAKuX,WAAa,IAAIjW,SAASmU,UAC/BzV,KAAK8d,IAAM,IAAIxc,SAASoa,MACxB1b,KAAK8d,IAAInC,SAASC,UAAU,WAC5B5b,KAAK8d,IAAInC,SAASE,SAAS,EAAG,EAAG7b,KAAKmK,MAAMqB,WAAY,IACxDxL,KAAK8d,IAAInC,SAASoC,UAClB/d,KAAK8d,IAAIhC,MAAM,EAAG,EAAG9b,KAAKmK,MAAMqB,WAAY,IAC5CxL,KAAKuX,WAAW7M,SAAS1K,KAAK8d,KAI9B9d,KAAKguB,gBAAkB,IAAI1sB,SAASmU,UACpCzV,KAAKguB,gBAAgB1jB,GAAK,GAC1B,IAAM2jB,EAAcvuB,EAAA2D,QAAQ6qB,SAAShG,MAAMwD,QAC3C1rB,KAAKguB,gBAAgBtjB,SAASujB,GAC9BjuB,KAAKmuB,oBAAsB,IAAI7sB,SAASmU,UACxCzV,KAAKmuB,oBAAoBvmB,GAAK,EAC9B5H,KAAKmuB,oBAAoB7jB,GAAK5K,EAAA2D,QAAQ6qB,SAAShG,MAAMnc,YAAY5L,MAAQ,GACzEH,KAAKguB,gBAAgBtjB,SAAS1K,KAAKmuB,qBACnCnuB,KAAKuX,WAAW7M,SAAS1K,KAAKguB,iBAG9BhuB,KAAKouB,qBAAuB,IAAI9sB,SAASmU,UACzC,IAAM4Y,EAAmB3uB,EAAA2D,QAAQ6qB,SAAS7F,WAAWqD,QACrD1rB,KAAKouB,qBAAqB1jB,SAAS2jB,GACnCruB,KAAKsuB,yBAA2B,IAAIhtB,SAASmU,UAC7CzV,KAAKsuB,yBAAyB1mB,GAAK,EACnC5H,KAAKsuB,yBAAyBhkB,GAAK5K,EAAA2D,QAAQ6qB,SAAS7F,WAAWtc,YAAY5L,MAAQ,GACnFH,KAAKouB,qBAAqB1jB,SAAS1K,KAAKsuB,0BACxCtuB,KAAKuX,WAAW7M,SAAS1K,KAAKouB,sBAG9BpuB,KAAKuuB,gBAAkB,IAAIjtB,SAASmU,UACpCzV,KAAKuuB,gBAAgBjkB,EAAItK,KAAKmK,MAAMqB,WAAa9L,EAAA2D,QAAQ6qB,SAAS9F,MAAMrc,YAAY5L,MAAQ,GAC5F,IAAMquB,EAAc9uB,EAAA2D,QAAQ6qB,SAAS9F,MAAMsD,QAC3C1rB,KAAKuuB,gBAAgB7jB,SAAS8jB,GAC9BxuB,KAAKyuB,oBAAsB,IAAIntB,SAASmU,UACxCzV,KAAKyuB,oBAAoB7mB,GAAK,EAC9B5H,KAAKyuB,oBAAoBnkB,GAAK5K,EAAA2D,QAAQ6qB,SAAS9F,MAAMrc,YAAY5L,MAAQ,GACzEH,KAAKuuB,gBAAgB7jB,SAAS1K,KAAKyuB,qBACnCzuB,KAAKuX,WAAW7M,SAAS1K,KAAKuuB,4DAKlBzR,EAAmBE,EAAwBD,GACvD/c,KAAK+tB,UAAYjR,EACjB9c,KAAK8tB,eAAiB9Q,EACtBhd,KAAK6tB,UAAY9Q,EAEd/c,KAAK+tB,UAAW/tB,KAAKuX,WAAW7M,SAAS1K,KAAKuuB,iBAC5CvuB,KAAKuX,WAAW3M,YAAY5K,KAAKuuB,iBAEnCvuB,KAAK8tB,eAAgB9tB,KAAKuX,WAAW7M,SAAS1K,KAAKouB,sBACjDpuB,KAAKuX,WAAW3M,YAAY5K,KAAKouB,sBAEnCpuB,KAAK6tB,UAAW7tB,KAAKuX,WAAW7M,SAAS1K,KAAKguB,iBAC5ChuB,KAAKuX,WAAW3M,YAAY5K,KAAKguB,gDAK5BvpB,sCAIW,OAAOzE,KAAKuX,oBAtFzC/Y,EAAA2b,UAAAA","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/* ************************************************* */\r\n/*                      LOGGING                      */\r\n/* ************************************************* */\r\nexport class Logging {\r\n    static success(message:string):void {\r\n        console.log(`%c ${message}`, 'color:seagreen; font-size:1.1em; font-weight:bold; border-left: solid 3px seagreen;')    ;\r\n    }\r\n\r\n    static message(message:string):void {\r\n        console.log(`%c ${message}`, 'color:#1E265C; font-size:1.1em; font-weight:bold; border-left: solid 3px #1E265C;');\r\n    }\r\n\r\n    static error(message:string):void {\r\n        console.log(`%c ${message}`, 'color:red; font-size:1.1em; border-left: solid 3px red;');\r\n    }\r\n}","import { LoadManager } from \"./managers/LoadManager\";\r\nimport { ProgressManager } from \"./managers/ProgressManager\";\r\nimport { ScreenManager } from \"./managers/ScreenManager\";\r\nimport { SplashScreen } from \"./screens/SplashScreen\";\r\nimport { MenuScreen } from \"./screens/MenuScreen\";\r\nimport { GameScreen } from \"./screens/GameScreen\";\r\nimport { EndScreen } from \"./screens/EndScreen\";\r\nimport { Logging } from \"./Functions\";\r\nimport { Sprites } from \"./ui/Sprites\";\r\nimport { IntermediaryScreen } from \"./screens/IntermediaryScreen\";\r\nimport { DataManager, LevelData } from \"./managers/DataManager\";\r\n\r\nexport interface ICurrentScore {\r\n    totalFish: number;\r\n    time: number;\r\n    combos: number;\r\n}\r\n\r\n\r\nexport class Game {\r\n    private _canvas:HTMLCanvasElement;\r\n    private _stage:createjs.StageGL;\r\n    private _scaling:number;\r\n\r\n    private _lastGameTime:number;\r\n\r\n    private _currentLevel:LevelData;\r\n    private _currentScore:ICurrentScore;\r\n\r\n    constructor(canvasDiv:HTMLCanvasElement) {\r\n\r\n        this._canvas = canvasDiv;\r\n        this._canvas.width = Game.WIDTH;\r\n        this._canvas.height = Game.HEIGHT;\r\n\r\n        this._lastGameTime = -1;\r\n\r\n        //set the scaling\r\n        this._scaling = Game.HEIGHT / 1024;\r\n\r\n        //start loading game assets\r\n        new Promise(async(res, rej) => {\r\n            //create the stage\r\n            this._stage = new createjs.StageGL(this._canvas, { antialias: true });\r\n            // this._stage = new createjs.StageGL(this._canvas);\r\n            (this._stage as any).setClearColor(\"#000000\");\r\n            this._stage.enableMouseOver(10);\r\n            this._stage.update();\r\n\r\n\r\n            //load the splash screen\r\n            ScreenManager.registerScreen(\"splash\", new SplashScreen(this));\r\n            ScreenManager.setCurrentScreen(\"splash\", this._stage);\r\n\r\n            const splash = ScreenManager.getScreenByKey(\"splash\") as SplashScreen;\r\n\r\n            //listen to asset updates\r\n            (this._stage as any).addEventListener(LoadManager.ASSETS_UPDATED, (e) => {\r\n                //update percent\r\n                splash.Text = Math.ceil(LoadManager.Percentage * 100).toString();\r\n            });\r\n            //load assets\r\n            await LoadManager.loadAssets(\"assets/manifest.json\", this._stage)\r\n                .catch(err => {\r\n                    console.warn(\"Error loading assets:\", err);\r\n                });\r\n\r\n            Logging.success(\"Assets Loaded Successfully!\");\r\n\r\n            //load level data\r\n            await DataManager.loadWorldsData(\"assets/data/levels.json\")\r\n                .catch(err => {\r\n                    Logging.error(err);\r\n                    return;\r\n                });\r\n            //load progress data\r\n            await ProgressManager.loadWorldsData(DataManager.WorldsData);\r\n\r\n            //set the current screen\r\n            //game test, load desired level patch -- if autoloading to game screen\r\n            this.changeCurrentLevel(DataManager.getLevelDataByIndex(0));\r\n\r\n            Logging.success(\"Level Data Loaded Successfully!\");\r\n\r\n            //setup createjs.Sprites\r\n            await Sprites.setup();\r\n\r\n            //build the screens\r\n            ScreenManager.registerScreen(\"menu\", new MenuScreen(this));\r\n            ScreenManager.registerScreen(\"game\", new GameScreen(this));\r\n            ScreenManager.registerScreen(\"end\", new EndScreen(this));\r\n            ScreenManager.registerScreen(\"intermediary\", new IntermediaryScreen(this));\r\n            \r\n\r\n            ScreenManager.setCurrentScreen(\"menu\", this._stage);\r\n            // ScreenManager.setCurrentScreen(\"game\", this._stage);\r\n            // ScreenManager.setCurrentScreen(\"end\", this._stage);\r\n\r\n            //setup the game loop\r\n            createjs.Ticker.framerate = Game.FRAME_RATE;\r\n            createjs.Ticker.on(\"tick\", this.update, this);\r\n\r\n            res();\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public changeCurrentLevel(levelData:LevelData) {\r\n        this._currentLevel = levelData;\r\n    }\r\n\r\n    public changeCurrentScore(currentScore:ICurrentScore) {\r\n        this._currentScore = currentScore;\r\n    }\r\n\r\n\r\n\r\n    //recursive sizing\r\n    private _scaleChildren(children) {\r\n\r\n\r\n        if(children != null) {\r\n            for(let i = 0; i < children.length; i++) {\r\n                const ch = children[i];\r\n                ch.scaleX = ch.scaleY = this._scaling;\r\n                if(ch.children != null && ch.scaleX != null) this._scaleChildren(ch);\r\n            }\r\n        }\r\n\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    public update(e:any) {\r\n\r\n        const gameTime = (this._lastGameTime != -1) ? createjs.Ticker.getMeasuredFPS() - this._lastGameTime : 1;\r\n        this._lastGameTime = createjs.Ticker.getMeasuredFPS();\r\n\r\n        //update the screen\r\n        if(ScreenManager.CurrentScreen != null) ScreenManager.CurrentScreen.update(gameTime);\r\n\r\n        //scale all children\r\n        // this._scaleChildren(this._stage.children);\r\n\r\n        //update the stage\r\n        this._stage.update();\r\n    }\r\n\r\n\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get FRAME_RATE() { return 30; }\r\n    // public static get WIDTH() { return Game.HEIGHT * 0.5625; } //desired size\r\n    // public static get HEIGHT() { return Math.min(document.body.clientHeight, 1024); }\r\n\r\n    public static get WIDTH() { return 576; }\r\n    public static get HEIGHT() { return 1024; }\r\n\r\n    public get StageWidth() { return this._canvas.width; } //actual size\r\n    public get StageHeight() { return this._canvas.height; }\r\n\r\n    public get Stage() { return this._stage; }\r\n    public get Scaling() { return this._scaling; }\r\n\r\n    public get CurrentLevelData() { return this._currentLevel; }\r\n    public get CurrentScoreData() { return this._currentScore; }\r\n\r\n\r\n\r\n\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n\r\n\r\n    //generate levels\r\n    /*\r\n    let data = [];\r\n    for(let i = 0; i < 15; i++) {\r\n        data.push({\r\n        id: (Math.random() > 0.8) ? \"puffer\" : \"fish\",\r\n        x: Math.floor(Math.random() * 500 + 50),\r\n        y: Math.floor(Math.random() * 850 + 10),\r\n        speed: parseFloat((Math.random() * 5 + 2).toFixed(2)),\r\n        flip: Math.random() > 0.5 ? true : false\r\n        });\r\n    }\r\n\r\n    console.log(data);\r\n\r\n    console.log(JSON.stringify(data, null, 2));\r\n    */\r\n\r\n\r\n}","import { Logging } from \"./Functions\";\r\nimport { Entity } from \"./entities/Entity\";\r\n\r\nexport interface IPoolObject {\r\n    type:string;\r\n    obj:Entity,\r\n    active:boolean;\r\n}\r\n\r\nexport class ObjectPool {\r\n    private static _pool:IPoolObject[];\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /**Creates a pool object. */\r\n    public static createPoolObject(obj:Entity, type:string) {\r\n        const poolObj = {\r\n            type,\r\n            obj,\r\n            active: false\r\n        };\r\n        ObjectPool.Pool.push(poolObj);\r\n        return poolObj;\r\n    }\r\n\r\n    /**Checks out a pool object.  Use POOL global function to access. */\r\n    public static checkout(type:string) {\r\n        const poolObj = ObjectPool._getObjectByType(type);\r\n        if(poolObj != null) {\r\n            poolObj.active = true;\r\n            return poolObj.obj;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**Returns an object to the pool. */\r\n    public static return(obj:Entity) {\r\n        const poolObj = ObjectPool._getObjectByObj(obj);\r\n        if(poolObj != null) {\r\n            poolObj.active = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**Returns all objects to pool. */\r\n    public static releaseAllObjects() {\r\n        ObjectPool._pool.forEach(p => {\r\n            p.active = false;\r\n        });\r\n    }\r\n\r\n\r\n    public static _getObjectByType(type) {\r\n        const poolObj = ObjectPool._pool.find((o => o.type == type && !o.active));\r\n        if(poolObj == null) Logging.error(\"Object not found in pool, or pool is exhausted.  Return some objects.\");\r\n        return poolObj\r\n    }\r\n    public static _getObjectByObj(obj) {\r\n        return ObjectPool._pool.find((o => o.obj == obj));\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get Pool() { \r\n        if(ObjectPool._pool == null) ObjectPool._pool = [];\r\n        return ObjectPool._pool;\r\n    }\r\n}","import { Game } from \"../Game\";\r\nimport { Entity } from \"./Entity\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\nimport { IEnableable } from \"../Interfaces\";\r\nimport { GameScreen } from \"../screens/GameScreen\";\r\nimport { Fish } from \"./Fish\";\r\nimport { SoundManager } from \"../managers/SoundManager\";\r\n\r\nexport class Cat extends Entity implements IEnableable {\r\n    private _gameScreen:GameScreen;\r\n    private _speed:number;\r\n    private _fishCaughtMultiplier:number; //this will be the rate at which the cat slows down when rising per fish\r\n\r\n    private _catYTween:createjs.Tween;\r\n    private _caughtFish:Fish[];\r\n\r\n    private _isGrabbing:boolean;\r\n    private _isRising:boolean;\r\n    private _isInjured:boolean;\r\n    private _hasReachedSurface:boolean;\r\n\r\n    constructor(game:Game, gameScreen:GameScreen) {\r\n        super(game, LoadManager.Spritesheets.Kitty_Spritesheet);\r\n        this._gameScreen = gameScreen;\r\n\r\n        this._speed = 3;\r\n        this._fishCaughtMultiplier = 0.05;\r\n\r\n        this._caughtFish = [];\r\n        this._isGrabbing = false;\r\n        this._isRising = false;\r\n        this._isInjured = false;\r\n        this._hasReachedSurface = true;\r\n\r\n        this._sprite.gotoAndPlay(Cat.ANIMATION.Idle);\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    enable() {\r\n\r\n    }\r\n\r\n    disable() {\r\n\r\n    }\r\n\r\n\r\n    /***************/\r\n    /*   ACTIONS   */\r\n    /***************/\r\n    public grab() {\r\n        //if the game is paused, we shall not grab\r\n        if(this._gameScreen.IsGamelogicPaused) return;\r\n\r\n        //cannot grab if we are not at surface\r\n        if(!this._hasReachedSurface) return;\r\n\r\n        this._isGrabbing = true;\r\n        this._hasReachedSurface = false;\r\n\r\n        //move to x position\r\n        this.X = this._gameScreen.Game.Stage.mouseX;\r\n\r\n        //grab to y position\r\n        const speed = (this._gameScreen.Game.Stage.mouseY / 2) * this.Speed;\r\n        this._catYTween = createjs.Tween\r\n            .get(this._sprite)\r\n            .to({ y:this._gameScreen.Game.Stage.mouseY }, speed, createjs.Ease.circIn)\r\n            .call(() => {\r\n                //once the grab is done, turn off flag\r\n                this._isGrabbing = false;\r\n\r\n                 //play animations\r\n                this._sprite.gotoAndPlay(Cat.ANIMATION.Grab);\r\n                //listen for animation to finish\r\n                (this._sprite as any).on(\"animationend\", () => {\r\n                    this._sprite.gotoAndPlay(Cat.ANIMATION.Hold);\r\n                }, true);\r\n\r\n                //try to grab a fish\r\n                const fishes = this._gameScreen.tryToGrabFishes(this.X , this.Y);\r\n\r\n                //see if a fish was grabbed\r\n                if(fishes.length > 0) this.caught(fishes);\r\n                else this.returnToSurface();\r\n            });\r\n\r\n    }\r\n\r\n    /**\r\n     * Called to return cat to surface.\r\n     */\r\n    public returnToSurface() {\r\n        this._sprite.gotoAndPlay(Cat.ANIMATION.Idle);\r\n\r\n        //remove any lingering tweens\r\n        createjs.Tween.removeTweens(this._sprite);\r\n        const speed = (this.Y / 2) * this.Speed;\r\n        this._catYTween = createjs.Tween.get(this._sprite)\r\n            .wait(150)\r\n            .to({y:20}, speed, createjs.Ease.linear)\r\n            .call(() => {\r\n                //once the surface has been reached, allow x movement again\r\n                this.reachSurface();\r\n            });\r\n    }\r\n\r\n    public caught(fishes:Fish[]) {\r\n        if(fishes.length <= 0) return;\r\n        this._isRising = true;  \r\n        \r\n        let hasNewFish = false;\r\n\r\n        fishes.forEach(f => {\r\n            if(this._caughtFish.indexOf(f) != -1) return;\r\n            hasNewFish = true;\r\n            //grab the fish\r\n            f.catch();\r\n\r\n            //add fish to caught array\r\n            this._caughtFish.push(f);\r\n\r\n            //control the fish\r\n            f.Y = this.Y;\r\n        });\r\n\r\n        if(!hasNewFish) return;\r\n\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.FishGrab);\r\n        \r\n        //if we grabbed a fish...\r\n        //go back up... slowly\r\n        createjs.Tween.removeTweens(this._sprite);\r\n        const speed = this.Y * this.Speed;\r\n        this._catYTween = createjs.Tween.get(this._sprite)\r\n            .wait(250)\r\n            .to({y:-20}, speed, createjs.Ease.linear)\r\n            .call(() => {\r\n                //once the surface has been reached, allow x movement again\r\n                this.reachSurface();\r\n                this._isRising = false;\r\n            });\r\n\r\n    }\r\n    public drop() {\r\n        //release the fish\r\n        this._caughtFish.forEach(f => f.release());\r\n        this._caughtFish = [];\r\n    }\r\n\r\n    /**Called when hit by an enemy. */\r\n    public injure() {\r\n        this._isInjured = true;\r\n        //start hurt animation\r\n        //end any current tweening\r\n        createjs.Tween.removeTweens(this._sprite);\r\n        this._sprite.gotoAndPlay(Cat.ANIMATION.Ow);\r\n        this._catYTween = createjs.Tween.get(this._sprite)\r\n            .wait(15)\r\n            .to({y:20}, 500, createjs.Ease.linear)\r\n            .call(() => {\r\n                //once the surface has been reached, allow x movement again\r\n                this.reachSurface();\r\n                this._sprite.gotoAndPlay(Cat.ANIMATION.Idle);\r\n            });\r\n    }\r\n\r\n    /**Called when the cat tickles an enemy. */\r\n    public hitEnemy() {\r\n        this.injure();\r\n        this.drop();\r\n\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.CatInjure);\r\n    }\r\n\r\n    public reachSurface() {\r\n        //if we have a fish, send to main logic\r\n        if(this._caughtFish != null) {\r\n            this._caughtFish.forEach(f => {\r\n                this._gameScreen.collectFish(f);\r\n            });\r\n            this._caughtFish = [];\r\n        }\r\n\r\n        //set flags\r\n        this._hasReachedSurface = true;\r\n        this._isInjured = false;\r\n        this._isRising = false;\r\n        this._isGrabbing = false;\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    update(gameTime:number) {\r\n        //if our game logic is paused, no FISHING\r\n        if(this._gameScreen.IsGamelogicPaused) return;\r\n\r\n        super.update(gameTime);\r\n\r\n\r\n        //if we are rising, attempt to catch more fish\r\n        if(this._isRising && !this._isInjured) {\r\n            //try to grab a fish\r\n            const fishes = this._gameScreen.tryToGrabFishes(this.X , this.Y);\r\n            //see if a fish was grabbed\r\n            if(fishes.length > 0)\r\n                this.caught(fishes);\r\n        }\r\n\r\n        //test puffer damage\r\n        if(this._isRising || this._isGrabbing) {\r\n            //don't test again if injured\r\n            if(!this._isInjured) {\r\n                //test for puffer hit\r\n                const hasHitPuffer = this._gameScreen.hasHitAPuffer(this.X, this.Y);\r\n                if(hasHitPuffer) {\r\n                    this.hitEnemy();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        //drag fish with us if we have any\r\n        if(this._caughtFish != null) {\r\n            this._caughtFish.forEach(f => {\r\n                f.Y = this.Y - 20;\r\n            });\r\n        }\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get GRAB_RANGE() { return 120; }\r\n    public static get ANIMATION() {\r\n        return Object.freeze({\r\n            \"Idle\" : \"kittyIdle\",\r\n            \"Death\" : \"kittyIdle\",\r\n            \"Grab\" : \"kittyIdle\",\r\n            \"Hold\" : \"kittyIdle\",\r\n            \"Ow\" : \"kittyIdle\"\r\n        });\r\n    }\r\n    // public static get ANIMATION() {\r\n    //     return Object.freeze({\r\n    //         \"Idle\" : \"cat_idle\",\r\n    //         \"Death\" : \"cat_death\",\r\n    //         \"Grab\" : \"cat_grab\",\r\n    //         \"Hold\" : \"cat_grab_hold\",\r\n    //         \"Ow\" : \"cat_ow\"\r\n    //     });\r\n    // }\r\n    public get Speed() { \r\n        const caughtFishMult = ((this._caughtFish.length > 0) ? 1 + (this._caughtFish.length + this._fishCaughtMultiplier) : 1);\r\n\r\n        return caughtFishMult * this._speed;\r\n    }\r\n    public set Speed(value:number) { this._speed = value; }\r\n}","import { ICreateable, IUpdateable } from \"../Interfaces\";\r\nimport { Game } from \"../Game\";\r\n\r\nexport class Entity implements ICreateable<Entity>, IUpdateable {\r\n    private _game:Game;\r\n    protected _name:string;\r\n    protected _sprite:createjs.Sprite;\r\n    protected _direction:{ x:number, y:number };\r\n\r\n    private _isIgnoringCollision:boolean;\r\n    private _ignoreCollisionTimer:number;\r\n\r\n    constructor(game:Game, spritesheet:createjs.SpriteSheet) {\r\n        this._game = game;\r\n        this._sprite = new createjs.Sprite(spritesheet);\r\n        this._direction = { x:1, y:1 };\r\n\r\n        this._isIgnoringCollision = false;\r\n        this._ignoreCollisionTimer = 0;\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public create(container:createjs.Container):Entity {\r\n\r\n        //move to main container\r\n        if(container == null)\r\n            this._game.Stage.addChild(this._sprite);\r\n        else\r\n            container.addChild(this._sprite);\r\n        return this;\r\n    }\r\n\r\n    public destroy():Entity {\r\n        if(this._sprite == null || this._sprite.parent == null) return null;\r\n\r\n        //remove from main container\r\n        this._sprite.parent.removeChild(this._sprite);\r\n\r\n        return this;\r\n    }\r\n\r\n    public update(gameTime:number) {\r\n\r\n         //listen for collision ignore\r\n        if(this._isIgnoringCollision) {\r\n            this._ignoreCollisionTimer++;\r\n\r\n            if(this._ignoreCollisionTimer > Entity.IGNORE_COLLISION)\r\n                this._isIgnoringCollision = false;\r\n        }\r\n    }\r\n\r\n    protected startIgnoreCollision() {\r\n        this._isIgnoringCollision = true\r\n    }\r\n\r\n    protected testStageBounds(artificialReg:{x:number, y:number} = null) {\r\n        let reg = { x:this._sprite.regX, y:this._sprite.regY };\r\n        if(artificialReg != null) {\r\n            reg = {\r\n                x: (this._direction.x > 0) ? this.Bounds.Width * artificialReg.x : (this.Bounds.Width * (1 - artificialReg.x)),\r\n                y: (this._direction.y > 0) ? this.Bounds.Height * artificialReg.y : (this.Bounds.Height * (1 - artificialReg.y))\r\n            }\r\n        }\r\n        // const bounds = { width:this._game.StageWidth, height: this._game.StageHeight };\r\n        const bounds = { width:this._game.StageWidth, height: this._game.StageHeight };\r\n        const extents = {   \r\n            x:(this._direction.x > 0) ? (this.Bounds.Width - reg.x) : -reg.x, \r\n            y:(this._direction.y > 0) ? (this.Bounds.Height - reg.y) : -reg.y \r\n        };\r\n\r\n        //test walls\r\n        if((this.X + extents.x) > bounds.width) return Entity.HIT.Right;\r\n        else if(this.X + extents.x < 0) return Entity.HIT.Left;\r\n    }\r\n\r\n    public forceDirectionX(value) {\r\n        this._direction.x = value;\r\n        this._sprite.scaleX = value;\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get IGNORE_COLLISION() { return 20; }\r\n    public static get HIT() { return Object.freeze({Top:0, Right:1, Bottom:2, Left:3}); }\r\n\r\n    protected get Game():Game { return this._game; }\r\n\r\n    public get Sprite() { return this._sprite; }\r\n    public get Parent() { return this._sprite.parent; }\r\n\r\n    public get X() { return this._sprite.x; }\r\n    public set X(value) { this._sprite.x = value; }\r\n    public get Y() { return this._sprite.y; }\r\n    public set Y(value) { this._sprite.y = value; }\r\n\r\n    public set DirectionX(value) { \r\n        const lastX = this._direction.x;\r\n        this._direction.x = value; \r\n        //flip sprite if our direction has changed\r\n        if(this._direction.x != lastX) this._sprite.scaleX *= -1;\r\n    }\r\n    public get DirectionX() { return this._direction.x; }\r\n\r\n    public get Bounds() { \r\n        let bounds = this._sprite.getBounds();\r\n        return  { Width:bounds.width, Height:bounds.height };\r\n    }\r\n\r\n    public get IsIgnoringCollision() { return this._isIgnoringCollision; }\r\n}","import { Game } from \"../Game\";\r\nimport { Entity } from \"./Entity\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\nimport { IEnableable } from \"../Interfaces\";\r\n\r\nexport class Fish extends Entity implements IEnableable {\r\n    private _speed:number;\r\n    private _naturalY:number;\r\n\r\n    private _isCaught:boolean;\r\n    private _isReturning:boolean;\r\n\r\n    constructor(game:Game, spritesheet?:createjs.SpriteSheet) {\r\n        super(game, spritesheet || LoadManager.Spritesheets.Peeper_Spritesheet);\r\n        this._speed = 1;\r\n\r\n        this._isCaught = false;\r\n        this._isReturning = false;\r\n\r\n        this._sprite.gotoAndPlay(Fish.ANIMATION.Slow);\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    \r\n\r\n\r\n    /***************/\r\n    /*   ACTIONS   */\r\n    /***************/\r\n    public setNaturalY() {\r\n        this._naturalY = this.Y;\r\n    }\r\n\r\n    public catch() {\r\n        if(this._isCaught) return;\r\n        \r\n        this._isCaught = true;\r\n\r\n        this._sprite.gotoAndPlay(Fish.ANIMATION.Panic);\r\n    }\r\n\r\n    public release() {\r\n        this._isCaught = false;\r\n        //return to natural y position\r\n        this._isReturning = true;\r\n    }\r\n\r\n\r\n    /**Test to see if global position hits sprite. */\r\n    public testHit(x:number, y:number):boolean {\r\n        return this._sprite.hitTest(x, y);\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    destroy() {\r\n        //reset flags\r\n        this._isCaught = false;\r\n        //reset animations\r\n        this._sprite.gotoAndPlay(Fish.ANIMATION.Slow);\r\n\r\n        this.disable();\r\n        return super.destroy();\r\n    }\r\n\r\n    update(gameTime:number) {\r\n        super.update(gameTime);\r\n\r\n        //move the fishy\r\n        if(!this._isCaught)\r\n            // this.X += this._speed * gameTime * this._direction.x;\r\n            this.X += this._speed * this._direction.x;\r\n        //--if returning, swim to natural y\r\n        if(this._isReturning) {\r\n            //if we are still far away, swim!\r\n            if(Math.abs(this.Y - this._naturalY) > 30) {\r\n                const isNeg = this.Y > this._naturalY;\r\n                this.Y += (isNeg) ? -10 : 10;\r\n            }\r\n            else {\r\n                this._isReturning = false;\r\n                this._sprite.gotoAndPlay(Fish.ANIMATION.Slow);\r\n            }\r\n        }\r\n\r\n        //test collision\r\n        if(!this.IsIgnoringCollision) {\r\n\r\n            //if fish hits the edge, flip direction\r\n            const hit = this.testStageBounds({x:0.5, y:0.5});\r\n            switch(hit) {\r\n                case Entity.HIT.Right:\r\n                    this.DirectionX *= -1;\r\n                    this.startIgnoreCollision();\r\n                    this.X -= 5 - this.Bounds.Width;\r\n                    break;\r\n                case Entity.HIT.Left:\r\n                    this.DirectionX *= -1;\r\n                    this.startIgnoreCollision();\r\n                    this.X += 5 - this.Bounds.Width;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    enable() {\r\n\r\n    }\r\n\r\n    disable() {\r\n\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get ANIMATION() {\r\n        return Object.freeze({\r\n            \"Slow\" : \"fishIdle\",\r\n            \"Fast\" : \"fishIdle\",\r\n            \"Panic\" : \"fishPanic\"\r\n        });\r\n    }\r\n    public get Speed() { return this._speed; }\r\n    public set Speed(value:number) { this._speed = value; }\r\n}","import { Game } from \"../Game\";\r\nimport { Entity } from \"./Entity\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\nimport { IEnableable } from \"../Interfaces\";\r\nimport { Logging } from \"../Functions\";\r\nimport { Cat } from \"./Cat\";\r\n\r\nexport class Puffer extends Entity implements IEnableable {\r\n    public get Type() { return \"Puffer\"; }\r\n\r\n    private _speed:number;\r\n    private _cooldown:number = 40;\r\n    private _currentCooldown:number = 0;\r\n\r\n    private _isCaught:boolean;\r\n\r\n    constructor(game:Game) {\r\n        super(game, LoadManager.Spritesheets.Puffer_Spritesheet);\r\n        this._speed = 1;\r\n\r\n        this._isCaught = false;\r\n\r\n        this._sprite.gotoAndPlay(Puffer.ANIMATION.Idle);\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    \r\n\r\n\r\n    /***************/\r\n    /*   ACTIONS   */\r\n    /***************/\r\n    public puff() {\r\n        this._sprite.gotoAndPlay(Puffer.ANIMATION.Angry);\r\n        //start cooldown\r\n        this._currentCooldown = this._cooldown;\r\n    }\r\n\r\n\r\n    /**Test to see if global position hits sprite. */\r\n    public testHit(x:number, y:number, cat:Cat):boolean {\r\n        return (x >= this.X - cat.Bounds.Width && x <= this.X + this.Bounds.Width \r\n            && y >= this.Y - cat.Bounds.Height && y <= this.Y + this.Bounds.Height) ;\r\n        // return this._sprite.hitTest(x, y);\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    destroy() {\r\n        //reset flags\r\n        this._isCaught = false;\r\n        //reset animations\r\n        this._sprite.gotoAndPlay(Puffer.ANIMATION.Idle);\r\n\r\n        this.disable();\r\n        return super.destroy();\r\n    }\r\n\r\n    update(gameTime:number) {\r\n        super.update(gameTime);\r\n\r\n        //move the fishy\r\n        if(!this._isCaught)\r\n            this.X += this._speed * gameTime * this._direction.x;\r\n\r\n        //do cooldown\r\n        if(this._currentCooldown >= 0) {\r\n            this._currentCooldown--;\r\n            if(this._currentCooldown == 0) {\r\n                //reset animations\r\n                this._sprite.gotoAndPlay(Puffer.ANIMATION.Recover);\r\n            }\r\n        }\r\n\r\n        //test collision\r\n        if(!this.IsIgnoringCollision) {\r\n\r\n            //if fish hits the edge, flip direction\r\n            const hit = this.testStageBounds({x:0.5, y:0.5});\r\n            switch(hit) {\r\n                case Entity.HIT.Right:\r\n                    this._direction.x *= -1;\r\n                    this._sprite.scaleX *= -1;\r\n                    this.startIgnoreCollision();\r\n                    this.X -= 5 - this.Bounds.Width;\r\n                    break;\r\n                case Entity.HIT.Left:\r\n                    this._direction.x *= -1;\r\n                    this._sprite.scaleX *= -1;\r\n                    this.startIgnoreCollision();\r\n                    this.X += 5 - this.Bounds.Width;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    enable() {\r\n\r\n    }\r\n\r\n    disable() {\r\n\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get ANIMATION() {\r\n        return Object.freeze({\r\n            \"Idle\" : \"pufferIdle\",\r\n            \"Angry\" : \"pufferAngry\",\r\n            \"Recover\" : \"pufferRecover\"\r\n        });\r\n    }\r\n    public get Speed() { return this._speed; }\r\n    public set Speed(value:number) { this._speed = value; }\r\n}","import { LoadManager } from \"../../managers/LoadManager\";\r\nimport { Special } from \"./Special\";\r\nimport { Game } from \"../../Game\";\r\n\r\nexport class Owen extends Special {\r\n\r\n    constructor(game:Game) {\r\n        super(game, LoadManager.Spritesheets.Specials_Spritesheet);\r\n        this._sprite.gotoAndPlay(Owen.SPEC_ANIMATION.Idle);\r\n    }\r\n\r\n\r\n    public static get SPEC_ANIMATION() {\r\n        return Object.freeze({\r\n            \"Idle\" : \"owenIdle\"\r\n        });\r\n    }\r\n\r\n}","import { LoadManager } from \"../../managers/LoadManager\";\r\nimport { Special } from \"./Special\";\r\nimport { Game } from \"../../Game\";\r\n\r\nexport class Persephone extends Special {\r\n\r\n    constructor(game:Game) {\r\n        super(game, LoadManager.Spritesheets.Specials_Spritesheet);\r\n        this._sprite.gotoAndPlay(Persephone.SPEC_ANIMATION.Idle);\r\n    }\r\n\r\n\r\n    public static get SPEC_ANIMATION() {\r\n        return Object.freeze({\r\n            \"Idle\" : \"persIdle\"\r\n        });\r\n    }\r\n\r\n}","import { LoadManager } from \"../../managers/LoadManager\";\r\nimport { Special } from \"./Special\";\r\nimport { Game } from \"../../Game\";\r\n\r\nexport class Riley extends Special {\r\n\r\n    constructor(game:Game) {\r\n        super(game, LoadManager.Spritesheets.Specials_Spritesheet);\r\n        this._sprite.gotoAndPlay(Riley.SPEC_ANIMATION.Idle);\r\n    }\r\n\r\n\r\n    public static get SPEC_ANIMATION() {\r\n        return Object.freeze({\r\n            \"Idle\" : \"rileyIdle\"\r\n        });\r\n    }\r\n\r\n}","import { Fish } from \"../Fish\";\r\nimport { Game } from \"../../Game\";\r\n\r\nexport abstract class Special extends Fish {\r\n    private _isOnMainPage:boolean;\r\n    private _desiredX:number;\r\n    private _desiredY:number;\r\n    private _attnSpanDuration:number; //how long before fish wants to do something else\r\n\r\n    constructor(game:Game, spritesheet:createjs.SpriteSheet) {\r\n        super(game, spritesheet);\r\n        this._isOnMainPage = false;\r\n\r\n        this._resetAttentionSpan();\r\n    }\r\n\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public setMainPage(isOnMainPage) {\r\n        this._isOnMainPage = isOnMainPage;\r\n        //randomly place on the page\r\n        this._resetAttentionSpan();\r\n\r\n        //set reg to center\r\n        this.Sprite.regX = this.Sprite.getBounds().width / 2;\r\n    }\r\n\r\n    private _resetAttentionSpan() {\r\n        this._attnSpanDuration = Math.random() * 100 + 100;\r\n        this._desiredX = Math.floor(Math.random() * this.Game.StageWidth);\r\n        this._desiredY = Math.floor(Math.random() * this.Game.StageHeight);\r\n        // this._desiredX = Math.floor(Math.random() * (window.innerWidth - this.Sprite.getBounds().width));\r\n        // this._desiredY = Math.floor(Math.random() * (window.innerHeight - this.Sprite.getBounds().height));\r\n\r\n        //do a flip?\r\n        if(this.DirectionX > 0 && this._desiredX < this.X)  this.DirectionX *= -1;\r\n        if(this.DirectionX < 0 && this._desiredX > this.X)  this.DirectionX *= -1;\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /**Extend update for main menu logic. */\r\n    public update(gameTime:number) {\r\n\r\n        //listen for main page logic\r\n        if(this._isOnMainPage) {\r\n            //move to random y pos every once in a while\r\n            if(this._attnSpanDuration <= 0) this._resetAttentionSpan();\r\n            else this._attnSpanDuration--;\r\n\r\n            //float toward X\r\n            if(Math.abs(this.X - this._desiredX) > 60) {\r\n                const isNeg = this.X > this._desiredX;\r\n                this.X += (isNeg) ? -this.Speed : this.Speed;\r\n            }\r\n            //float toward y\r\n            if(Math.abs(this.Y - this._desiredY) > 30) {\r\n                const isNeg = this.Y > this._desiredY;\r\n                this.Y += (isNeg) ? -this.Speed : this.Speed;\r\n            }\r\n        }\r\n        else super.update(gameTime);\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n\r\n\r\n\r\n\r\n}","import { Game } from \"./Game\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    const game = new Game(document.getElementById(\"game-canvas\") as HTMLCanvasElement);\r\n});","import { Screen } from \"../screens/Screen\";\r\n\r\nexport interface WorldsData {\r\n    worlds:LevelData[];\r\n}\r\n\r\nexport interface LevelData {\r\n    name:string;\r\n    tutorials?:string[];\r\n    background?:string;\r\n    music?:string;\r\n    data:any[];\r\n    duration?:number;\r\n    showScore?:boolean;\r\n    showRemainingFish?:boolean;\r\n    special?:boolean;\r\n    unlocks?:string; // name of unlock fish\r\n}\r\n\r\nexport class DataManager {\r\n    private static _worldsData:WorldsData;\r\n\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /**Loads in the worlds data! */\r\n    public static loadWorldsData(fileLocation:string) {\r\n        return new Promise<WorldsData>(async(res, rej) => {\r\n            await fetch(fileLocation)\r\n                .then(blob => blob.json())\r\n                .then(json => {\r\n                    this._worldsData = json;\r\n                    res(this._worldsData);\r\n                })\r\n                .catch(err => {\r\n                    rej(\"Could not load world data! \" + err);\r\n                });\r\n        });\r\n    }\r\n\r\n    /**Returns the level data received by the given index. */\r\n    public static getLevelDataByIndex(index:number) {\r\n        //flatten level data, and get data\r\n        let flatten = [].concat.apply([], DataManager._worldsData.worlds);\r\n        if(index < flatten.length)\r\n            return flatten[index];\r\n        return null;\r\n    }\r\n\r\n    /**Inverse of getLevelDataByIndex.\r\n     * @see getLevelDataByIndex . */\r\n    public static getLevelIndexByData(levelData:LevelData) {\r\n        //flatten level data, and get data\r\n        let flatten = [].concat.apply([], DataManager._worldsData.worlds);\r\n        return flatten.indexOf(levelData);\r\n    }\r\n\r\n    /**Gets the next level data or returns null if there is no next level. */\r\n    public static getNextLevel(currentLevel:number | LevelData) {\r\n        let index = currentLevel as number;\r\n        if(currentLevel as LevelData != null) index = this.getLevelIndexByData(currentLevel as LevelData);\r\n\r\n        //get the next index\r\n        return this.getLevelDataByIndex(index + 1);\r\n    }\r\n\r\n    /**Gets the world and level index of the given level. */\r\n    public static getIndexData(levelData:LevelData) {\r\n        //test each world and look for us\r\n        for(let i = 0; i < DataManager._worldsData.worlds.length; i++) {\r\n            const world = DataManager._worldsData.worlds[i];\r\n            for(let n = 0; n < (world as any).length; n++) {\r\n                if(world[n] == levelData) return { world:i, level:n };\r\n            }            \r\n        }\r\n\r\n        return { world:-1, level:-1 };\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get WorldsData():WorldsData { return DataManager._worldsData; }\r\n    public static get FlatWorldData() { return [].concat.apply([], DataManager._worldsData.worlds); }\r\n}","export class LoadManager {\r\n    public static get ASSETS_LOADED():string { return \"onAssetsLoaded\"; }\r\n    public static get ASSETS_FAILED():string { return \"onAssetsFailed\"; }\r\n    public static get ASSETS_UPDATED():string { return \"onAssetsUpdated\"; }\r\n\r\n    public static Spritesheets:{ [key:string]:createjs.SpriteSheet } = {};\r\n    public static Images:{ [key:string]:createjs.Bitmap } = {};\r\n    public static Sounds:{ [key:string]:string } = {};\r\n\r\n    private static _stage:createjs.StageGL;\r\n    private static _preloadManager:createjs.LoadQueue;\r\n    private static _sheetsTotal:number = 0;\r\n    private static _sheetsLoaded:number = 0;\r\n\r\n    private static _percentage:number = 0;\r\n    private static _totalAssetsLoaded:number = 0;\r\n    private static _totalAssets:number = 0;\r\n\r\n    private static AssetsLoadedEvent:any = new (createjs as any).Event(LoadManager.ASSETS_LOADED, false, true);\r\n    private static AssetsFailedEvent:any = new (createjs as any).Event(LoadManager.ASSETS_FAILED, false, true);\r\n    private static AssetsUpdatedEvent:any = new (createjs as any).Event(LoadManager.ASSETS_UPDATED, false, true);\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public static reset() {\r\n        LoadManager._sheetsTotal = 0;\r\n        LoadManager._sheetsLoaded = 0;\r\n\r\n        LoadManager._percentage = 0;\r\n        LoadManager._totalAssetsLoaded = 0;\r\n        LoadManager._totalAssets = 0;\r\n    }\r\n\r\n    public static loadAssets(src:string, stage:createjs.StageGL) {\r\n        LoadManager.reset();\r\n        LoadManager._stage = stage;\r\n\r\n        return new Promise(async(res, rej) => {\r\n            LoadManager._preloadManager = new createjs.LoadQueue();\r\n\r\n            //setup sound controllers\r\n            createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\r\n            createjs.Sound.alternateExtensions = [\"mp3\",\"wav\"];\r\n            LoadManager._preloadManager.installPlugin(createjs.Sound);\r\n\r\n            //setup listeners\r\n            (LoadManager._preloadManager as any).on(\"fileload\", LoadManager._onLoaded, LoadManager);\r\n            (LoadManager._preloadManager as any).on(\"complete\", LoadManager._onComplete, LoadManager);\r\n            (LoadManager._preloadManager as any).on(\"error\", LoadManager._onError, LoadManager);\r\n\r\n            //get the manifest\r\n            fetch(src)\r\n                .then(blob => blob.json())\r\n                .then(data => {\r\n                    //load the manifest\r\n                    LoadManager._preloadManager.setMaxConnections(1);\r\n                    LoadManager._preloadManager.loadManifest(data);\r\n\r\n                    (LoadManager._stage as any).addEventListener(LoadManager.ASSETS_LOADED, () => {\r\n                        res();\r\n                    });\r\n                })\r\n                .catch(() => {\r\n                    LoadManager.emitErrorEvent();\r\n                    rej(\"Could not load assets!\");\r\n                });\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n    public static emitLoadedEvent() {\r\n        if(LoadManager._stage != null) (LoadManager._stage as any).dispatchEvent(LoadManager.AssetsLoadedEvent);\r\n    }\r\n    public static emitErrorEvent() {\r\n        if(LoadManager._stage != null) (LoadManager._stage as any).dispatchEvent(LoadManager.AssetsFailedEvent);\r\n    }\r\n    public static emitUpdatedEvent() {\r\n        LoadManager._percentage = parseFloat((LoadManager._preloadManager.getItems(true).length / LoadManager._preloadManager.getItems(false).length).toFixed(2));\r\n        if(LoadManager._stage != null) (LoadManager._stage as any).dispatchEvent(LoadManager.AssetsUpdatedEvent);\r\n    }\r\n\r\n\r\n    private static _loadedSheet(name:string, sheet:createjs.SpriteSheet) {\r\n        LoadManager.Spritesheets[name] = sheet;\r\n\r\n        LoadManager._sheetsLoaded++;\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    private static _onLoaded(e) {\r\n\r\n        switch(e.item.type) {\r\n            case (createjs as any).Types.JAVASCRIPT: {\r\n                //load the spritesheet\r\n                LoadManager._sheetsTotal++;\r\n                \r\n                const sheet = (window[e.item.id] as any)._SpriteSheet;\r\n\r\n                // listen for spritesheet to load\r\n                if(!sheet.complete) {\r\n                    sheet.on(\"complete\", (ev:any) => {\r\n                        LoadManager._loadedSheet(e.item.id, sheet);\r\n                        ev.remove();\r\n                    })\r\n                }\r\n                else LoadManager._loadedSheet(e.item.id, sheet);\r\n                break\r\n            }\r\n            case (createjs as any).Types.IMAGE: {\r\n                //build the bitmap\r\n                LoadManager.Images[e.item.id] = new createjs.Bitmap(e.item.src);\r\n            }\r\n            case (createjs as any).Types.SOUND: {\r\n                //build the sound\r\n                LoadManager.Sounds[e.item.id] = e.item.src;\r\n            }\r\n        }\r\n\r\n\r\n\r\n        //update event\r\n        LoadManager.emitUpdatedEvent();\r\n    }\r\n\r\n    private static _onComplete(e) {\r\n        //remove all preLoadManager events\r\n        (LoadManager._preloadManager as any).removeAllEventListeners();\r\n        \r\n        //make sure all spritesheets are loaded\r\n        if(LoadManager._sheetsLoaded < LoadManager._sheetsTotal) {\r\n            const loadInterval = setInterval((ev:any) => {\r\n                //see if they are loaded\r\n                if(LoadManager._sheetsLoaded >= LoadManager._sheetsTotal) {\r\n                    e.remove();\r\n                    // window.clearInterval(loadInterval);\r\n                    LoadManager.emitLoadedEvent();\r\n                }\r\n            }, 100)\r\n        }\r\n        else LoadManager.emitLoadedEvent();\r\n    }\r\n\r\n    private static _onError(e) {\r\n        LoadManager.emitErrorEvent();\r\n    }\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get Percentage():number { return LoadManager._percentage; }\r\n    \r\n\r\n\r\n\r\n}","import { WorldsData, LevelData } from \"./DataManager\";\r\nimport { Logging } from \"../Functions\";\r\n\r\nexport interface IProgressLevel {\r\n    unlocked: boolean;\r\n    completed: boolean;\r\n}\r\n\r\nexport interface IProgressSpecial {\r\n    collected: boolean;\r\n    unlocks: string;\r\n}\r\n\r\n/**Handles progress made while playing the game. */\r\nexport class ProgressManager {\r\n\r\n    private static _worldsData:WorldsData;\r\n    private static _levelsProgress:IProgressLevel[];\r\n    private static _specialsProgress:IProgressSpecial[];\r\n    \r\n    /*--------------- METHODS ------------------------*/\r\n    /**Loads in the worlds data so it can parse the progress data. */\r\n    public static loadWorldsData(worldsData:WorldsData) {\r\n        ProgressManager._worldsData = worldsData;\r\n        //does resetting just use it\r\n        ProgressManager.killAll();\r\n\r\n        //read cookie data\r\n        ProgressManager._readCookieData();\r\n    }\r\n\r\n    /**Mark level as complete. Also saves data. */\r\n    public static completeLevel(worldIndex:number, levelIndex:number) {\r\n        //set to complete!\r\n        const level = ProgressManager._levelsProgress[worldIndex][levelIndex];\r\n        if(level == null) return;\r\n        level.completed = true;\r\n\r\n        //if there is a next level, unlock it\r\n        //test for next in this world\r\n        const nextLevel = ProgressManager._levelsProgress[worldIndex][levelIndex+1];\r\n        if(nextLevel != null) {\r\n            nextLevel.unlocked = true;\r\n        }\r\n        else {\r\n            if(worldIndex+1 < ProgressManager._levelsProgress.length) {\r\n                const nextWorld = ProgressManager._levelsProgress[worldIndex+1][0];\r\n                if(nextWorld != null) nextWorld.unlocked = true;\r\n            }\r\n        }\r\n\r\n        //save cookie data\r\n        ProgressManager.saveCookieData();\r\n    }\r\n\r\n    /**Well look at you, you dirty little cheater. :) */\r\n    public static unlockAll() {\r\n\r\n        Logging.message(\"You're a dirty little cheater!\");\r\n\r\n        ProgressManager._levelsProgress = ProgressManager._worldsData.worlds.map(world => {\r\n            return [].concat.apply([], world as any)\r\n                .map(level => {\r\n                    return { unlocked: true, completed: false };\r\n                });\r\n        });\r\n        ProgressManager._specialsProgress = ProgressManager._worldsData.worlds.map(world => {\r\n            return [].concat.apply([], world as any)\r\n                .map(level => {\r\n                    if(level.special) return { collected: true, unlocks:level.unlocks };\r\n                    return null;\r\n                });\r\n        });\r\n\r\n    }\r\n\r\n    public static killAll() {\r\n        Logging.message(\"You've reset all the data!\");\r\n\r\n\r\n        ProgressManager._levelsProgress = ProgressManager._worldsData.worlds.map(world => {\r\n            return [].concat.apply([], world as any)\r\n                .map(level => {\r\n                    return { unlocked: false, completed: false };\r\n                });\r\n        });\r\n        ProgressManager._specialsProgress = ProgressManager._worldsData.worlds.map(world => {\r\n            return [].concat.apply([], world as any)\r\n                .map(level => {\r\n                    if(level.special) return { collected: false, unlocks:level.unlocks };\r\n                    return null;\r\n                });\r\n        });\r\n\r\n        //unlock level 1\r\n        ProgressManager._levelsProgress[0][0].unlocked = true;\r\n\r\n    }\r\n\r\n    /**Mark special as collected.  Also saves data. */\r\n    public static collectSpecial(worldIndex:number, levelIndex:number) {\r\n        //set to collected!\r\n        const level = ProgressManager._specialsProgress[worldIndex][levelIndex];\r\n        if(level == null) return;\r\n        level.collected = true;\r\n\r\n        //save cookie data\r\n        ProgressManager.saveCookieData();\r\n    }\r\n\r\n    /**Saves the progress data to a cookie or two. */\r\n    public static saveCookieData() {\r\n\r\n        document.cookie = `progData=${JSON.stringify(ProgressManager.ProgressData)};path=/`;\r\n    }\r\n\r\n    /**Kills the saved progress data. */\r\n    public static deleteCookieData() {\r\n        document.cookie = 'progData=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n    }\r\n\r\n    /**Reads cookie data and fills in progress data. */\r\n    private static _readCookieData() {\r\n        //look for cookie\r\n        const cookie = ProgressManager._getCookie(\"progData\");\r\n        if(cookie != null && cookie != '') {\r\n            //read the cookie\r\n            const data = JSON.parse(cookie);\r\n            ProgressManager._levelsProgress = data.levels;\r\n            ProgressManager._specialsProgress = data.specials;\r\n        }\r\n    }\r\n\r\n\r\n    /*https://www.w3schools.com/js/js_cookies.asp*/\r\n    private static _getCookie(cname) {\r\n        var name = cname + \"=\";\r\n        var decodedCookie = decodeURIComponent(document.cookie);\r\n        var ca = decodedCookie.split(';');\r\n        for(var i = 0; i <ca.length; i++) {\r\n            var c = ca[i];\r\n            while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n            }\r\n            if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n            }\r\n        }\r\n        return \"\";\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get ProgressData() {\r\n        return {\r\n            levels : ProgressManager._levelsProgress,\r\n            specials : ProgressManager._specialsProgress\r\n        };\r\n    }\r\n}","import { Screen } from \"../screens/Screen\";\r\n\r\nexport class ScreenManager {\r\n    private static _screensLookup:{ [key:string]:Screen } = { };\r\n    private static _currentScreen:Screen = null;\r\n\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /**Registers a screen into the Screen Manager.  Uses a key to associate it. */\r\n    public static registerScreen(key:string, screen:Screen):void {\r\n        //if we don't have this screen, add it\r\n        if(ScreenManager._screensLookup[key] == null)\r\n            ScreenManager._screensLookup[key] = screen;\r\n    }\r\n\r\n    /**Unregisters a screen from the Screen Manager. */\r\n    public static unregisterScreen(key:string):boolean {\r\n        if(ScreenManager._screensLookup[key] == null) return false;\r\n\r\n        ScreenManager._screensLookup[key] = null;\r\n        delete ScreenManager._screensLookup[key];\r\n        return true;\r\n    }\r\n\r\n    /**Sets the current screen.  Can be done with the screen itself or an associative key. */\r\n    public static setCurrentScreen(screen:string | Screen, stage:createjs.StageGL):Promise<void> {\r\n        let tempScreen = null;\r\n        if(screen instanceof Screen) tempScreen = screen;\r\n        else tempScreen = ScreenManager._screensLookup[screen];\r\n\r\n        //if we did not find a screen, do not follow through\r\n        if(tempScreen == null) return Promise.resolve();\r\n\r\n        let promises = [];\r\n        //if we have a previous screen, wait for it to fade out\r\n        if(ScreenManager._currentScreen != null)\r\n        promises.push(\r\n            new Promise(async(res) => {\r\n                //fade out\r\n                createjs.Tween\r\n                    .get(ScreenManager._currentScreen.Container)\r\n                    .to({ alpha:0 }, 500, createjs.Ease.linear)\r\n                    .call(() => {\r\n                        ScreenManager._currentScreen.destroy();\r\n                        ScreenManager._currentScreen.disable();\r\n                        res();\r\n                    });\r\n            })\r\n        );\r\n\r\n\r\n        //wait for certain actions to finish\r\n        return new Promise(async(res) => {\r\n            //wait for promises to finish\r\n            await Promise.all(promises);\r\n\r\n            //now add in the new one\r\n            ScreenManager._currentScreen = tempScreen;\r\n            ScreenManager._currentScreen.create(stage);\r\n            ScreenManager._currentScreen.Container.alpha = 0;\r\n            ScreenManager._currentScreen.disable(); //disable until ready\r\n            //fade in\r\n            createjs.Tween\r\n                .get(ScreenManager._currentScreen.Container)\r\n                .to({ alpha:1 }, 1200, createjs.Ease.linear)\r\n                .call(() => {\r\n                    ScreenManager._currentScreen.enable();\r\n                    res();\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    public static getScreenByKey(key:string):Screen {\r\n        return ScreenManager._screensLookup[key];\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get AllScreens() { return ScreenManager._screensLookup; }\r\n    public static get CurrentScreen() { return ScreenManager._currentScreen; }\r\n}","export class SoundManager {\r\n    private static _ambience:{ [key:string]:createjs.AbstractSoundInstance } = {};\r\n    private static _sfx:createjs.AbstractSoundInstance[] = [];\r\n    private static _isPlayingSound:boolean = true;\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /**Plays an ambience track. */\r\n    public static playAmbience(key:string, src:string, loop:boolean=true) {\r\n        if(!SoundManager._isPlayingSound) return null;\r\n        //make sure this key is not in use\r\n        if(SoundManager._ambience[key] != null) {\r\n            SoundManager._ambience[key].stop();\r\n            console.warn(\"This ambience key is already in use! Overwriting!\");\r\n        }\r\n\r\n        //add the ambience as a sound js object\r\n        const sound = createjs.Sound.play(src, { loop:(loop) ? -1 : 1} );\r\n        SoundManager._ambience[key] = sound;\r\n        sound.position = 0;\r\n        return sound;\r\n    }\r\n    /**Plays an ambience track with fade in. */\r\n    public static playAmbienceWithFadeIn(key:string, src:string, loop:boolean=true, prefVolume:number=1, duration:number=100, ) {\r\n        if(!SoundManager._isPlayingSound) return;\r\n        const sound = SoundManager.playAmbience(key, src, loop);\r\n\r\n        //start fade in \r\n        if(sound != null) {\r\n            SoundManager.fadeInAmbience(key, prefVolume, duration);\r\n        }\r\n\r\n    }\r\n    /**Removes an ambience track. */\r\n    public static removeAmbience(key:string) {\r\n        //look for ambience\r\n        let sound = SoundManager._ambience[key];\r\n        if(sound == null) {\r\n            console.warn(\"Could not find ambience with key of \" + key);\r\n            return;\r\n        }\r\n\r\n        sound.stop();\r\n        sound = null;\r\n        //splice it out\r\n        SoundManager._ambience[key] = null;\r\n    }\r\n\r\n    /**Plays a sound effect. */\r\n    public static playSFX(src:string, volume:number=1) {\r\n        if(!SoundManager._isPlayingSound) return;\r\n        const sound = createjs.Sound.play(src);\r\n        sound.volume = volume;\r\n        SoundManager._sfx.push(sound);\r\n\r\n        //listen for the sound to finish -- remove from array\r\n        sound.on(\"complete\", () => {\r\n            SoundManager._sfx.splice(SoundManager._sfx.indexOf(sound), 1);\r\n        });\r\n    }\r\n\r\n    /**Stops all queued sounds. */\r\n    public static stopAllSound() {\r\n        SoundManager._isPlayingSound = false;\r\n        //ambience\r\n        Object.keys(SoundManager._ambience).forEach(key => {\r\n            SoundManager._ambience[key].stop();\r\n        });\r\n\r\n        //sfx\r\n        SoundManager._sfx.forEach(sound => sound.stop());\r\n    }\r\n\r\n    /**Plays any queued sounds. */\r\n    public static playAllSound() {\r\n        SoundManager._isPlayingSound = true;\r\n         //ambience\r\n        Object.keys(SoundManager._ambience).forEach(key => {\r\n            const sound = SoundManager._ambience[key];\r\n            if(sound != null)\r\n                sound.play();\r\n        });\r\n\r\n        //sfx\r\n        SoundManager._sfx.forEach(sound => {\r\n            if(sound != null)\r\n                sound.play()\r\n        });\r\n    }\r\n\r\n\r\n    /**Fades in an ambience track. */\r\n    public static fadeInAmbience(key:string, prefVolume:number=1, duration:number=100) {\r\n        //find the ambience to fade\r\n        let sound = SoundManager._ambience[key];\r\n        if(sound == null) return;\r\n\r\n        //fade volume from 0\r\n        sound.volume = 0;\r\n        sound.play();\r\n        const step = prefVolume / duration;\r\n\r\n        const fadeEvent = () => {\r\n            //clear the interval if done\r\n            if(sound.volume >= prefVolume) {\r\n                window.clearInterval(fadeInterval);\r\n                return;\r\n            }\r\n\r\n            sound.volume += step;\r\n        };\r\n        const fadeInterval = window.setInterval(fadeEvent, 10);\r\n        \r\n    }\r\n    /**Fades out an ambience track. */\r\n    public static fadeOutAmbience(key:string, duration:number=100, killOnFinish:boolean=true) {\r\n        //find the ambience to fade\r\n        let sound = SoundManager._ambience[key];\r\n        if(sound == null) return;\r\n        const prefVolume = sound.volume;\r\n\r\n        //fade volume to 0\r\n        const step = prefVolume / duration;\r\n\r\n        const fadeEvent = () => {\r\n            //clear the interval if done\r\n            if(sound.volume <= 0) {\r\n                window.clearInterval(fadeInterval);\r\n                //turn off sound\r\n                sound.stop();\r\n                //set volume back to preferred\r\n                sound.volume = prefVolume;\r\n                if(killOnFinish) sound = null;\r\n                return;\r\n            }\r\n\r\n            sound.volume -= step;\r\n        };\r\n        const fadeInterval = window.setInterval(fadeEvent, 10);\r\n        \r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get IsSoundPlaying() { return SoundManager._isPlayingSound; }\r\n}","import { Screen } from \"./Screen\";\r\nimport { ScreenManager } from \"../managers/ScreenManager\";\r\nimport { Container } from \"../ui/display/Container\";\r\nimport { Sprites } from \"../ui/Sprites\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\nimport { Game } from \"../Game\";\r\nimport { DataManager } from \"../managers/DataManager\";\r\nimport { IntermediaryScreen } from \"./IntermediaryScreen\";\r\nimport { Logging } from \"../Functions\";\r\nimport { SoundManager } from \"../managers/SoundManager\";\r\n\r\nexport class EndScreen extends Screen {\r\n    private _game:Game;\r\n    private _buttonsContainer:Container;\r\n\r\n    private _completeSpr:createjs.DisplayObject;\r\n    private _failSpr:createjs.DisplayObject;\r\n\r\n    //flags\r\n    private _isFail:boolean;\r\n    \r\n    constructor(game:Game) {\r\n        super();\r\n\r\n        this._game = game;\r\n        this._isFail = false;\r\n\r\n        //layout stuff\r\n        const bg = new createjs.Sprite(LoadManager.Spritesheets.Catfish_End, \"bg\");\r\n        this._container.addChild(bg);\r\n\r\n        this._buttonsContainer = new Container(Container.LAYOUT_OPTIONS.ColumnLeftBottom);\r\n        this._buttonsContainer.addMany({\r\n            btnTryAgain : new createjs.Sprite(LoadManager.Spritesheets.Catfish_End, \"btnTryAgain\"),\r\n            btnNextLevel : new createjs.Sprite(LoadManager.Spritesheets.Catfish_End, \"btnNextLevel\"),\r\n            btnMainMenu : new createjs.Sprite(LoadManager.Spritesheets.Catfish_End, \"btnMainMenu\"),\r\n        });\r\n        this._container.addChild(this._buttonsContainer.Container);\r\n\r\n        //--conditional text\r\n        this._completeSpr = new createjs.Sprite(LoadManager.Spritesheets.Catfish_End, \"complete\");\r\n        this._failSpr = new createjs.Sprite(LoadManager.Spritesheets.Catfish_End, \"failure\");\r\n        this._completeSpr.x = this._game.StageWidth / 2 - (this._completeSpr.getBounds().width / 2);\r\n        this._completeSpr.y = 220;\r\n        this._failSpr.x = this._game.StageWidth / 2 - (this._failSpr.getBounds().width / 2);\r\n        this._failSpr.y = this._game.StageHeight * 0.45;\r\n        this._container.addChild(this._completeSpr);\r\n        this._container.addChild(this._failSpr);\r\n\r\n        \r\n        \r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    create(stage:createjs.StageGL):Screen {\r\n        \r\n        \r\n        //play the sound\r\n        // SoundManager.playSFX(LoadManager.Sounds.Wave, 0.6);\r\n        \r\n\r\n        return super.create(stage);\r\n    }\r\n\r\n\r\n    enable() {\r\n        super.enable();\r\n\r\n        //try again\r\n        (this._buttonsContainer.Sprites[\"btnTryAgain\"] as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            //restart this level\r\n            this._game.changeCurrentLevel(this._game.CurrentLevelData);\r\n            ScreenManager.setCurrentScreen(\"game\", this._game.Stage);\r\n        }, this, true);\r\n        //next level\r\n        (this._buttonsContainer.Sprites[\"btnNextLevel\"] as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            //find the next level\r\n            const nextLevel = DataManager.getNextLevel(this._game.CurrentLevelData);\r\n            //if there is no next level, go back to menu\r\n            if(nextLevel == null) {\r\n                //go to main menu\r\n                ScreenManager.setCurrentScreen(\"menu\", this._game.Stage);\r\n                return;\r\n            }\r\n\r\n            this._game.changeCurrentLevel(nextLevel);\r\n            //go to intermediary screen\r\n            const intermediary = ScreenManager.getScreenByKey(\"intermediary\") as IntermediaryScreen;\r\n            new Promise(async(res) => {\r\n                intermediary.Text = nextLevel.name;\r\n                await ScreenManager.setCurrentScreen(intermediary, this._game.Stage);\r\n                intermediary.queueNextScreen(\"game\", 1000);\r\n\r\n                res();\r\n            });\r\n        }, this, true);\r\n        //main menu\r\n        (this._buttonsContainer.Sprites[\"btnMainMenu\"] as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            //go to main menu\r\n            ScreenManager.setCurrentScreen(\"menu\", this._game.Stage);\r\n        }, this, true);\r\n    }\r\n\r\n    disable() {\r\n        //toggle fail/success\r\n        this._completeSpr.visible = !this._isFail;\r\n        this._failSpr.visible = this._isFail;\r\n\r\n        Object.keys(this._buttonsContainer.Sprites).forEach(key => this._buttonsContainer.Sprites[key].removeAllEventListeners());\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n}","import { TutorialCreator } from \"./TutorialCreator\";\r\nimport { Screen } from \"./Screen\";\r\nimport { ScreenManager } from \"../managers/ScreenManager\";\r\nimport { ObjectPool } from \"../ObjectPool\";\r\nimport { Fish } from \"../entities/Fish\";\r\nimport { Persephone } from \"../entities/specials/Persephone\";\r\nimport { Owen } from \"../entities/specials/Owen\";\r\nimport { Riley } from \"../entities/specials/Riley\";\r\nimport { Puffer } from \"../entities/Puffer\";\r\nimport { Cat } from \"../entities/Cat\";\r\nimport { Game } from \"../Game\";\r\nimport { Container } from \"../ui/display/Container\";\r\nimport { Sprites } from \"../ui/Sprites\";\r\nimport { Logging } from \"../Functions\";\r\nimport { LevelData, DataManager } from \"../managers/DataManager\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\nimport { GameScore } from \"../ui/partials/GameScore\";\r\nimport { ProgressManager } from \"../managers/ProgressManager\";\r\nimport { SoundManager } from \"../managers/SoundManager\";\r\n\r\nexport class GameScreen extends Screen {\r\n    private _game:Game;\r\n\r\n    //create containers\r\n    private _staticContainer:Container;\r\n    private _fishContainer:createjs.Container;\r\n    private _pufferContainer:createjs.Container;\r\n\r\n    private _winContainer:createjs.Container;\r\n    private _winBanner:createjs.Shape;\r\n    private _winText:createjs.BitmapText;\r\n\r\n    private _gameScore:GameScore;\r\n    private _tutorialCreator:TutorialCreator;\r\n\r\n    private _cat:Cat;\r\n    private _fishes:Fish[];\r\n    private _puffers:Puffer[];\r\n\r\n    private _remainingFish:number;\r\n\r\n    private _pauseLogic:Boolean;\r\n    \r\n    constructor(game:Game) {\r\n        super();\r\n        this._game = game;\r\n        this._fishes = [];\r\n        this._puffers = [];\r\n        this._remainingFish = -1;\r\n\r\n        //create object pool\r\n        ObjectPool.createPoolObject(new Cat(this._game, this), POOL.CAT)\r\n        for(let i = 0; i < 120; i++) {\r\n            ObjectPool.createPoolObject(new Fish(this._game), POOL.FISH);\r\n        }\r\n        for(let i = 0; i < 30; i++) {\r\n            ObjectPool.createPoolObject(new Puffer(this._game), POOL.PUFFERFISH)\r\n        }\r\n        ObjectPool.createPoolObject(new Persephone(this._game), POOL.PERSEPHONE);\r\n        ObjectPool.createPoolObject(new Owen(this._game), POOL.OWEN);\r\n        ObjectPool.createPoolObject(new Riley(this._game), POOL.RILEY);\r\n\r\n\r\n        //pool out static kitty\r\n        this._cat = (ObjectPool.checkout(POOL.CAT) as Cat);\r\n        this._cat.X = 290;\r\n        this._cat.Y = 70;\r\n\r\n        //create containers\r\n        this._staticContainer = new Container();\r\n        this._staticContainer.addMany({\r\n            bg : new createjs.Sprite(LoadManager.Spritesheets.BG_Spritesheet, \"bg1\")\r\n        });\r\n\r\n        this._fishContainer = new createjs.Container();\r\n        this._pufferContainer = new createjs.Container();\r\n\r\n        this._winContainer = new createjs.Container();\r\n\r\n        this._gameScore = new GameScore(this._game);\r\n        this._tutorialCreator = new TutorialCreator(this._game, this);\r\n\r\n        this._pauseLogic = false;\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n\r\n    /**Attempts to grab a fish.  Returns any fish that are touching the global position. */\r\n    public tryToGrabFishes(x:number, y:number):Fish[] {\r\n        let fishes = [];\r\n\r\n\r\n        const hitObjects = this._container.getObjectsUnderPoint(x, y, 0);\r\n        for(let i = 0; i < this._fishes.length; i++) {\r\n            const fish = this._fishes[i];\r\n            if(hitObjects.indexOf(fish.Sprite) != -1) {\r\n                fishes.push(fish);\r\n            }\r\n        }\r\n\r\n        return fishes;\r\n\r\n    }\r\n\r\n    /**Tests to see if we hit a puffer. */\r\n    public hasHitAPuffer(x:number, y:number):Boolean {\r\n\r\n        let hasHitPuffer = false;\r\n        const hitObjects = this._container.getObjectsUnderPoint(x, y, 0);\r\n        for(let i = 0; i < this._puffers.length; i++) {\r\n            if(hitObjects.indexOf(this._puffers[i].Sprite) != -1) {\r\n                this._puffers[i].puff();\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public collectFish(fish:Fish) {\r\n\r\n        const killedFish = fish.destroy();\r\n\r\n        //decrement fish counter -- make sure we didn't make an error\r\n        if(killedFish != null) {\r\n            this._remainingFish--;\r\n            this._fishes.splice(this._fishes.indexOf(killedFish as Fish), 1);\r\n\r\n            //if all our fish are gone, end the game!\r\n            if(this._remainingFish <= 0) {\r\n                //call win\r\n                this.win();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public win() {\r\n        //disable controls\r\n        this.disable();\r\n        //set the score\r\n        this._game.changeCurrentScore({\r\n            totalFish: this._fishes.length,\r\n            combos: 10,\r\n            time: 100\r\n        });\r\n\r\n        SoundManager.playSFX(LoadManager.Sounds.Win);\r\n        \r\n        //show win banner\r\n        createjs.Tween.get(this._winContainer)\r\n            .to({y:this._game.StageHeight / 2 - 25}, 600, createjs.Ease.elasticOut)\r\n            .wait(2000)\r\n            .call(() => {\r\n                //transition to end screen\r\n                ScreenManager.setCurrentScreen(\"end\", this._game.Stage);\r\n                SoundManager.fadeOutAmbience(\"ambience\", 200);\r\n\r\n                //save this data\r\n                const levelIndices = DataManager.getIndexData(this._game.CurrentLevelData);\r\n                //mark level as complete\r\n                ProgressManager.completeLevel(levelIndices.world, levelIndices.level);\r\n                //try to mark special as collected\r\n                ProgressManager.collectSpecial(levelIndices.world, levelIndices.level);\r\n\r\n                //reset game data\r\n                this.reset();\r\n            });\r\n    }\r\n\r\n    public pauseGameLogic() {\r\n        this._pauseLogic = true;\r\n    }\r\n\r\n    public unpauseGameLogic() {\r\n        this._pauseLogic = false;\r\n    }\r\n\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    public create(stage:createjs.StageGL):Screen {\r\n        super.create(stage);\r\n        //add stuff\r\n        this._staticContainer.checkoutSprites();\r\n        this._staticContainer.Sprites.bg.y = 0;\r\n        this._container.addChild(this._staticContainer.Container);\r\n\r\n        this._container.addChild(this._fishContainer);\r\n        this._container.addChild(this._pufferContainer);\r\n\r\n        //add conditional text\r\n        this._winBanner = new createjs.Shape();\r\n        this._winBanner.graphics.beginFill(\"black\");\r\n        this._winBanner.graphics.drawRect(0, 0, this._game.StageWidth, 50);\r\n        this._winBanner.cache(0, 0, this._game.StageWidth, 50);\r\n        this._winContainer.addChild(this._winBanner);\r\n        this._winText = Sprites.generateBitmapText(\"Win!\", LoadManager.Spritesheets.TypographyWhite);\r\n        this._winContainer.addChild(this._winText);\r\n        this._winText.x = (this._game.StageWidth / 2) - (this._winText.getBounds().width / 2);\r\n\r\n        this._container.addChild(this._winContainer);\r\n        this._winContainer. y = this._game.StageHeight + 50;\r\n        this._winContainer.mouseEnabled = false;\r\n\r\n        \r\n        this._cat.create(this._container);\r\n\r\n\r\n        //add level data if it exists\r\n        // this.reset();\r\n        // this.destroy();\r\n        if(this._game.CurrentLevelData != null) {\r\n            //load in critters\r\n            for(let i = 0; i < this._game.CurrentLevelData.data.length; i++) {\r\n                const data = this._game.CurrentLevelData.data[i];\r\n                switch(data.id) {\r\n                    case POOL.PERSEPHONE:\r\n                    case POOL.OWEN:\r\n                    case POOL.RILEY:\r\n                    case POOL.FISH:\r\n                        const fish = (ObjectPool.checkout(data.id) as Fish);\r\n                        fish.create(this._fishContainer);\r\n                        if(data.speed != null) fish.Speed = data.speed; //set variables\r\n                        if(data.x != null) fish.X = data.x;\r\n                        if(data.y != null) fish.Y = data.y;\r\n                        fish.forceDirectionX((data.flip != null && data.flip) ? -1 : 1);\r\n                        fish.setNaturalY();\r\n                        this._fishes.push(fish);\r\n                        break;\r\n                    case POOL.PUFFERFISH:\r\n                        const puffer = (ObjectPool.checkout(POOL.PUFFERFISH) as Puffer);\r\n                        puffer.create(this._pufferContainer);\r\n                        if(data.speed != null) puffer.Speed = data.speed; //set variables\r\n                        if(data.x != null) puffer.X = data.x;\r\n                        if(data.y != null) puffer.Y = data.y;\r\n                        puffer.forceDirectionX((data.flip != null && data.flip) ? -1 : 1);\r\n                        this._puffers.push(puffer);\r\n                }      \r\n            }\r\n\r\n            //set fish total\r\n            this._remainingFish = this._fishes.length;\r\n        }\r\n        //get the level tutorials\r\n        if(this._game.CurrentLevelData.tutorials != null) {\r\n            this._tutorialCreator.queueTutorials(this._game.CurrentLevelData.tutorials);\r\n        }\r\n        //get the level background\r\n        if(this._game.CurrentLevelData.background != null) {\r\n            (this._staticContainer.Sprites[\"bg\"] as createjs.Sprite).gotoAndStop(this._game.CurrentLevelData.background);\r\n        }\r\n        else {\r\n            (this._staticContainer.Sprites[\"bg\"] as createjs.Sprite).gotoAndStop(\"bg1\");\r\n        }\r\n\r\n        //get the level music!\r\n        let musicKey = \"babylevels\";\r\n        if(this._game.CurrentLevelData.music) musicKey = this._game.CurrentLevelData.music;\r\n        SoundManager.playAmbienceWithFadeIn(\"ambience\", LoadManager.Sounds[musicKey], true, 0.4, 400);\r\n\r\n\r\n        //add the score\r\n        // this._gameScore.Container.y = this._game.StageHeight - 40;\r\n        // this._container.addChild(this._gameScore.Container);\r\n\r\n\r\n        //update the game HUD for this round\r\n        const levelData = this._game.CurrentLevelData;\r\n        const showScore = (levelData.showScore != null && !levelData.showScore) ? false : true;\r\n        const showTimer = (levelData.duration != null);\r\n        const showFishRemain = (levelData.showRemainingFish != null && !levelData.showRemainingFish) ? false : true;\r\n        this._gameScore.startHUD(showScore, showFishRemain, showTimer);\r\n\r\n        return null;\r\n    }\r\n\r\n    public destroy() {\r\n\r\n        this._cat.destroy();\r\n        this._fishes.forEach(f => {\r\n            f.destroy();\r\n        });\r\n        this._puffers.forEach(f => {\r\n            f.destroy();\r\n        });\r\n\r\n        ObjectPool.releaseAllObjects();\r\n\r\n        this.reset();\r\n\r\n        return super.destroy();\r\n    }\r\n\r\n    public update(gameTime:number) {\r\n        //if our logic is paused, do not do game loop\r\n        if(this._pauseLogic) return;\r\n\r\n        const normalizedTime = Math.min(1, gameTime) + 0.5;\r\n\r\n        //update entities\r\n        this._fishes.forEach(fish => {\r\n            fish.update(normalizedTime);\r\n        });\r\n        this._puffers.forEach(puffer => {\r\n            puffer.update(normalizedTime);\r\n        });\r\n\r\n        this._cat.update(normalizedTime);\r\n\r\n        //update the score\r\n        this._gameScore.update(gameTime);\r\n\r\n        super.update(gameTime);\r\n    }\r\n\r\n    public enable() {\r\n        (this._container as any).on(\"click\", this._cat.grab, this._cat);\r\n    }\r\n\r\n    public disable() {\r\n        (this._container as any).removeAllEventListeners();\r\n    }\r\n\r\n    public reset() {\r\n        this._cat.X = 290;\r\n        this._fishes.forEach(f => { ObjectPool.return(f); });\r\n        this._puffers.forEach(f => { ObjectPool.return(f); });\r\n\r\n        ObjectPool.releaseAllObjects();\r\n\r\n        this._fishContainer.removeAllChildren();\r\n        this._pufferContainer.removeAllChildren();\r\n\r\n        this._fishes = [];\r\n        this._puffers = [];\r\n\r\n\r\n        super.reset();\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public get Game() { return this._game; }\r\n    public get Cat() { return this._cat; }\r\n    public get Fishes() { return this._fishes; }\r\n    public get IsGamelogicPaused() { return this._pauseLogic; }\r\n}\r\n\r\n\r\n\r\nexport class POOL { \r\n    static get CAT() { return \"cat\"; }\r\n    static get FISH() { return \"fish\"; }\r\n    static get PUFFERFISH() { return \"puffer\"; }\r\n    static get PERSEPHONE() { return \"persephone\"; }\r\n    static get OWEN() { return \"owen\"; }\r\n    static get RILEY() { return \"riley\"; }\r\n}","import { Screen } from \"./Screen\";\r\nimport { ScreenManager } from \"../managers/ScreenManager\";\r\nimport { Sprites } from \"../ui/Sprites\";\r\nimport { Game } from \"../Game\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\n\r\nexport class IntermediaryScreen extends Screen {\r\n    private _game:Game;\r\n    private _bg:createjs.Shape;\r\n    private _textContainer:createjs.Container;\r\n    private _txtSprite:createjs.DisplayObject;\r\n\r\n    private _text:string;\r\n    \r\n    constructor(game:Game) {\r\n        super();\r\n        this._game = game;\r\n\r\n        this._text = \"\";\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /**Chooses the screen to load in after the intermediary. */\r\n    public queueNextScreen(screenKey:string, duration:number=3000) {\r\n        const evt = window.setTimeout(() => {\r\n            //load the screen\r\n            ScreenManager.setCurrentScreen(screenKey, this._game.Stage);\r\n            //clear the timeout\r\n            window.clearTimeout(evt);\r\n        }, duration);\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    public create(stage:createjs.StageGL):Screen {\r\n        //add stuff\r\n        this._bg = new createjs.Shape();\r\n        this._bg.graphics.beginFill(\"#191919\");\r\n        this._bg.graphics.drawRect(0, 0, this._game.StageWidth, this._game.StageHeight);\r\n        this._bg.graphics.endFill();\r\n        this._bg.cache(0, 0, this._game.StageWidth, this._game.StageHeight);\r\n        this._container.addChild(this._bg);\r\n\r\n        this._textContainer = new createjs.Container();\r\n        this._container.addChild(this._textContainer);\r\n\r\n        if(this._text != \"\") {\r\n            //create the text\r\n            this._txtSprite = Sprites.generateBitmapText(this._text, LoadManager.Spritesheets.TypographyWhite);\r\n            (this._txtSprite as any).scale = 0.6;\r\n            //load into container\r\n            this._textContainer.addChild(this._txtSprite);\r\n    \r\n            //put container at bottom\r\n            this._textContainer.x = (this._game.StageWidth / 2) - ((this._txtSprite.getBounds().width / 2) * 0.6);\r\n            this._textContainer.y = (this._game.StageHeight / 2) - (this._txtSprite.getBounds().height / 2);\r\n        }\r\n\r\n        return super.create(stage);\r\n    }\r\n\r\n    public destroy() {\r\n        this._textContainer.removeAllChildren();\r\n\r\n        return super.destroy();\r\n    }\r\n\r\n    public enable() {\r\n        super.enable();\r\n    }\r\n\r\n    public disable() {\r\n        super.disable();\r\n\r\n        this.reset();\r\n    }\r\n\r\n    public reset() {\r\n        this.Text = \"\";\r\n        super.reset();\r\n    }\r\n\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public set Text(value:string) {\r\n        this._text = value;\r\n    }\r\n}","import { Screen } from \"./Screen\";\r\nimport { ScreenManager } from \"../managers/ScreenManager\";\r\nimport { Sprites } from \"../ui/Sprites\";\r\nimport { Layout } from \"../ui/display/Layout\";\r\nimport { LoadManager } from \"../managers/LoadManager\";\r\nimport { Container } from \"../ui/display/Container\";\r\nimport { Logging } from \"../Functions\";\r\nimport { Game } from \"../Game\";\r\nimport { LevelSelectDisplay } from \"../ui/custom/LevelSelectDisplay\";\r\nimport { IntermediaryScreen } from \"./IntermediaryScreen\";\r\nimport { GameScreen, POOL } from \"./GameScreen\";\r\nimport { DataManager } from \"../managers/DataManager\";\r\nimport { Special } from \"../entities/specials/Special\";\r\nimport { Persephone } from \"../entities/specials/Persephone\";\r\nimport { ProgressManager } from \"../managers/ProgressManager\";\r\nimport { SoundManager } from \"../managers/SoundManager\";\r\nimport { Owen } from \"../entities/specials/Owen\";\r\nimport { Riley } from \"../entities/specials/Riley\";\r\n\r\nexport class MenuScreen extends Screen {\r\n    private _game:Game;\r\n    //containers\r\n    private _swipeContainer:createjs.Container;\r\n    private _staticContainer:Container;\r\n    // private _mainContainer:Container;\r\n    private _mainContainer:createjs.Container;\r\n    private _clearedContainer:Container;\r\n    // private _optionsContainer:Container;\r\n    private _optionsContainer:createjs.Container;\r\n    private _collectedContainer:createjs.Container;\r\n\r\n    private _mainButtonsContainer:Container;\r\n    private _logo:createjs.DisplayObject;\r\n    private _fancyFish:createjs.Sprite;\r\n\r\n    private _btnResetData:createjs.Sprite;\r\n    private _btnCheat:createjs.Sprite;\r\n    private _soundOn:createjs.Sprite;\r\n    private _soundOff:createjs.Sprite;\r\n    private _btnLeft:createjs.Sprite;\r\n    private _btnRight:createjs.Sprite;\r\n    private _btnUp:createjs.Sprite;\r\n\r\n    //custom containers\r\n    private _levelSelectDisplay:LevelSelectDisplay;\r\n\r\n    //properties\r\n    private _swipeSpeed:number;\r\n    private _currentScreen:string;\r\n    private _initialSwipePos:{x:number, y:number};\r\n    private _dragTimer:any;\r\n\r\n    //collectibles\r\n    private _collectibleFish:Special[];\r\n\r\n    \r\n    constructor(game:Game) {\r\n        super();\r\n\r\n        this._game = game;\r\n\r\n        //setup swipe container -- holds all moving sprites\r\n        this._swipeContainer = new createjs.Container();\r\n\r\n        //setup static container\r\n        this._staticContainer = new Container();\r\n        const bg = new createjs.Sprite(LoadManager.Spritesheets.Catfish_Main, \"bg\");\r\n\r\n        this._staticContainer.addMany({\r\n            bg\r\n        });\r\n\r\n        //setup main container\r\n        this._mainContainer = new createjs.Container();\r\n        this._logo = new createjs.Sprite(LoadManager.Spritesheets.Catfish_Main, \"logo\");\r\n        this._logo.x = this._game.StageWidth - this._logo.getBounds().width - 20;\r\n        this._logo.y = this._game.StageHeight * 0.4;\r\n        this._mainContainer.addChild(this._logo);\r\n        this._mainButtonsContainer = new Container(Container.LAYOUT_OPTIONS.ColumnLeftBottom);\r\n        this._mainButtonsContainer.addMany({\r\n            btnNewGame : new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnNewGame\"),\r\n            btnOptions : new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnOptions\"),\r\n            btnLevelSelect : new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnLevelSelect\"),\r\n            btnExit : new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnExit\"),\r\n        });\r\n        this._mainContainer.addChild(this._mainButtonsContainer.Container);\r\n        this._fancyFish = new createjs.Sprite(LoadManager.Spritesheets.Catfish_Main, \"fancyFish\");\r\n        this._fancyFish.x = this._game.StageWidth - this._fancyFish.getBounds().width - 20;\r\n        this._fancyFish.y = this._game.StageHeight - this._fancyFish.getBounds().height - 20;\r\n        this._mainContainer.addChild(this._fancyFish);\r\n        this._fancyFish.visible = false;\r\n\r\n        //setup options container\r\n        this._optionsContainer = new createjs.Container();\r\n        const optionsBG = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"bgOptions\");\r\n        this._btnResetData = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnResetData\");\r\n        this._btnCheat = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnCheat\");\r\n        this._soundOn = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnOn\");\r\n        this._soundOff = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnOff\");\r\n        this._soundOn.x = this._soundOff.x = 240;\r\n        this._soundOn.y = this._soundOff.y = 240;\r\n        this._soundOff.x += 130;\r\n        this._btnCheat.x = (this._game.StageWidth / 2) - this._btnCheat.getBounds().width / 2;\r\n        this._btnResetData.x = (this._game.StageWidth / 2) - this._btnResetData.getBounds().width / 2;\r\n        this._btnCheat.y = (this._game.StageHeight * 0.8);\r\n        this._btnResetData.y = 350;\r\n\r\n        this._optionsContainer.addChild(\r\n            optionsBG, this._btnResetData, this._btnCheat, this._soundOff, this._soundOn\r\n        );\r\n\r\n        this._optionsContainer.x -= this._game.StageWidth;\r\n\r\n        //setup cleared container\r\n        this._clearedContainer = new Container();\r\n        this._clearedContainer.add(\"txtCleared\", Sprites.generateBitmapText(\"Data successfully cleared!\", LoadManager.Spritesheets.Typography));\r\n        this._clearedContainer.Container.x -= this._game.StageWidth;\r\n        this._clearedContainer.Container.y -= this._game.StageHeight;\r\n\r\n        this._levelSelectDisplay = new LevelSelectDisplay(game);\r\n        this._levelSelectDisplay.Container.x += this._game.StageWidth;\r\n\r\n        //setup collected container\r\n        this._collectedContainer = new createjs.Container;\r\n        this._collectedContainer.y += this._game.StageHeight;\r\n\r\n\r\n        this._collectibleFish = [];\r\n\r\n\r\n        //setup arrow btns\r\n        this._btnUp = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnUp\");\r\n        this._btnLeft = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnLeft\");\r\n        this._btnRight = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnRight\");\r\n        this._btnUp.x = (this._game.StageWidth / 2) - this._btnUp.getBounds().width / 2;\r\n        this._btnUp.y = this._game.StageHeight + 10;\r\n        this._btnLeft.y = this._btnRight.y = 250;\r\n        this._btnLeft.x = (this._game.StageWidth) + 10;\r\n        this._btnRight.x -= this._btnRight.getBounds().width + 10;\r\n\r\n        this._swipeContainer.addChild(\r\n            this._btnUp, this._btnLeft, this._btnRight\r\n        );\r\n\r\n\r\n        //setup properties\r\n        this._swipeSpeed = 800;\r\n        this._currentScreen = \"main\";\r\n        this._initialSwipePos = { x:-1, y:-1 };        \r\n\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    private _onNewGame() {\r\n        // SoundManager.stopAllSound();\r\n        SoundManager.fadeOutAmbience(\"ambience\");\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.BubblesFade);\r\n        Logging.message(\"Go to new game!\");\r\n        \r\n        const data = DataManager.getLevelDataByIndex(0);\r\n        this._game.changeCurrentLevel(data);\r\n        \r\n        const intermediary = ScreenManager.getScreenByKey(\"intermediary\") as IntermediaryScreen;\r\n        new Promise(async(res) => {\r\n            intermediary.Text = data.name;\r\n            await ScreenManager.setCurrentScreen(intermediary, this.Stage);\r\n            intermediary.queueNextScreen(\"game\");\r\n\r\n            res();\r\n        });\r\n    }\r\n    private _onOptions() {\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n        //go to options!\r\n        Logging.message(\"Go to options!\");\r\n        createjs.Tween.get(this._swipeContainer).to({x:this._game.StageWidth}, this._swipeSpeed, createjs.Ease.circOut);\r\n        this._currentScreen = \"options\";\r\n    }\r\n    private _onLevelSelect() {\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n        Logging.message(\"Go to level select!\");\r\n        createjs.Tween.get(this._swipeContainer).to({x:-this._game.StageWidth}, this._swipeSpeed, createjs.Ease.circOut);\r\n        this._currentScreen = \"levelSelect\";\r\n    }\r\n    private _onFish() {\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n        Logging.message(\"Go to fish!\");\r\n        createjs.Tween.get(this._swipeContainer).to({y:-this._game.StageHeight}, this._swipeSpeed, createjs.Ease.circOut);\r\n        this._currentScreen = \"fish\";\r\n    }\r\n    private _onExit() {\r\n        //play the sound\r\n        SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n        Logging.message(\"Go to exit!\");\r\n    }\r\n\r\n    private _onMain() {\r\n        Logging.message(\"Go to main!\");\r\n        createjs.Tween.get(this._swipeContainer).to({x:0, y:0}, this._swipeSpeed, createjs.Ease.bounceOut);\r\n        this._currentScreen = \"main\";\r\n    }\r\n\r\n    private _onDragStart(e) {\r\n\r\n        this._initialSwipePos = { x:e.stageX, y:e.stageY };\r\n\r\n        //reset drag timer if not null\r\n        if(this._dragTimer != null) window.clearTimeout(this._dragTimer);\r\n        this._dragTimer = setTimeout(() => {\r\n            this._initialSwipePos = { x:-1, y:-1 };\r\n            this._dragTimer = null;\r\n        }, 500);\r\n    }\r\n    private _onDragEnd(e) {\r\n        if(this._initialSwipePos.x != -1 || this._initialSwipePos.y != -1) {\r\n            //find the direction\r\n            if((this._initialSwipePos.x - e.stageX) > 20) {\r\n                if(this._currentScreen == \"options\")\r\n                    this._onMain();\r\n            }\r\n            else if((this._initialSwipePos.x - e.stageX) < -20) {\r\n                if(this._currentScreen == \"levelSelect\")\r\n                    this._onMain();\r\n            }\r\n            else if((this._initialSwipePos.y - e.stageY) < -20) {\r\n                if(this._currentScreen == \"fish\")\r\n                    this._onMain();\r\n            }\r\n        }\r\n    }\r\n\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    public create(stage:createjs.StageGL):Screen {\r\n        //start music\r\n        SoundManager.playAmbienceWithFadeIn(\"ambience\", LoadManager.Sounds[\"intro\"], true, 1, 400);\r\n        // SoundManager.playAmbienceWithFadeIn(\"ambience\", LoadManager.Sounds[\"woowoobeat\"], true, 1, 400);\r\n\r\n        //add in the containers\r\n        this._staticContainer.Sprites.bg.y = 0;\r\n        this._container.addChild(this._staticContainer.Container);\r\n        this._container.addChild(this._swipeContainer);\r\n        this._swipeContainer.addChild(this._mainContainer);\r\n        this._swipeContainer.addChild(this._optionsContainer);\r\n        this._swipeContainer.addChild(this._clearedContainer.Container);\r\n        this._swipeContainer.addChild(this._collectedContainer);\r\n\r\n        \r\n        this._swipeContainer.addChild(this._levelSelectDisplay.Container);\r\n\r\n        this._fancyFish.visible = false;\r\n\r\n        //kill any existing collectibles\r\n        this._collectedContainer.removeAllChildren();\r\n        this._collectibleFish.forEach(f => {\r\n            f = null;\r\n        });\r\n        this._collectibleFish = [];\r\n\r\n\r\n        //toggle sound\r\n        if(SoundManager.IsSoundPlaying) {\r\n            this._soundOff.alpha = 0.5;\r\n            this._soundOn.alpha = 1;\r\n        }\r\n        else {\r\n            this._soundOff.alpha = 1;\r\n            this._soundOn.alpha = 0.5;\r\n        }\r\n\r\n        return super.create(stage);\r\n    }\r\n\r\n    public enable() {\r\n        super.enable();\r\n        //listen to events\r\n        (this._mainButtonsContainer.Sprites.btnNewGame as any).on(\"click\", this._onNewGame, this, true);\r\n        (this._mainButtonsContainer.Sprites.btnOptions as any).on(\"click\", this._onOptions, this);\r\n        (this._mainButtonsContainer.Sprites.btnLevelSelect as any).on(\"click\", this._onLevelSelect, this);\r\n        (this._mainButtonsContainer.Sprites.btnExit as any).on(\"click\", this._onExit, this);\r\n\r\n        (this._fancyFish as any).on(\"click\", this._onFish, this);\r\n\r\n        (this._btnCheat as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            //unlock all\r\n            ProgressManager.unlockAll();\r\n            //reload this menu\r\n            ScreenManager.setCurrentScreen(\"menu\", this.Stage);\r\n        }, this);\r\n        (this._btnResetData as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            //kill all\r\n            ProgressManager.killAll();\r\n            ProgressManager.deleteCookieData();\r\n            //reload this menu\r\n            ScreenManager.setCurrentScreen(\"menu\", this.Stage);\r\n        }, this);\r\n        (this._soundOff as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            SoundManager.stopAllSound();\r\n            //toggle buttons\r\n            this._soundOff.alpha = 1;\r\n            this._soundOn.alpha = 0.5;\r\n        }, this);\r\n        (this._soundOn as any).on(\"click\", () => {\r\n            //play the sound\r\n            SoundManager.playSFX(LoadManager.Sounds.BTNSelect);\r\n            SoundManager.playAllSound();\r\n            //toggle buttons\r\n            this._soundOff.alpha = 0.5;\r\n            this._soundOn.alpha = 1;\r\n        }, this);\r\n\r\n        (this._btnLeft as any).on(\"click\", () => {\r\n            this._onMain();\r\n        }, this);\r\n        (this._btnRight as any).on(\"click\", () => {\r\n            this._onMain();\r\n        }, this);\r\n        (this._btnUp as any).on(\"click\", () => {\r\n            this._onMain();\r\n        }, this);\r\n\r\n        //listen for swipes\r\n        (this._staticContainer.Sprites.bg as any).on(\"mousedown\", this._onDragStart, this);\r\n        (this._staticContainer.Sprites.bg as any).on(\"click\", this._onDragEnd, this);\r\n\r\n        this._levelSelectDisplay.enable();\r\n\r\n        //testing -- add fakey collectible fish\r\n        //get any collected fish CLASS names\r\n        const collFish = [].concat.apply([], ProgressManager.ProgressData.specials).filter(d => d != null && d.collected).map(d => d.unlocks);\r\n\r\n        \r\n        collFish.forEach(f => {\r\n            switch(f.toLowerCase()) {\r\n                case POOL.PERSEPHONE:\r\n                    this._collectibleFish.push(new Persephone(this._game));\r\n                    break;\r\n                case POOL.OWEN:\r\n                    this._collectibleFish.push(new Owen(this._game));\r\n                    break;\r\n                case POOL.RILEY:\r\n                    this._collectibleFish.push(new Riley(this._game));\r\n                    break;\r\n            }\r\n        });\r\n            \r\n\r\n        //add the fish to the container\r\n        this._collectibleFish.forEach(f => {\r\n            f.setMainPage(true);\r\n            f.create(this._collectedContainer);\r\n            f.Speed = Math.random() * 3 + 3;\r\n        });\r\n\r\n        //if we don't have any collectible fish, hide the fish button\r\n        if(collFish.length <= 0) {\r\n            this._fancyFish.visible = false;\r\n        }\r\n        else {\r\n            this._fancyFish.visible = true;\r\n            this._fancyFish.alpha = 0;\r\n\r\n            createjs.Tween\r\n            .get(this._fancyFish)\r\n            .to({ alpha:1 }, 500, createjs.Ease.circIn);\r\n        }\r\n\r\n\r\n\r\n        //rock the fish\r\n        createjs.Tween\r\n            // @ts-ignore\r\n            .get(this._fancyFish, { loop:true })\r\n            .to({ y:this._fancyFish.y-30 }, 3000, createjs.Ease.sineInOut)\r\n            .to({ y:this._fancyFish.y }, 3000, createjs.Ease.sineInOut);\r\n\r\n        //rock the logo\r\n        createjs.Tween\r\n            // @ts-ignore\r\n            .get(this._logo, { loop:true })\r\n            .wait(1200)\r\n            .to({ y:this._logo.y-15 }, 4500, createjs.Ease.sineInOut)\r\n            .to({ y:this._logo.y }, 4800, createjs.Ease.sineInOut);\r\n    }\r\n\r\n    public disable() {\r\n        super.disable();\r\n        //stop listen to events\r\n        (this._mainButtonsContainer.Sprites.btnNewGame as any).off(\"click\", this._onNewGame);\r\n        (this._mainButtonsContainer.Sprites.btnOptions as any).off(\"click\", this._onOptions);\r\n        (this._mainButtonsContainer.Sprites.btnLevelSelect as any).off(\"click\", this._onLevelSelect);\r\n        (this._mainButtonsContainer.Sprites.btnExit as any).off(\"click\", this._onExit);\r\n\r\n        this._fancyFish.removeAllEventListeners();\r\n\r\n        this._btnCheat.removeAllEventListeners();\r\n        this._btnResetData.removeAllEventListeners();\r\n        this._soundOff.removeAllEventListeners();\r\n        this._soundOn.removeAllEventListeners();\r\n        this._btnLeft.removeAllEventListeners();\r\n        this._btnRight.removeAllEventListeners();\r\n        this._btnUp.removeAllEventListeners();\r\n\r\n\r\n        //stop listen for swipes\r\n        (this._staticContainer.Sprites.bg as any).off(\"mousedown\", this._onDragStart);\r\n        (this._staticContainer.Sprites.bg as any).off(\"click\", this._onDragEnd);\r\n\r\n\r\n        this._mainButtonsContainer.Sprites.btnNewGame.removeAllEventListeners();\r\n        this._mainButtonsContainer.Sprites.btnOptions.removeAllEventListeners();\r\n        this._mainButtonsContainer.Sprites.btnLevelSelect.removeAllEventListeners();\r\n        this._mainButtonsContainer.Sprites.btnExit.removeAllEventListeners();\r\n        this._staticContainer.Sprites.bg.removeAllEventListeners();\r\n\r\n\r\n        this._levelSelectDisplay.disable();\r\n\r\n        this.reset();\r\n\r\n\r\n        createjs.Tween.removeAllTweens();\r\n    }\r\n\r\n    public reset() {\r\n        //reset the position of the swipe container\r\n        this._swipeContainer.x = 0;\r\n        this._swipeContainer.y = 0;\r\n\r\n        super.reset();\r\n    }\r\n\r\n    public update(gameTime:number) {\r\n        this._collectibleFish.forEach(f => f.update(gameTime));\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n}","import { IUpdateable, ICreateable, IEnableable } from \"../Interfaces\";\r\n\r\nexport class Screen implements ICreateable<Screen>, IUpdateable, IEnableable {\r\n    private _stage:createjs.StageGL;\r\n    protected _container:createjs.Container;\r\n\r\n    constructor() {\r\n        this._container = new createjs.Container();\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /**Updates the screen. */\r\n    public update(gameTime:number) {\r\n\r\n    }\r\n\r\n    /**Creates the screen and adds to the stage. */\r\n    public create(stage:createjs.StageGL):Screen {\r\n        this._stage = stage;\r\n        //add to the stage\r\n        this._stage.addChild(this._container);\r\n\r\n        \r\n        return this;\r\n    }\r\n\r\n    /**Destroys the screen and removes from the stage. */\r\n    public destroy():Screen {\r\n\r\n        //remove from the stage\r\n        this._stage.removeChild(this._container);\r\n\r\n        return this;\r\n    }\r\n\r\n    public enable() {\r\n\r\n    }\r\n\r\n    public disable() {\r\n        \r\n    }\r\n\r\n    public reset() {\r\n        \r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public get Container():createjs.Container { return this._container; }\r\n    protected get Stage():createjs.StageGL { return this._stage; }\r\n\r\n}","import { Screen } from \"./Screen\";\r\nimport { ScreenManager } from \"../managers/ScreenManager\";\r\nimport { Game } from \"../Game\";\r\nimport { Sprites } from \"../ui/Sprites\";\r\n\r\nexport class SplashScreen extends Screen {\r\n    private _game:Game;\r\n    private _textContainer:createjs.Container;\r\n\r\n    private _textSpritesheet;\r\n    \r\n    constructor(game:Game) {\r\n        super();\r\n        this._game = game;\r\n\r\n\r\n        this._textSpritesheet = new createjs.SpriteSheet({images: [\"assets/spritesheets/typography_white.png\"], frames: [[0,329,27,44,0,0,0],[89,47,21,44,0,0,0],[63,47,23,44,0,0,0],[32,141,24,44,0,0,0],[89,94,21,44,0,0,0],[110,141,20,44,0,0,0],[34,94,26,44,0,0,0],[0,188,28,44,0,0,0],[152,282,14,44,0,0,0],[158,94,16,44,0,0,0],[59,141,24,44,0,0,0],[136,94,19,44,0,0,0],[0,47,32,44,0,0,0],[0,141,29,44,0,0,0],[0,235,28,44,0,0,0],[86,141,21,44,0,0,0],[0,282,28,44,0,0,0],[63,94,23,44,0,0,0],[156,141,17,44,0,0,0],[81,235,21,44,0,0,0],[30,329,27,44,0,0,0],[66,0,24,44,0,0,0],[0,0,35,44,0,0,0],[31,188,23,44,0,0,0],[31,235,22,44,0,0,0],[57,188,23,44,0,0,0],[108,329,18,44,0,0,0],[60,329,21,44,0,0,0],[159,47,17,44,0,0,0],[118,0,20,44,0,0,0],[129,329,18,44,0,0,0],[169,282,14,44,0,0,0],[113,47,20,44,0,0,0],[84,329,21,44,0,0,0],[171,329,12,44,0,0,0],[186,282,12,44,0,0,0],[113,94,20,44,0,0,0],[191,188,12,44,0,0,0],[0,94,31,44,0,0,0],[56,235,22,44,0,0,0],[60,282,22,44,0,0,0],[108,188,20,44,0,0,0],[85,282,20,44,0,0,0],[177,94,15,44,0,0,0],[184,0,15,44,0,0,0],[179,47,15,44,0,0,0],[31,282,22,44,0,0,0],[131,282,18,44,0,0,0],[38,0,25,44,0,0,0],[150,329,18,44,0,0,0],[108,282,20,44,0,0,0],[152,235,18,44,0,0,0],[35,47,25,44,0,0,0],[153,188,16,44,0,0,0],[83,188,22,44,0,0,0],[131,188,19,44,0,0,0],[93,0,22,44,0,0,0],[129,235,20,44,0,0,0],[133,141,20,44,0,0,0],[141,0,20,44,0,0,0],[105,235,21,44,0,0,0],[136,47,20,44,0,0,0],[194,141,12,44,0,0,0],[195,94,12,44,0,0,0],[197,47,12,44,0,0,0],[172,188,16,44,0,0,0],[176,141,15,44,0,0,0],[173,235,14,44,0,0,0],[164,0,17,44,0,0,0]],  animations: {A:[0,0, true], B:[1,1, true], C:[2,2, true], D:[3,3, true], E:[4,4, true], F:[5,5, true], G:[6,6, true], H:[7,7, true], I:[8,8, true], J:[9,9, true], K:[10,10, true], L:[11,11, true], M:[12,12, true], N:[13,13, true], O:[14,14, true], P:[15,15, true], Q:[16,16, true], R:[17,17, true], S:[18,18, true], T:[19,19, true], U:[20,20, true], V:[21,21, true], W:[22,22, true], X:[23,23, true], Y:[24,24, true], Z:[25,25, true], a:[26,26, true], b:[27,27, true], c:[28,28, true], d:[29,29, true], e:[30,30, true], f:[31,31, true], g:[32,32, true], h:[33,33, true], i:[34,34, true], j:[35,35, true], k:[36,36, true], l:[37,37, true], m:[38,38, true], n:[39,39, true], o:[40,40, true], p:[41,41, true], q:[42,42, true], r:[43,43, true], s:[44,44, true], t:[45,45, true], u:[46,46, true], v:[47,47, true], w:[48,48, true], x:[49,49, true], y:[50,50, true], z:[51,51, true], 0:[52,52, true], 1:[53,53, true], 2:[54,54, true], 3:[55,55, true], 4:[56,56, true], 5:[57,57, true], 6:[58,58, true], 7:[59,59, true], 8:[60,60, true], 9:[61,61, true], \".\":[62,62, true], \",\":[63,63, true], \"'\":[64,64, true], \"\\\"\":[65,65, true], \"?\":[66,66, true], \"!\":[67,67, true], \"$\":[68,68, true]}});\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    public create(stage:createjs.StageGL):Screen {\r\n        //add stuff\r\n        //load the image\r\n        const img = document.createElement(\"img\");\r\n        img.onload = (e) => {\r\n            const splash = new createjs.Bitmap(img);\r\n            this._container.addChild(splash);\r\n\r\n            super.create(stage);\r\n        }\r\n        img.src = \"assets/images/splash.png\";\r\n\r\n\r\n        this._textContainer = new createjs.Container();\r\n        this._container.addChild(this._textContainer);\r\n\r\n        this.Text = \"0\";\r\n\r\n        stage.update();\r\n\r\n\r\n\r\n        return this;\r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public set Text(text:string) {\r\n        this._textContainer.removeAllChildren();\r\n        //add text\r\n        const textEl = Sprites.generateBitmapText(text, this._textSpritesheet);\r\n        this._textContainer.addChild(textEl);\r\n        this._container.addChild(this._textContainer);\r\n\r\n        this._game.Stage.update();\r\n    }\r\n}","import { LoadManager } from \"../managers/LoadManager\";\r\nimport { Game } from \"../Game\";\r\nimport { GameScreen } from \"./GameScreen\";\r\n\r\n/**This class creates the tutorial items.  This class will control the game and game screen when being used. */\r\nexport class TutorialCreator {\r\n    public static get KEY() {\r\n        return {\r\n            \"First\" : \"first\",\r\n            \"You\" : \"you\",\r\n            \"Fish\" : \"fish\",\r\n            \"Puffer\" : \"puffer\",\r\n            \"Many\" : \"many\",\r\n            \"Pause\" : \"pause\",\r\n            \"Special\" : \"special\"\r\n        }\r\n    };\r\n\r\n    private _game:Game;\r\n    private _gameScreen:GameScreen;\r\n\r\n\r\n    //tutorial overlays\r\n    private _youOverlay:createjs.Sprite;\r\n    private _fishOverlay:createjs.Sprite;\r\n    private _pufferOverlay:createjs.Sprite;\r\n    private _manyOverlay:createjs.Sprite;\r\n    private _pauseOverlay:createjs.Sprite;\r\n    private _specialOverlay:createjs.Sprite;\r\n\r\n    private _currentOverlay:createjs.Sprite;\r\n    private _tutorialQueue:string[];\r\n\r\n    constructor(game:Game, gameScreen:GameScreen) {\r\n        this._game = game;\r\n        this._gameScreen = gameScreen;\r\n\r\n        this._tutorialQueue = [];\r\n\r\n        //build all the required screens\r\n        this._youOverlay = new createjs.Sprite(LoadManager.Spritesheets.Tutorial_Spritesheet, \"you\");\r\n        this._fishOverlay = new createjs.Sprite(LoadManager.Spritesheets.Tutorial_Spritesheet, \"fish\");\r\n        this._pufferOverlay = new createjs.Sprite(LoadManager.Spritesheets.Tutorial_Spritesheet, \"puffer\");\r\n        this._manyOverlay = new createjs.Sprite(LoadManager.Spritesheets.Tutorial_Spritesheet, \"many\");\r\n        this._pauseOverlay = new createjs.Sprite(LoadManager.Spritesheets.Tutorial_Spritesheet, \"pause\");\r\n        this._specialOverlay = new createjs.Sprite(LoadManager.Spritesheets.Tutorial_Spritesheet, \"special\");\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public async queueTutorials(keys:string[]) {\r\n\r\n        for(let i = 0; i < keys.length; i++) {\r\n            const key = keys[i];\r\n\r\n            await new Promise(async(res, rej) => {\r\n\r\n                switch(key) {\r\n                    //first will play multiple screens\r\n                    case TutorialCreator.KEY.First :\r\n                        await this._runYou();\r\n                        await this._transition(this._fishOverlay);\r\n                        await this._runFish();\r\n                        await this._transition(null);\r\n                        this._gameScreen.unpauseGameLogic();\r\n                        res();\r\n                        break;\r\n                    case TutorialCreator.KEY.You :\r\n                        await this._runYou();\r\n                        await this._transition(null);\r\n                        this._gameScreen.unpauseGameLogic();\r\n                        res();\r\n                        break;\r\n                    case TutorialCreator.KEY.Fish :\r\n                        await this._runFish();\r\n                        await this._transition(null);\r\n                        this._gameScreen.unpauseGameLogic();\r\n                        res();\r\n                        break;\r\n                    case TutorialCreator.KEY.Puffer :\r\n                        await this._runPuffer();\r\n                        await this._transition(null);\r\n                        this._gameScreen.unpauseGameLogic();\r\n                        res();\r\n                        break;\r\n                    case TutorialCreator.KEY.Special :\r\n                        await this._runSpecial();\r\n                        await this._transition(null);\r\n                        this._gameScreen.unpauseGameLogic();\r\n                        res();\r\n                        break;\r\n                    case TutorialCreator.KEY.Many :\r\n                        await this._runMany();\r\n                        await this._transition(null);\r\n                        this._gameScreen.unpauseGameLogic();\r\n                        res();\r\n                        break;\r\n\r\n                }\r\n\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n    private async _transition(nextScreen) {\r\n        let promises = [];\r\n        //if we have a current screen, wait for it to fade out\r\n        if(this._currentOverlay != null) {\r\n            promises.push(\r\n                new Promise(async(res) => {\r\n                    //fade out\r\n                    createjs.Tween\r\n                        .get(this._currentOverlay)\r\n                        .to({ alpha:0 }, 500, createjs.Ease.linear)\r\n                        .call(() => {\r\n                            this._gameScreen.Container.removeChild(this._currentOverlay);\r\n                            res();\r\n                        });\r\n                })\r\n            );\r\n        }\r\n\r\n        //wait for certain actions to finish\r\n        return new Promise(async(res) => {\r\n            //wait for promises to finish\r\n            await Promise.all(promises);\r\n\r\n            //if we are transitioning to null, just end us\r\n            if(nextScreen == null) {\r\n                this._currentOverlay.alpha = 1;\r\n                res();\r\n                return;\r\n            }\r\n\r\n            this._currentOverlay.alpha = 1;\r\n\r\n            //now add in the new one\r\n            this._currentOverlay = nextScreen;\r\n            this._gameScreen.Container.addChild(this._currentOverlay);\r\n            this._currentOverlay.alpha = 0;\r\n\r\n            //fade in\r\n            createjs.Tween\r\n                .get(this._currentOverlay)\r\n                .to({ alpha:1 }, 500, createjs.Ease.linear)\r\n                .call(() => {\r\n                    res();\r\n                });\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private async _runYou() {\r\n\r\n        return new Promise((res, rej) => {\r\n            this._currentOverlay = this._youOverlay;\r\n\r\n            const catStart = this._gameScreen.Cat.Y;\r\n            //move the cat hand\r\n            \r\n            this._gameScreen.Cat.Y = 80;\r\n            //pause the game\r\n            this._gameScreen.pauseGameLogic();\r\n            //overlay screen\r\n            this._gameScreen.Container.addChild(this._youOverlay);\r\n            //listen for screen click\r\n            (this._game.Stage).on(\"pressup\", () => { \r\n                //put cat paw back to start Y\r\n                this._gameScreen.Cat.Y = catStart;\r\n                res();\r\n            }, true, true);\r\n\r\n        });\r\n        \r\n    }\r\n\r\n    private async _runFish() {\r\n\r\n        return new Promise((res, rej) => {\r\n            this._currentOverlay = this._fishOverlay;\r\n            //pause the game\r\n            this._gameScreen.pauseGameLogic();\r\n            //overlay screen\r\n            this._gameScreen.Container.addChild(this._fishOverlay);\r\n            //listen for screen click\r\n            (this._game.Stage).on(\"pressup\", () => { \r\n                res();\r\n            }, true, true);\r\n        });\r\n\r\n    }\r\n\r\n    private async _runPuffer() {\r\n\r\n        return new Promise((res, rej) => {\r\n            this._currentOverlay = this._pufferOverlay;\r\n            //pause the game\r\n            this._gameScreen.pauseGameLogic();\r\n            //overlay screen\r\n            this._gameScreen.Container.addChild(this._pufferOverlay);\r\n            //listen for screen click\r\n            (this._game.Stage).on(\"pressup\", () => { \r\n                res();\r\n            }, true, true);\r\n        });\r\n\r\n    }\r\n\r\n    private async _runSpecial() {\r\n\r\n        return new Promise((res, rej) => {\r\n            this._currentOverlay = this._specialOverlay;\r\n            //pause the game\r\n            this._gameScreen.pauseGameLogic();\r\n            //overlay screen\r\n            this._gameScreen.Container.addChild(this._specialOverlay);\r\n            //listen for screen click\r\n            (this._game.Stage).on(\"pressup\", () => { \r\n                res();\r\n            }, true, true);\r\n        });\r\n\r\n    }\r\n\r\n    private async _runMany() {\r\n\r\n        return new Promise((res, rej) => {\r\n            this._currentOverlay = this._manyOverlay;\r\n            //pause the game\r\n            this._gameScreen.pauseGameLogic();\r\n            //overlay screen\r\n            this._gameScreen.Container.addChild(this._manyOverlay);\r\n            //listen for screen click\r\n            (this._game.Stage).on(\"pressup\", () => { \r\n                res();\r\n            }, true, true);\r\n        });\r\n\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n}","import { LoadManager } from \"../managers/LoadManager\";\r\n\r\n/**Used to gain access to in-game sprites. */\r\nexport class Sprites {\r\n    public static CLEAR_DATA:string = \"onClearData\";\r\n\r\n    private static _backgrounds:{ [key:string]:createjs.DisplayObject } = { };\r\n    private static _buttons:{ [key:string]:createjs.DisplayObject } = { };\r\n\r\n    private static _graphics:{ [key:string]:createjs.DisplayObject } = { };\r\n\r\n    private static _spritesheets:createjs.SpriteSheet[];\r\n\r\n    private static _canClearData:boolean = false;\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public static setup() {\r\n        return new Promise((res, rej) => {\r\n            // Sprites.spritesheets = spritesheets\r\n            //setup all the sprites\r\n            /* ------- STATIC ------- */\r\n            Sprites._backgrounds.Main = new createjs.Sprite(LoadManager.Spritesheets.UI); // Static BG\r\n            (Sprites._backgrounds.Main as createjs.Sprite).gotoAndStop(\"bg_main_static\");\r\n\r\n            Sprites._backgrounds.Logo = new createjs.Sprite(LoadManager.Spritesheets.Entities); // LOGO\r\n            (Sprites._backgrounds.Logo as createjs.Sprite).gotoAndStop(\"icon_title\");\r\n\r\n            Sprites._backgrounds.BG = LoadManager.Images.BG; // Redux\r\n            Sprites._backgrounds.BGTop = LoadManager.Images.BGTop;\r\n\r\n\r\n            /* ------- ANIMATED ------- */\r\n            Sprites._backgrounds.Wave = new createjs.Sprite(LoadManager.Spritesheets.UI); // Animated BG\r\n            (Sprites._backgrounds.Wave as createjs.Sprite).gotoAndPlay(\"bg_main\");\r\n\r\n\r\n            /* ------- GRAPHICS ------ */\r\n            Sprites._graphics.Timer = new createjs.Sprite(LoadManager.Spritesheets.ScoreHUD_Spritesheet);\r\n            (Sprites._graphics.Timer as createjs.Sprite).gotoAndPlay(\"sprTime\");\r\n            Sprites._graphics.Score = new createjs.Sprite(LoadManager.Spritesheets.ScoreHUD_Spritesheet);\r\n            (Sprites._graphics.Score as createjs.Sprite).gotoAndPlay(\"sprScore\");\r\n            Sprites._graphics.FishRemain = new createjs.Sprite(LoadManager.Spritesheets.ScoreHUD_Spritesheet);\r\n            (Sprites._graphics.FishRemain as createjs.Sprite).gotoAndPlay(\"sprFish\");\r\n            \r\n            /* ------- BUTTONS ------- */\r\n            Sprites._buttons.NewGame = new createjs.Sprite(LoadManager.Spritesheets.Entities); // New Game\r\n            (Sprites._buttons.NewGame as createjs.Sprite).gotoAndStop(\"btn_new_game\");\r\n            new createjs.ButtonHelper(Sprites._buttons.NewGame as createjs.Sprite, \"btn_new_game\", \"btn_new_game_hover\", \"btn_new_game_hover\");\r\n\r\n\r\n            Sprites._buttons.Options = new createjs.Sprite(LoadManager.Spritesheets.Entities); // Options\r\n            (Sprites._buttons.Options as createjs.Sprite).gotoAndStop(\"btn_new_game\");\r\n            new createjs.ButtonHelper(Sprites._buttons.Options as createjs.Sprite, \"btn_options\", \"btn_options_hover\", \"btn_options_hover\");\r\n\r\n            Sprites._buttons.LevelSelect = new createjs.Sprite(LoadManager.Spritesheets.Entities); // Select\r\n            (Sprites._buttons.LevelSelect as createjs.Sprite).gotoAndStop(\"btn_select\");\r\n            new createjs.ButtonHelper(Sprites._buttons.LevelSelect as createjs.Sprite, \"btn_select\", \"btn_select_hover\", \"btn_select_hover\");\r\n\r\n            Sprites._buttons.Exit = new createjs.Sprite(LoadManager.Spritesheets.Entities); // Exit\r\n            (Sprites._buttons.Exit as createjs.Sprite).gotoAndStop(\"btn_select\");\r\n            new createjs.ButtonHelper(Sprites._buttons.Exit as createjs.Sprite, \"btn_exit\", \"btn_exit_hover\", \"btn_exit_hover\");\r\n\r\n            Sprites._buttons.Fishbowl = new createjs.Sprite(LoadManager.Spritesheets.Entities); // Fishbowl\r\n            (Sprites._buttons.Fishbowl as createjs.Sprite).gotoAndStop(\"btn_select\");\r\n            new createjs.ButtonHelper(Sprites._buttons.Fishbowl as createjs.Sprite, \"icon_fishbowl\", \"icon_fishbowl_hover\", \"icon_fishbowl_hover\", true);\r\n\r\n\r\n            /* ------- MENU ------- */\r\n            Sprites._backgrounds.LevelSelectBG = new createjs.Sprite(LoadManager.Spritesheets.Menu_Level_Select); // Level Select BG\r\n            (Sprites._backgrounds.LevelSelectBG as createjs.Sprite).gotoAndStop(\"static_bg\");\r\n            Sprites._buttons.LevelEmpty = new createjs.Sprite(LoadManager.Spritesheets.Menu_Level_Select); // Level Empty Button\r\n            (Sprites._buttons.LevelEmpty as createjs.Sprite).gotoAndStop(\"level_empty\");\r\n            Sprites._buttons.LevelComplete = new createjs.Sprite(LoadManager.Spritesheets.Menu_Level_Select); // Level Complete Button\r\n            (Sprites._buttons.LevelComplete as createjs.Sprite).gotoAndStop(\"level_complete\");\r\n            Sprites._buttons.LevelSpecialEmpty = new createjs.Sprite(LoadManager.Spritesheets.Menu_Level_Select); // Level Special Empty Button\r\n            (Sprites._buttons.LevelSpecialEmpty as createjs.Sprite).gotoAndStop(\"level_special_empty\");\r\n            Sprites._buttons.LevelSpecialComplete = new createjs.Sprite(LoadManager.Spritesheets.Menu_Level_Select); // Level Special Complete Button\r\n            (Sprites._buttons.LevelSpecialComplete as createjs.Sprite).gotoAndStop(\"level_special_complete\");\r\n\r\n\r\n            /* ------- COMPLEX ------- */\r\n            Sprites._setupBTNClearData();\r\n\r\n            res();\r\n        });\r\n    }\r\n\r\n    // /* --- Complex createjs.Sprite Setup --- */\r\n    private static _setupBTNClearData() {\r\n        Sprites._buttons.ClearData = new createjs.Sprite(LoadManager.Spritesheets.UI); // BTN Clear Data\r\n        (Sprites._buttons.ClearData as createjs.Sprite).gotoAndStop(\"btn_clear_data\");\r\n        (Sprites._buttons.ClearData as createjs.Sprite).cursor = \"pointer\";\r\n        Sprites._canClearData = false;\r\n    }\r\n    public static listenToClearData() {\r\n        //listen\r\n        (Sprites._buttons.ClearData as any).on(\"mousedown\", Sprites._btnDataDown);\r\n        (Sprites._buttons.ClearData as any).on(\"animationend\", Sprites._btnDataComplete);\r\n        (Sprites._buttons.ClearData as any).on(\"click\", Sprites._btnDataUp);\r\n    }\r\n    public static stopListenToClearData() {\r\n        //listen\r\n        (Sprites._buttons.ClearData as any).off(\"mousedown\", Sprites._btnDataDown);\r\n        (Sprites._buttons.ClearData as any).off(\"animationend\", Sprites._btnDataComplete);\r\n        (Sprites._buttons.ClearData as any).off(\"click\", Sprites._btnDataUp);\r\n    }\r\n\r\n    private static _btnDataDown(e) {\r\n        (Sprites._buttons.ClearData as createjs.Sprite).gotoAndPlay(\"btn_clear_data_progress\");\r\n        Sprites._canClearData = true;\r\n    }\r\n    private static _btnDataUp(e) {\r\n        (Sprites._buttons.ClearData as createjs.Sprite).gotoAndStop(\"btn_clear_data\");\r\n        Sprites._canClearData = false;\r\n    }\r\n    private static _btnDataComplete(e) {\r\n        (Sprites._buttons.ClearData as createjs.Sprite).gotoAndStop(\"btn_clear_data\");\r\n        //dispatch event to button\r\n        if(Sprites._canClearData) {\r\n            (Sprites._buttons.ClearData as createjs.Sprite).dispatchEvent(new Event(Sprites.CLEAR_DATA));\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**A helper function to generate and cache text for the StageGL object. */\r\n    public static generateText(text, details = \"20px Arial\", color = \"#FFFEEE\") {\r\n        const textObj = new createjs.Text(text, details, color)\r\n        textObj.cache(0, 0, textObj.getBounds().width, textObj.getBounds().height);\r\n        return textObj;\r\n    }\r\n\r\n    public static generateBitmapText(text, spritesheet) {\r\n        const textObj = new createjs.BitmapText(text, spritesheet);\r\n        return textObj;\r\n    }\r\n\r\n\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public static get Backgrounds() { return Sprites._backgrounds; }\r\n    public static get Buttons() { return Sprites._buttons; }\r\n    public static get Graphics() { return Sprites._graphics; }\r\n\r\n    // static get BG() { return Sprites._bg }\r\n    // static get Logo() { return Sprites._logo }\r\n    // static get AnimBG() { return Sprites._animBg }\r\n    // static get GameBG() { return Sprites._gameBG }\r\n    // static get GameBGTop() { return Sprites._gameBGTop }\r\n    // //buttons\r\n    // static get BTN_New_Game() { return Sprites._btnNewGame }\r\n    // static get BTN_Options() { return Sprites._btnOptions }\r\n    // static get BTN_Select() { return Sprites._btnSelect }\r\n    // static get BTN_Exit() { return Sprites._btnExit }\r\n    // static get BTN_Fishbowl() { return Sprites._btnFishbowl }\r\n    // static get BTN_ClearData() { return Sprites._btnClearData }\r\n\r\n\r\n    // static get CLEAR_DATA() { return \"onClearData\" }\r\n}","import { Sprites } from \"../Sprites\";\r\nimport { LoadManager } from \"../../managers/LoadManager\";\r\nimport { ProgressManager } from \"../../managers/ProgressManager\";\r\nimport { Game } from \"../../Game\";\r\nimport { IEnableable } from \"../../Interfaces\";\r\nimport { GameScreen } from \"../../screens/GameScreen\";\r\nimport { DataManager } from \"../../managers/DataManager\";\r\nimport { ScreenManager } from \"../../managers/ScreenManager\";\r\nimport { IntermediaryScreen } from \"../../screens/IntermediaryScreen\";\r\nimport { SoundManager } from \"../../managers/SoundManager\";\r\n\r\n\r\nexport class LevelSelectDisplay implements IEnableable {\r\n    private _game:Game;\r\n\r\n    private _container:createjs.Container;\r\n    private _background:createjs.Sprite;\r\n    private _levelsContainer:createjs.Container;\r\n    private _levelTextContainer:createjs.Container;\r\n\r\n    private _levelsData:any;\r\n\r\n    private _levelButtons:createjs.Sprite[];\r\n\r\n    constructor(game:Game) {\r\n        this._game = game;\r\n        this._levelButtons = [];\r\n\r\n        //build the required components for the level select display\r\n        this._container = new createjs.Container();\r\n        this._background = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"bgLevelSelect\");\r\n\r\n        this._levelsContainer = new createjs.Container();\r\n        this._container.addChild(this._background);\r\n\r\n\r\n        //setup display text\r\n        this._levelTextContainer = new createjs.Container();\r\n        this._container.addChild(this._levelTextContainer);\r\n\r\n        this.LevelText = \"\";\r\n\r\n\r\n\r\n        this.rebuild();\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public enable() {\r\n        this.rebuild();\r\n        this._levelButtons.forEach(btn => {\r\n            btn.on(\"click\", this._onLevelClick, this);\r\n            btn.on(\"mouseover\", this._onLevelHover, this);\r\n            btn.on(\"mouseout\", this._onLevelUnhover, this);\r\n        });\r\n    }\r\n\r\n    public disable() {\r\n        this._levelButtons.forEach(btn => {\r\n            btn.removeAllEventListeners();\r\n        });\r\n    }\r\n\r\n    public rebuild() {\r\n        //rebuild all buttons\r\n        this._levelButtons.forEach(ch => {\r\n            this._container.removeChild(ch);\r\n            ch.removeAllEventListeners();\r\n            ch = null;\r\n        });\r\n        this._levelButtons = [];\r\n        this._levelsContainer.removeAllChildren();\r\n\r\n        //build levels data\r\n        this._levelsData = DataManager.WorldsData.worlds.map((world, i) => {\r\n            return [].concat.apply([], world as any)\r\n            .map((level, n) => {\r\n                let special = ProgressManager.ProgressData.specials[i][n];\r\n\r\n                let obj = level;\r\n                obj.unlocked = ProgressManager.ProgressData.levels[i][n].unlocked;\r\n                obj.completed = ProgressManager.ProgressData.levels[i][n].completed;\r\n                obj.special = (special != null);\r\n\r\n                return obj;\r\n            })\r\n        });\r\n\r\n\r\n        //build the level icons\r\n        for(let r = 0; r < this._levelsData.length; r++) {\r\n            //iterate through levels\r\n            for(let i = 0; i < this._levelsData[r].length; i++) {\r\n                const levelData = this._levelsData[r][i];\r\n                //decide the sprite\r\n                let sprite = new createjs.Sprite(LoadManager.Spritesheets.Menu_Spritesheet, \"btnLvlEmpty\")\r\n                if(levelData.special != null && levelData.special) sprite.gotoAndPlay(\"btnLvlSpecial\")\r\n                // //completed\r\n                if(levelData.completed && (levelData.special == null || !levelData.special)) {\r\n                    sprite.gotoAndPlay(\"btnLvlComplete\")\r\n                }\r\n                //locked\r\n                if(!levelData.unlocked) {\r\n                    sprite.alpha = 0.25;\r\n                }\r\n                else {\r\n                    sprite.alpha = 1;\r\n                     //extras\r\n                    sprite.cursor = \"pointer\";\r\n                }\r\n\r\n                //place\r\n                sprite.x = 100 * i;\r\n                sprite.y = 90 * r;\r\n\r\n                //add world tint\r\n                // const step = (360 / this._levelsData.length) * r;\r\n                // var matrix = new createjs.ColorMatrix().adjustHue(step - 180).adjustSaturation(-50);\r\n                // sprite.filters = [\r\n                //     new createjs.ColorMatrixFilter(matrix)\r\n                // ];\r\n\r\n                // sprite.cache(0, 0, sprite.getBounds().width, sprite.getBounds().height);\r\n\r\n                //add\r\n                this._levelsContainer.addChild(sprite);\r\n                //to array\r\n                this._levelButtons.push(sprite as createjs.Sprite);\r\n            }\r\n        };\r\n\r\n        this._levelsContainer.x = (this._game.StageWidth / 2) - (this._levelsContainer.getBounds().width / 2);\r\n        this._levelsContainer.y = 210;\r\n        this._container.addChild(this._levelsContainer);\r\n    }\r\n\r\n\r\n    /**Returns level data from the given index. */\r\n    private _getDataByIndex(index:number) {\r\n        //flatten level data, and get data\r\n        let flatten = this._levelsData.reduce((acc, next) => acc.concat(next));\r\n        return flatten[index];\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    private _onLevelClick(e) {\r\n         //get button index\r\n        let index = this._levelButtons.indexOf(e.target);\r\n\r\n        if(index == -1) return;\r\n\r\n        \r\n        //set the level index\r\n        const data = DataManager.getLevelDataByIndex(index);\r\n        if(data == null) return;\r\n        if(!data.unlocked) return;\r\n\r\n        SoundManager.playSFX(LoadManager.Sounds.BubblesFade);\r\n        SoundManager.fadeOutAmbience(\"ambience\");\r\n\r\n        //make sure this level is UNLOCKED\r\n        this._game.changeCurrentLevel(data);\r\n        //go to intermediary screen\r\n        const intermediary = ScreenManager.getScreenByKey(\"intermediary\") as IntermediaryScreen;\r\n        new Promise(async(res) => {\r\n            intermediary.Text = data.name;\r\n            await ScreenManager.setCurrentScreen(intermediary, this._game.Stage);\r\n            intermediary.queueNextScreen(\"game\", 1000);\r\n\r\n            res();\r\n        });\r\n    }\r\n\r\n    private _onLevelHover(e) {\r\n        //find the button data\r\n        //get button index\r\n        let index = this._levelButtons.indexOf(e.target);\r\n        \r\n        if(index != -1) {\r\n            const data = this._getDataByIndex(index);\r\n            if(data != null) {\r\n                if(data.unlocked)\r\n                    this.LevelText = data.name;\r\n            }\r\n        }\r\n\r\n    }\r\n    private _onLevelUnhover(e) {\r\n        this.LevelText = \"\";\r\n    }\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public get Container() { return this._container; }\r\n    public set LevelText(value:string) {\r\n        if(value == \"\") {\r\n            this._levelTextContainer.removeAllChildren();\r\n            return;\r\n        }\r\n        //create the text\r\n        const text = Sprites.generateBitmapText(value, LoadManager.Spritesheets.TypographyWhite);\r\n        (text as any).scale = 0.6;\r\n        //load into container\r\n        this._levelTextContainer.removeAllChildren();\r\n        this._levelTextContainer.addChild(text);\r\n\r\n        //put container at bottom\r\n        this._levelTextContainer.x = (this._game.StageWidth / 2) - ((text.getBounds().width / 2) * 0.6);\r\n        this._levelTextContainer.y = this._game.StageHeight - 30;\r\n    }\r\n}","import { Layout } from \"./Layout\";\r\n\r\n/**Uses custom classes and the createjs library to help easily build up ui interfaces with DisplayObjects. */\r\nexport class Container {\r\n    private _sprites:{ [key:string]:createjs.DisplayObject };\r\n    private _container:createjs.Container;\r\n    private _layout:Layout;\r\n\r\n    constructor(layout:{ direction:string, alignment:string, crossAlignment:string, spacing:number } = null) {\r\n        this._sprites = { };\r\n        this._container = new createjs.Container();\r\n        this._layout = (layout != null) ? new Layout(this._container, layout.direction, layout.alignment, layout.crossAlignment, layout.spacing)  : Layout.MAKE_VERTICAL_CENTER(this._container);\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public add(key:string, sprite:createjs.DisplayObject, updateLayout:boolean=true):boolean {\r\n        if(this._sprites[key] != null) return false;\r\n        this._sprites[key] = sprite.clone();\r\n\r\n        if(updateLayout) this._layout.buildLayout(true, ...Object.keys(this._sprites).map(k => this._sprites[k]));\r\n        return true;\r\n    }\r\n\r\n    public addMany(sprites:{ [key:string]:createjs.DisplayObject }) {\r\n        Object.keys(sprites).forEach(k => {\r\n            this.add(k, sprites[k], false);\r\n        });\r\n\r\n        this._layout.buildLayout(true, ...Object.keys(this._sprites).map(k => this._sprites[k]));\r\n    }\r\n\r\n    public changeLayout(layout:Layout) {\r\n        this._layout = layout;\r\n    }\r\n\r\n    /**In case of wandering or reusable sprites, call them back to this layout! */\r\n    public checkoutSprites() {\r\n        this._layout.buildLayout(true, ...Object.keys(this._sprites).map(k => this._sprites[k]));\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public get Container():createjs.Container { return this._container; }\r\n    public get Sprites() { return this._sprites; }\r\n\r\n    public static get LAYOUT_OPTIONS() {\r\n        return {\r\n            //column layouts\r\n            //-- left aligned\r\n            \"ColumnLeftTop\" : {direction:Layout.VERTICAL, alignment:Layout.START, crossAlignment:Layout.START, spacing:5},\r\n            \"ColumnLeftCenter\" : {direction:Layout.VERTICAL, alignment:Layout.START, crossAlignment:Layout.CENTER, spacing:5},\r\n            \"ColumnLeftBottom\" : {direction:Layout.VERTICAL, alignment:Layout.START, crossAlignment:Layout.END, spacing:5},\r\n            //-- center aligned\r\n            \"ColumnCenterTop\" : {direction:Layout.VERTICAL, alignment:Layout.CENTER, crossAlignment:Layout.START, spacing:5},\r\n            \"ColumnCenterCenter\" : {direction:Layout.VERTICAL, alignment:Layout.CENTER, crossAlignment:Layout.CENTER, spacing:5},\r\n            \"ColumnCenterBottom\" : {direction:Layout.VERTICAL, alignment:Layout.CENTER, crossAlignment:Layout.END, spacing:5},\r\n            //-- right aligned\r\n            \"ColumnRightTop\" : {direction:Layout.VERTICAL, alignment:Layout.END, crossAlignment:Layout.START, spacing:5},\r\n            \"ColumnRightCenter\" : {direction:Layout.VERTICAL, alignment:Layout.END, crossAlignment:Layout.CENTER, spacing:5},\r\n            \"ColumnRightBottom\" : {direction:Layout.VERTICAL, alignment:Layout.END, crossAlignment:Layout.END, spacing:5}\r\n        };\r\n    }\r\n}","import { Game } from \"../../Game\";\r\n\r\n/**Used to layout createjs display objects. */\r\nexport class Layout {\r\n    //justify content\r\n    public static HORIZONTAL:string = \"horizontal\";\r\n    public static VERTICAL:string = \"vertical\";\r\n    //align items\r\n    public static START:string = \"start\";\r\n    public static END:string = \"end\";\r\n    public static CENTER:string = \"center\";\r\n\r\n    private _parent:createjs.Container;\r\n    private _items:createjs.DisplayObject[];\r\n\r\n    private _direction:string;\r\n    private _alignment:string;\r\n    private _crossAlignment:string;\r\n    private _spacing:number;\r\n\r\n    constructor(parent:createjs.Container, direction:string, alignment:string, crossAlignment:string, spacing:number = 5) {\r\n        this._parent = parent;\r\n        this._items = [];\r\n\r\n        this._direction = direction;\r\n        this._alignment = alignment;\r\n        this._crossAlignment = crossAlignment;\r\n        this._spacing = spacing;\r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public buildLayout(addToParent:boolean=true, ...items:createjs.DisplayObject[]) {\r\n        if(items.length <= 0) return;\r\n\r\n        this._items = items;\r\n\r\n        if(addToParent) {\r\n            this._parent.removeAllChildren();\r\n        }\r\n        \r\n\r\n        if(this._direction == Layout.VERTICAL) {\r\n            let totalHeight = 0;\r\n            //ALIGNMENT\r\n            switch(this._alignment) {\r\n                case Layout.START : {\r\n                    for(let i = 0; i < items.length; i++) {\r\n                        const item:createjs.DisplayObject = items[i];\r\n                        item.x = 0;\r\n                        item.y = totalHeight;\r\n                        totalHeight += item.getBounds().height + this._spacing;\r\n                        if(addToParent) this._parent.addChild(item);\r\n                    }\r\n                    break;\r\n                }\r\n                case Layout.CENTER : {\r\n                    for(let i = 0; i < items.length; i++) {\r\n                        const item:createjs.DisplayObject = items[i];\r\n                        item.x = (Game.WIDTH / 2) - (item.getBounds().width / 2);\r\n                        item.y = totalHeight;\r\n                        totalHeight += item.getBounds().height + this._spacing;\r\n                        if(addToParent) this._parent.addChild(item);\r\n                    }\r\n                    break;\r\n                }\r\n                case Layout.END : {\r\n                    for(let i = 0; i < items.length; i++) {\r\n                        const item:createjs.DisplayObject = items[i];\r\n                        item.x = Game.WIDTH - item.getBounds().width;\r\n                        item.y = totalHeight;\r\n                        totalHeight += item.getBounds().height + this._spacing;\r\n                        if(addToParent) this._parent.addChild(item);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n            //CROSS ALIGNMENT\r\n            //handle vertical alignment\r\n            switch(this._crossAlignment) {\r\n                case Layout.START : {\r\n                    break;\r\n                }\r\n                case Layout.CENTER : {\r\n                    totalHeight += items[items.length-1].getBounds().height;\r\n                    for(let i = 0; i < items.length; i++) {\r\n                        const item:createjs.DisplayObject = items[i];\r\n                        //decipher desired center\r\n                        item.y += (Game.HEIGHT / 2) - (totalHeight / 2);\r\n                    }\r\n                    break;\r\n                }\r\n                case Layout.END :  {\r\n                    totalHeight += items[items.length-1].getBounds().height;\r\n                    for(let i = 0; i < items.length; i++) {\r\n                        const item:createjs.DisplayObject = items[i];\r\n                        //decipher desired center\r\n                        item.y += Game.HEIGHT - totalHeight;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n\r\n        }\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    \r\n    /*--------------- HELPER FUNCTIONS ---------------*/\r\n    public static MAKE_VERTICAL_CENTER(container:createjs.Container) { return new Layout(container, Layout.VERTICAL, Layout.CENTER, Layout.CENTER, 5); }\r\n    public static MAKE_VERTICAL_START(container:createjs.Container) { return new Layout(container, Layout.VERTICAL, Layout.CENTER, Layout.START, 5); }\r\n\r\n}","import { Game } from \"../../Game\";\r\nimport { Sprites } from \"../Sprites\";\r\nimport { LoadManager } from \"../../managers/LoadManager\";\r\n\r\n/**Creates a display container for the game screen. */\r\nexport class GameScore {\r\n    private _game:Game;\r\n    private _container:createjs.Container;\r\n    private _bg:createjs.Shape;\r\n    private _txtTimer:createjs.DisplayObject;\r\n\r\n    private _timerContainer:createjs.Container;\r\n    private _timerTextContainer:createjs.Container;\r\n    private _fishRemainContainer:createjs.Container;\r\n    private _fishRemainTextContainer:createjs.Container;\r\n    private _scoreContainer:createjs.Container;\r\n    private _scoreTextContainer:createjs.Container;\r\n\r\n    //game conditions\r\n    private _useTimer:boolean = false;\r\n    private _useFishRemain:boolean = true;\r\n    private _useScore:boolean = true;\r\n\r\n    constructor(game:Game) {\r\n        this._game = game;\r\n        //create the initial objects\r\n        this._container = new createjs.Container();\r\n        this._bg = new createjs.Shape();\r\n        this._bg.graphics.beginFill(\"#000000\");\r\n        this._bg.graphics.drawRect(0, 0, this._game.StageWidth, 40);\r\n        this._bg.graphics.endFill();\r\n        this._bg.cache(0, 0, this._game.StageWidth, 40);\r\n        this._container.addChild(this._bg);\r\n\r\n        //create the container objects\r\n        //timer\r\n        this._timerContainer = new createjs.Container();\r\n        this._timerContainer.x += 10;\r\n        const timerSprite = Sprites.Graphics.Timer.clone();\r\n        this._timerContainer.addChild(timerSprite);\r\n        this._timerTextContainer = new createjs.Container();\r\n        this._timerTextContainer.y += 8;\r\n        this._timerTextContainer.x += Sprites.Graphics.Timer.getBounds().width + 10;\r\n        this._timerContainer.addChild(this._timerTextContainer);\r\n        this._container.addChild(this._timerContainer);\r\n\r\n        //fish remain\r\n        this._fishRemainContainer = new createjs.Container();\r\n        const fishRemainSprite = Sprites.Graphics.FishRemain.clone();\r\n        this._fishRemainContainer.addChild(fishRemainSprite);\r\n        this._fishRemainTextContainer = new createjs.Container();\r\n        this._fishRemainTextContainer.y += 8;\r\n        this._fishRemainTextContainer.x += Sprites.Graphics.FishRemain.getBounds().width + 10;\r\n        this._fishRemainContainer.addChild(this._fishRemainTextContainer);\r\n        this._container.addChild(this._fishRemainContainer);\r\n\r\n        //score\r\n        this._scoreContainer = new createjs.Container();\r\n        this._scoreContainer.x = this._game.StageWidth - Sprites.Graphics.Score.getBounds().width - 40;\r\n        const scoreSprite = Sprites.Graphics.Score.clone();\r\n        this._scoreContainer.addChild(scoreSprite);\r\n        this._scoreTextContainer = new createjs.Container();\r\n        this._scoreTextContainer.y += 8;\r\n        this._scoreTextContainer.x += Sprites.Graphics.Score.getBounds().width + 10;\r\n        this._scoreContainer.addChild(this._scoreTextContainer);\r\n        this._container.addChild(this._scoreContainer);\r\n        \r\n    }\r\n\r\n    /*--------------- METHODS ------------------------*/\r\n    public startHUD(showScore:boolean, showFishRemain:boolean, showTimer:boolean) {\r\n        this._useScore = showScore;\r\n        this._useFishRemain = showFishRemain;\r\n        this._useTimer = showTimer;\r\n\r\n        if(this._useScore) this._container.addChild(this._scoreContainer);\r\n        else this._container.removeChild(this._scoreContainer);\r\n\r\n        if(this._useFishRemain) this._container.addChild(this._fishRemainContainer);\r\n        else this._container.removeChild(this._fishRemainContainer);\r\n\r\n        if(this._useTimer) this._container.addChild(this._timerContainer);\r\n        else this._container.removeChild(this._timerContainer);\r\n    }\r\n    /*--------------- ABSTRACTS ----------------------*/\r\n    /*--------------- EVENTS -------------------------*/\r\n    /*--------------- OVERRIDES ----------------------*/\r\n    public update(gameTime:number) {\r\n        \r\n    }\r\n    /*--------------- GETTERS & SETTERS --------------*/\r\n    public get Container() { return this._container; }\r\n\r\n}"]}