!function a(o,s,c){function u(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return u(o[t][1][e]||e)},i,i.exports,a,o,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"success",value:function(e){console.log("%c "+e,"color:seagreen; font-size:1.1em; font-weight:bold; border-left: solid 3px seagreen;")}},{key:"message",value:function(e){console.log("%c "+e,"color:#1E265C; font-size:1.1em; font-weight:bold; border-left: solid 3px #1E265C;")}},{key:"error",value:function(e){console.log("%c "+e,"color:red; font-size:1.1em; border-left: solid 3px red;")}}]),e}();n.Logging=i},{}],2:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./managers/LoadManager"),s=e("./managers/ProgressManager"),c=e("./managers/ScreenManager"),u=e("./screens/SplashScreen"),l=e("./screens/MenuScreen"),h=e("./screens/GameScreen"),p=e("./screens/EndScreen"),_=e("./Functions"),f=e("./ui/Sprites"),g=e("./screens/IntermediaryScreen"),d=e("./managers/DataManager"),r=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._canvas=e,this._canvas.width=r.WIDTH,this._canvas.height=r.HEIGHT,this._lastGameTime=-1,this._scaling=r.HEIGHT/1024,new Promise(function(n,e){return a(t,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Readying stage!"),this._stage=new createjs.StageGL(this._canvas,{antialias:!0}),this._stage.setClearColor("#000000"),this._stage.enableMouseOver(10),this._stage.update(),console.log(this._stage,this._canvas),c.ScreenManager.registerScreen("splash",new u.SplashScreen(this)),c.ScreenManager.setCurrentScreen("splash",this._stage),t=c.ScreenManager.getScreenByKey("splash"),this._stage.addEventListener(o.LoadManager.ASSETS_UPDATED,function(e){console.log(o.LoadManager.Percentage),t.Text=Math.ceil(100*o.LoadManager.Percentage).toString()}),e.next=12,o.LoadManager.loadAssets("assets/manifest.json",this._stage).catch(function(e){console.warn("Error loading assets:",e)});case 12:return _.Logging.success("Assets Loaded Successfully!"),e.next=15,d.DataManager.loadWorldsData("assets/data/levels.json").catch(function(e){_.Logging.error(e)});case 15:return e.next=17,s.ProgressManager.loadWorldsData(d.DataManager.WorldsData);case 17:return this.changeCurrentLevel(d.DataManager.getLevelDataByIndex(0)),_.Logging.success("Level Data Loaded Successfully!"),e.next=21,f.Sprites.setup();case 21:c.ScreenManager.registerScreen("menu",new l.MenuScreen(this)),c.ScreenManager.registerScreen("game",new h.GameScreen(this)),c.ScreenManager.registerScreen("end",new p.EndScreen(this)),c.ScreenManager.registerScreen("intermediary",new g.IntermediaryScreen(this)),c.ScreenManager.setCurrentScreen("menu",this._stage),createjs.Ticker.framerate=r.FRAME_RATE,createjs.Ticker.on("tick",this.update,this),n();case 29:case"end":return e.stop()}},e,this)}))})}return i(r,[{key:"changeCurrentLevel",value:function(e){this._currentLevel=e}},{key:"changeCurrentScore",value:function(e){this._currentScore=e}},{key:"_scaleChildren",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];n.scaleX=n.scaleY=this._scaling,null!=n.children&&null!=n.scaleX&&this._scaleChildren(n)}}},{key:"update",value:function(e){var t=-1!=this._lastGameTime?createjs.Ticker.getMeasuredFPS()-this._lastGameTime:1;this._lastGameTime=createjs.Ticker.getMeasuredFPS(),null!=c.ScreenManager.CurrentScreen&&c.ScreenManager.CurrentScreen.update(t),this._stage.update()}},{key:"StageWidth",get:function(){return this._canvas.width}},{key:"StageHeight",get:function(){return this._canvas.height}},{key:"Stage",get:function(){return this._stage}},{key:"Scaling",get:function(){return this._scaling}},{key:"CurrentLevelData",get:function(){return this._currentLevel}},{key:"CurrentScoreData",get:function(){return this._currentScore}}],[{key:"FRAME_RATE",get:function(){return 30}},{key:"WIDTH",get:function(){return 576}},{key:"HEIGHT",get:function(){return 1024}}]),r}();n.Game=r},{"./Functions":1,"./managers/DataManager":11,"./managers/LoadManager":12,"./managers/ProgressManager":13,"./managers/ScreenManager":14,"./screens/EndScreen":15,"./screens/GameScreen":16,"./screens/IntermediaryScreen":17,"./screens/MenuScreen":18,"./screens/SplashScreen":20,"./ui/Sprites":22}],3:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Functions"),r=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}return i(r,null,[{key:"createPoolObject",value:function(e,t){var n={type:t,obj:e,active:!1};return r.Pool.push(n),n}},{key:"checkout",value:function(e){var t=r._getObjectByType(e);return null!=t?(t.active=!0,t.obj):null}},{key:"return",value:function(e){var t=r._getObjectByObj(e);return null!=t&&!(t.active=!1)}},{key:"releaseAllObjects",value:function(){r._pool.forEach(function(e){r.return(e.obj)})}},{key:"_getObjectByType",value:function(t){var e=r._pool.find(function(e){return e.type==t&&!e.active});return null==e&&a.Logging.error("Object not found in pool, or pool is exhausted.  Return some objects."),e}},{key:"_getObjectByObj",value:function(t){return r._pool.find(function(e){return e.obj==t})}},{key:"Pool",get:function(){return null==r._pool&&(r._pool=[]),r._pool}}]),r}();n.ObjectPool=r},{"./Functions":1}],4:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Entity"),o=e("../managers/LoadManager"),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,o.LoadManager.Spritesheets.Kitty_Spritesheet));return n._gameScreen=t,n._speed=3,n._fishCaughtMultiplier=.05,n._caughtFish=[],n._isGrabbing=!1,n._isRising=!1,n._isInjured=!1,n._hasReachedSurface=!0,n._sprite.gotoAndPlay(r.ANIMATION.Idle),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.Entity),i(r,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"grab",value:function(){var t=this;if(!this._gameScreen.IsGamelogicPaused&&this._hasReachedSurface){this._isGrabbing=!0,this._hasReachedSurface=!1,this.X=this._gameScreen.Game.Stage.mouseX;var e=this._gameScreen.Game.Stage.mouseY/2*this.Speed;this._catYTween=createjs.Tween.get(this._sprite).to({y:this._gameScreen.Game.Stage.mouseY},e,createjs.Ease.circIn).call(function(){t._isGrabbing=!1,t._sprite.gotoAndPlay(r.ANIMATION.Grab),t._sprite.on("animationend",function(){t._sprite.gotoAndPlay(r.ANIMATION.Hold)},!0);var e=t._gameScreen.tryToGrabFishes(t.X,t.Y);0<e.length?t.caught(e):t.returnToSurface()})}}},{key:"returnToSurface",value:function(){var e=this;this._sprite.gotoAndPlay(r.ANIMATION.Idle),createjs.Tween.removeTweens(this._sprite);var t=this.Y/2*this.Speed;this._catYTween=createjs.Tween.get(this._sprite).wait(150).to({y:20},t,createjs.Ease.linear).call(function(){e.reachSurface()})}},{key:"caught",value:function(e){var t=this;if(!(e.length<=0)){var n=!(this._isRising=!0);if(e.forEach(function(e){-1==t._caughtFish.indexOf(e)&&(n=!0,e.catch(),t._caughtFish.push(e),e.Y=t.Y)}),n){createjs.Tween.removeTweens(this._sprite);var r=this.Y*this.Speed;this._catYTween=createjs.Tween.get(this._sprite).wait(250).to({y:-20},r,createjs.Ease.linear).call(function(){t.reachSurface(),t._isRising=!1})}}}},{key:"drop",value:function(){this._caughtFish.forEach(function(e){return e.release()}),this._caughtFish=[]}},{key:"injure",value:function(){var e=this;this._isInjured=!0,createjs.Tween.removeTweens(this._sprite),this._sprite.gotoAndPlay(r.ANIMATION.Ow),this._catYTween=createjs.Tween.get(this._sprite).wait(15).to({y:20},500,createjs.Ease.linear).call(function(){e.reachSurface(),e._sprite.gotoAndPlay(r.ANIMATION.Idle)})}},{key:"hitEnemy",value:function(){this.injure(),this.drop()}},{key:"reachSurface",value:function(){var t=this;null!=this._caughtFish&&(this._caughtFish.forEach(function(e){t._gameScreen.collectFish(e)}),this._caughtFish=[]),this._hasReachedSurface=!0,this._isInjured=!1,this._isRising=!1,this._isGrabbing=!1}},{key:"update",value:function(e){var t=this;if(!this._gameScreen.IsGamelogicPaused){if(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"update",this).call(this,e),this._isRising&&!this._isInjured){var n=this._gameScreen.tryToGrabFishes(this.X,this.Y);0<n.length&&this.caught(n)}if(this._isRising||this._isGrabbing)if(!this._isInjured)if(this._gameScreen.hasHitAPuffer(this.X,this.Y))return void this.hitEnemy();null!=this._caughtFish&&this._caughtFish.forEach(function(e){e.Y=t.Y-20})}}},{key:"Speed",get:function(){var e=0<this._caughtFish.length?1+(this._caughtFish.length+this._fishCaughtMultiplier):1;return console.log(e),e*this._speed},set:function(e){this._speed=e}}],[{key:"GRAB_RANGE",get:function(){return 120}},{key:"ANIMATION",get:function(){return Object.freeze({Idle:"kittyIdle",Death:"kittyIdle",Grab:"kittyIdle",Hold:"kittyIdle",Ow:"kittyIdle"})}}]),r}();n.Cat=r},{"../managers/LoadManager":12,"./Entity":5}],5:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._game=e,this._sprite=new createjs.Sprite(t),this._direction={x:1,y:1},this._isIgnoringCollision=!1,this._ignoreCollisionTimer=0}return r(i,[{key:"create",value:function(e){return null==e?this._game.Stage.addChild(this._sprite):e.addChild(this._sprite),this}},{key:"destroy",value:function(){return null==this._sprite||null==this._sprite.parent?null:(this._sprite.parent.removeChild(this._sprite),this)}},{key:"update",value:function(e){this._isIgnoringCollision&&(this._ignoreCollisionTimer++,this._ignoreCollisionTimer>i.IGNORE_COLLISION&&(this._isIgnoringCollision=!1))}},{key:"startIgnoreCollision",value:function(){this._isIgnoringCollision=!0}},{key:"testStageBounds",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t={x:this._sprite.regX,y:this._sprite.regY};null!=e&&(t={x:0<this._direction.x?this.Bounds.Width*e.x:this.Bounds.Width*(1-e.x),y:0<this._direction.y?this.Bounds.Height*e.y:this.Bounds.Height*(1-e.y)});var n=this._game.StageWidth,r=(this._game.StageHeight,0<this._direction.x?this.Bounds.Width-t.x:-t.x);0<this._direction.y&&this.Bounds.Height,t.y;return this.X+r>n?i.HIT.Right:this.X+r<0?i.HIT.Left:void 0}},{key:"Game",get:function(){return this._game}},{key:"Sprite",get:function(){return this._sprite}},{key:"Parent",get:function(){return this._sprite.parent}},{key:"X",get:function(){return this._sprite.x},set:function(e){this._sprite.x=e}},{key:"Y",get:function(){return this._sprite.y},set:function(e){this._sprite.y=e}},{key:"DirectionX",set:function(e){var t=this._direction.x;this._direction.x=e,this._direction.x!=t&&(this._sprite.scaleX*=-1)},get:function(){return this._direction.x}},{key:"Bounds",get:function(){var e=this._sprite.getBounds();return{Width:e.width,Height:e.height}}},{key:"IsIgnoringCollision",get:function(){return this._isIgnoringCollision}}],[{key:"IGNORE_COLLISION",get:function(){return 20}},{key:"HIT",get:function(){return Object.freeze({Top:0,Right:1,Bottom:2,Left:3})}}]),i}();n.Entity=i},{}],6:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Entity"),s=e("../managers/LoadManager"),c=e("../Functions"),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t||s.LoadManager.Spritesheets.Peeper_Spritesheet));return n._speed=1,n._isCaught=!1,n._isReturning=!1,n._sprite.gotoAndPlay(r.ANIMATION.Slow),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.Entity),i(r,[{key:"setNaturalY",value:function(){this._naturalY=this.Y}},{key:"catch",value:function(){this._isCaught||(c.Logging.message("Fish was grabbed!"),this._isCaught=!0,this._sprite.gotoAndPlay(r.ANIMATION.Panic))}},{key:"release",value:function(){this._isCaught=!1,this._isReturning=!0}},{key:"testHit",value:function(e,t){return this._sprite.hitTest(e,t)}},{key:"destroy",value:function(){return this._isCaught=!1,this._sprite.gotoAndPlay(r.ANIMATION.Slow),this.disable(),a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){if(a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"update",this).call(this,e),this._isCaught||(this.X+=this._speed*this._direction.x),this._isReturning)if(30<Math.abs(this.Y-this._naturalY)){var t=this.Y>this._naturalY;this.Y+=t?-10:10}else this._isReturning=!1,this._sprite.gotoAndPlay(r.ANIMATION.Slow);if(!this.IsIgnoringCollision)switch(this.testStageBounds({x:.5,y:.5})){case o.Entity.HIT.Right:this.DirectionX*=-1,this.startIgnoreCollision(),this.X-=5-this.Bounds.Width;break;case o.Entity.HIT.Left:this.DirectionX*=-1,this.startIgnoreCollision(),this.X+=5-this.Bounds.Width}}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"Speed",get:function(){return this._speed},set:function(e){this._speed=e}}],[{key:"ANIMATION",get:function(){return Object.freeze({Slow:"fishIdle",Fast:"fishIdle",Panic:"fishPanic"})}}]),r}();n.Fish=r},{"../Functions":1,"../managers/LoadManager":12,"./Entity":5}],7:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Entity"),o=e("../managers/LoadManager"),s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,o.LoadManager.Spritesheets.Puffer_Spritesheet));return t._cooldown=40,t._currentCooldown=0,t._speed=1,t._isCaught=!1,t._sprite.gotoAndPlay(n.ANIMATION.Idle),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Entity),r(n,[{key:"puff",value:function(){this._sprite.gotoAndPlay(n.ANIMATION.Angry),this._currentCooldown=this._cooldown}},{key:"testHit",value:function(e,t,n){return e>=this.X-n.Bounds.Width&&e<=this.X+this.Bounds.Width&&t>=this.Y-n.Bounds.Height&&t<=this.Y+this.Bounds.Height}},{key:"destroy",value:function(){return this._isCaught=!1,this._sprite.gotoAndPlay(n.ANIMATION.Idle),this.disable(),i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){if(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"update",this).call(this,e),this._isCaught||(this.X+=this._speed*e*this._direction.x),0<=this._currentCooldown&&(this._currentCooldown--,0==this._currentCooldown&&this._sprite.gotoAndPlay(n.ANIMATION.Recover)),!this.IsIgnoringCollision)switch(this.testStageBounds({x:.5,y:.5})){case a.Entity.HIT.Right:this._direction.x*=-1,this._sprite.scaleX*=-1,this.startIgnoreCollision(),this.X-=5-this.Bounds.Width;break;case a.Entity.HIT.Left:this._direction.x*=-1,this._sprite.scaleX*=-1,this.startIgnoreCollision(),this.X+=5-this.Bounds.Width}}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"Type",get:function(){return"Puffer"}},{key:"Speed",get:function(){return this._speed},set:function(e){this._speed=e}}],[{key:"ANIMATION",get:function(){return Object.freeze({Idle:"pufferIdle",Angry:"pufferAngry",Recover:"pufferRecover"})}}]),n}();n.Puffer=s},{"../managers/LoadManager":12,"./Entity":5}],8:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../managers/LoadManager"),a=e("./Special"),o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i.LoadManager.Spritesheets.Persephone_Spritesheet));return t._sprite.gotoAndPlay(n.SPEC_ANIMATION.Idle),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Special),r(n,null,[{key:"SPEC_ANIMATION",get:function(){return Object.freeze({Idle:"persIdle"})}}]),n}();n.Persephone=o},{"../../managers/LoadManager":12,"./Special":9}],9:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Fish"),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n._isOnMainPage=!1,n._resetAttentionSpan(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.Fish),i(r,[{key:"setMainPage",value:function(e){this._isOnMainPage=e,this.X=Math.floor(Math.random()*(576-this.Sprite.getBounds().width)),this.Y=Math.floor(Math.random()*(1024-this.Sprite.getBounds().height)),this.Sprite.regX=this.Sprite.getBounds().width/2}},{key:"_resetAttentionSpan",value:function(){this._attnSpanDuration=100*Math.random()+100,this._desiredX=Math.floor(Math.random()*(576-this.Sprite.getBounds().width)),this._desiredY=Math.floor(Math.random()*(1024-this.Sprite.getBounds().height)),0<this.DirectionX&&this._desiredX<this.X&&(this.DirectionX*=-1),this.DirectionX<0&&this._desiredX>this.X&&(this.DirectionX*=-1)}},{key:"update",value:function(e){if(this._isOnMainPage){if(this._attnSpanDuration<=0?this._resetAttentionSpan():this._attnSpanDuration--,60<Math.abs(this.X-this._desiredX)){var t=this.X>this._desiredX;this.X+=t?-this.Speed:this.Speed}if(30<Math.abs(this.Y-this._desiredY)){var n=this.Y>this._desiredY;this.Y+=n?-this.Speed:this.Speed}}else(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"update",this).call(this,e)}}]),r}();n.Special=r},{"../Fish":6}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Game");document.addEventListener("DOMContentLoaded",function(){new r.Game(document.getElementById("game-canvas"))})},{"./Game":2}],11:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}return r(i,null,[{key:"loadWorldsData",value:function(i){var e=this;return new Promise(function(n,r){return a(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i).then(function(e){return e.json()}).then(function(e){t._worldsData=e,n(t._worldsData)}).catch(function(e){r("Could not load world data! "+e)});case 2:case"end":return e.stop()}},e,this)}))})}},{key:"getLevelDataByIndex",value:function(e){var t=[].concat.apply([],i._worldsData.worlds);return e<t.length?t[e]:null}},{key:"getLevelIndexByData",value:function(e){return[].concat.apply([],i._worldsData.worlds).indexOf(e)}},{key:"getNextLevel",value:function(e){var t=e;return null!=e&&(t=this.getLevelIndexByData(e)),this.getLevelDataByIndex(t+1)}},{key:"getIndexData",value:function(e){for(var t=0;t<i._worldsData.worlds.length;t++)for(var n=i._worldsData.worlds[t],r=0;r<n.length;r++)if(n[r]==e)return{world:t,level:r};return{world:-1,level:-1}}},{key:"WorldsData",get:function(){return i._worldsData}},{key:"FlatWorldData",get:function(){return[].concat.apply([],i._worldsData.worlds)}}]),i}();n.DataManager=i},{}],12:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}return r(a,null,[{key:"reset",value:function(){a._sheetsTotal=0,a._sheetsLoaded=0,a._percentage=0,a._totalAssetsLoaded=0,a._totalAssets=0}},{key:"loadAssets",value:function(r,e){var i=this;return a.reset(),a._stage=e,new Promise(function(t,n){return o(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a._preloadManager=new createjs.LoadQueue,createjs.Sound.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin,createjs.FlashAudioPlugin]),createjs.Sound.alternateExtensions=["mp3","wav"],a._preloadManager.installPlugin(createjs.Sound),a._preloadManager.on("fileload",a._onLoaded,a),a._preloadManager.on("complete",a._onComplete,a),a._preloadManager.on("error",a._onError,a),fetch(r).then(function(e){return e.json()}).then(function(e){a._preloadManager.setMaxConnections(1),a._preloadManager.loadManifest(e),a._stage.addEventListener(a.ASSETS_LOADED,function(){t()})}).catch(function(){a.emitErrorEvent(),n("Could not load assets!")});case 8:case"end":return e.stop()}},e,this)}))})}},{key:"emitLoadedEvent",value:function(){null!=a._stage&&a._stage.dispatchEvent(a.AssetsLoadedEvent)}},{key:"emitErrorEvent",value:function(){null!=a._stage&&a._stage.dispatchEvent(a.AssetsFailedEvent)}},{key:"emitUpdatedEvent",value:function(){a._percentage=parseFloat((a._preloadManager.getItems(!0).length/a._preloadManager.getItems(!1).length).toFixed(2)),null!=a._stage&&a._stage.dispatchEvent(a.AssetsUpdatedEvent)}},{key:"_loadedSheet",value:function(e,t){a.Spritesheets[e]=t,a._sheetsLoaded++}},{key:"_onLoaded",value:function(t){switch(console.log("asset loaded: "+t.item.src+" type: "+t.item.type),t.item.type){case createjs.Types.JAVASCRIPT:a._sheetsTotal++;var n=window[t.item.id]._SpriteSheet;n.complete?a._loadedSheet(t.item.id,n):n.on("complete",function(e){a._loadedSheet(t.item.id,n),e.remove()});break;case createjs.Types.IMAGE:a.Images[t.item.id]=new createjs.Bitmap(t.item.src)}a.emitUpdatedEvent()}},{key:"_onComplete",value:function(t){if(a._preloadManager.removeAllEventListeners(),a._sheetsLoaded<a._sheetsTotal)setInterval(function(e){a._sheetsTotal<=a._sheetsLoaded&&(t.remove(),a.emitLoadedEvent())},100);else a.emitLoadedEvent()}},{key:"_onError",value:function(e){a.emitErrorEvent()}},{key:"ASSETS_LOADED",get:function(){return"onAssetsLoaded"}},{key:"ASSETS_FAILED",get:function(){return"onAssetsFailed"}},{key:"ASSETS_UPDATED",get:function(){return"onAssetsUpdated"}},{key:"Percentage",get:function(){return a._percentage}}]),a}();i.Spritesheets={},i.Images={},i._sheetsTotal=0,i._sheetsLoaded=0,i._percentage=0,i._totalAssetsLoaded=0,i._totalAssets=0,i.AssetsLoadedEvent=new createjs.Event(i.ASSETS_LOADED,!1,!0),i.AssetsFailedEvent=new createjs.Event(i.ASSETS_FAILED,!1,!0),i.AssetsUpdatedEvent=new createjs.Event(i.ASSETS_UPDATED,!1,!0),n.LoadManager=i},{}],13:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Functions"),a=function(){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}return r(a,null,[{key:"loadWorldsData",value:function(e){a._worldsData=e,console.log(e),a._levelsProgress=e.worlds.map(function(e){return[].concat.apply([],e).map(function(e){return{unlocked:!1,completed:!1}})}),a._specialsProgress=e.worlds.map(function(e){return[].concat.apply([],e).map(function(e){return e.special?{collected:!1,unlocks:e.unlocks}:null})}),a._levelsProgress[0][0].unlocked=!0,console.log("PROGRESS",a._levelsProgress,a._specialsProgress),a._readCookieData()}},{key:"completeLevel",value:function(e,t){var n=a._levelsProgress[e][t];if(null!=n){n.completed=!0;var r=a._levelsProgress[e][t+1];if(null!=r)r.unlocked=!0;else{var i=a._levelsProgress[e+1][0];null!=i&&(i.unlocked=!0)}a.saveCookieData()}}},{key:"unlockAll",value:function(){i.Logging.message("You're a dirty little cheater!"),a._levelsProgress=a._worldsData.worlds.map(function(e){return[].concat.apply([],e).map(function(e){return{unlocked:!0,completed:!1}})}),a._specialsProgress=a._worldsData.worlds.map(function(e){return[].concat.apply([],e).map(function(e){return e.special?{collected:!0,unlocks:e.unlocks}:null})})}},{key:"collectSpecial",value:function(e,t){var n=a._specialsProgress[e][t];null!=n&&(n.collected=!0,a.saveCookieData())}},{key:"saveCookieData",value:function(){console.log("MY NEW SAVE DATA",a.ProgressData),document.cookie="progData="+JSON.stringify(a.ProgressData)+";path=/"}},{key:"_readCookieData",value:function(){var e=a._getCookie("progData");if(null!=e&&""!=e){var t=JSON.parse(e);a._levelsProgress=t.levels,a._specialsProgress=t.specials}}},{key:"_getCookie",value:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}},{key:"ProgressData",get:function(){return{levels:a._levelsProgress,specials:a._specialsProgress}}}]),a}();n.ProgressManager=a},{"../Functions":1}],14:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var s=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../screens/Screen"),i=function(){function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}return r(o,null,[{key:"registerScreen",value:function(e,t){null==o._screensLookup[e]&&(o._screensLookup[e]=t)}},{key:"unregisterScreen",value:function(e){return null!=o._screensLookup[e]&&(o._screensLookup[e]=null,delete o._screensLookup[e],!0)}},{key:"setCurrentScreen",value:function(e,n){var r=this,i=null;if(null==(i=e instanceof c.Screen?e:o._screensLookup[e]))return Promise.resolve();var a=[];return null!=o._currentScreen&&a.push(new Promise(function(t){return s(r,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:createjs.Tween.get(o._currentScreen.Container).to({alpha:0},500,createjs.Ease.linear).call(function(){o._currentScreen.destroy(),o._currentScreen.disable(),t()});case 1:case"end":return e.stop()}},e,this)}))})),new Promise(function(t){return s(r,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a);case 2:(o._currentScreen=i).create(n),o._currentScreen.Container.alpha=0,o._currentScreen.disable(),console.log("FADE IN"),createjs.Tween.get(o._currentScreen.Container).to({alpha:1},1200,createjs.Ease.linear).call(function(){console.log("DONE"),o._currentScreen.enable(),t()});case 8:case"end":return e.stop()}},e,this)}))})}},{key:"getScreenByKey",value:function(e){return o._screensLookup[e]}},{key:"AllScreens",get:function(){return o._screensLookup}},{key:"CurrentScreen",get:function(){return o._currentScreen}}]),o}();i._screensLookup={},i._currentScreen=null,n.ScreenManager=i},{"../screens/Screen":19}],15:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};var o=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./Screen"),c=e("../managers/ScreenManager"),u=e("../ui/display/Container"),l=e("../managers/LoadManager"),h=e("../managers/DataManager"),p=e("../Functions"),r=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));t._game=e,t._isFail=!1;var n=new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_End,"bg");return t._container.addChild(n),t._buttonsContainer=new u.Container(u.Container.LAYOUT_OPTIONS.ColumnLeftBottom),t._buttonsContainer.addMany({btnTryAgain:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_End,"btnTryAgain"),btnNextLevel:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_End,"btnNextLevel"),btnMainMenu:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_End,"btnMainMenu")}),t._container.addChild(t._buttonsContainer.Container),t._completeSpr=new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_End,"complete"),t._failSpr=new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_End,"failure"),t._completeSpr.x=t._game.StageWidth/2-t._completeSpr.getBounds().width/2,t._completeSpr.y=220,t._failSpr.x=t._game.StageWidth/2-t._failSpr.getBounds().width/2,t._failSpr.y=.45*t._game.StageHeight,t._container.addChild(t._completeSpr),t._container.addChild(t._failSpr),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.Screen),i(r,[{key:"create",value:function(e){return a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"create",this).call(this,e)}},{key:"enable",value:function(){var e=this;a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"enable",this).call(this),this._buttonsContainer.Sprites.btnTryAgain.on("click",function(){e._game.changeCurrentLevel(e._game.CurrentLevelData),c.ScreenManager.setCurrentScreen("game",e._game.Stage)},this,!0),this._buttonsContainer.Sprites.btnNextLevel.on("click",function(){var n=h.DataManager.getNextLevel(e._game.CurrentLevelData);if(null!=n){p.Logging.error("WHERE AM I? "+n.name),e._game.changeCurrentLevel(n);var r=c.ScreenManager.getScreenByKey("intermediary");new Promise(function(t){return o(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.Text=n.name,e.next=3,c.ScreenManager.setCurrentScreen(r,this._game.Stage);case 3:r.queueNextScreen("game",1e3),t();case 5:case"end":return e.stop()}},e,this)}))})}else c.ScreenManager.setCurrentScreen("menu",e._game.Stage)},this,!0),this._buttonsContainer.Sprites.btnMainMenu.on("click",function(){c.ScreenManager.setCurrentScreen("menu",e._game.Stage)},this,!0)}},{key:"disable",value:function(){var t=this;this._completeSpr.visible=!this._isFail,this._failSpr.visible=this._isFail,Object.keys(this._buttonsContainer.Sprites).forEach(function(e){return t._buttonsContainer.Sprites[e].removeAllEventListeners()})}}]),r}();n.EndScreen=r},{"../Functions":1,"../managers/DataManager":11,"../managers/LoadManager":12,"../managers/ScreenManager":14,"../ui/display/Container":24,"./Screen":19}],16:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./TutorialCreator"),o=e("./Screen"),s=e("../managers/ScreenManager"),h=e("../ObjectPool"),c=e("../entities/Fish"),p=e("../entities/specials/Persephone"),_=e("../entities/Puffer"),f=e("../entities/Cat"),g=e("../ui/display/Container"),d=e("../ui/Sprites"),v=e("../Functions"),y=e("../managers/DataManager"),m=e("../managers/LoadManager"),S=e("../ui/partials/GameScore"),b=e("../managers/ProgressManager"),u=function(e){function u(e){i(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));t._game=e,t._fishes=[],t._puffers=[],t._remainingFish=-1,h.ObjectPool.createPoolObject(new f.Cat(t._game,t),C.CAT);for(var n=0;n<120;n++)h.ObjectPool.createPoolObject(new c.Fish(t._game),C.FISH);for(var r=0;r<30;r++)h.ObjectPool.createPoolObject(new _.Puffer(t._game),C.PUFFERFISH);return h.ObjectPool.createPoolObject(new p.Persephone(t._game),C.PERSEPHONE),t._cat=h.ObjectPool.checkout(C.CAT),t._cat.X=290,t._cat.Y=70,t._staticContainer=new g.Container,t._staticContainer.addMany({bg:new createjs.Sprite(m.LoadManager.Spritesheets.BG_Spritesheet,"bg1")}),t._fishContainer=new createjs.Container,t._pufferContainer=new createjs.Container,t._winContainer=new createjs.Container,t._gameScore=new S.GameScore(t._game),t._tutorialCreator=new a.TutorialCreator(t._game,t),t._pauseLogic=!1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,o.Screen),r(u,[{key:"tryToGrabFishes",value:function(e,t){for(var n=[],r=this._container.getObjectsUnderPoint(e,t,0),i=0;i<this._fishes.length;i++){var a=this._fishes[i];-1!=r.indexOf(a.Sprite)&&n.push(a)}return n}},{key:"hasHitAPuffer",value:function(e,t){for(var n=this._container.getObjectsUnderPoint(e,t,0),r=0;r<this._puffers.length;r++)if(-1!=n.indexOf(this._puffers[r].Sprite))return console.log("I HIT A PUFF"),this._puffers[r].puff(),!0;return!1}},{key:"collectFish",value:function(e){v.Logging.success("GOT FISH!");var t=e.destroy();null!=t&&(this._remainingFish--,this._fishes.splice(this._fishes.indexOf(t),1),this._remainingFish<=0&&(v.Logging.success("GAME IS OVER!"),this.win()))}},{key:"win",value:function(){var t=this;this.disable(),this._game.changeCurrentScore({totalFish:this._fishes.length,combos:10,time:100}),createjs.Tween.get(this._winContainer).to({y:this._game.StageHeight/2-25},600,createjs.Ease.elasticOut).wait(2e3).call(function(){s.ScreenManager.setCurrentScreen("end",t._game.Stage);var e=y.DataManager.getIndexData(t._game.CurrentLevelData);b.ProgressManager.completeLevel(e.world,e.level),b.ProgressManager.collectSpecial(e.world,e.level),t.reset()})}},{key:"pauseGameLogic",value:function(){this._pauseLogic=!0}},{key:"unpauseGameLogic",value:function(){this._pauseLogic=!1}},{key:"create",value:function(e){if(l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"create",this).call(this,e),this._staticContainer.checkoutSprites(),this._staticContainer.Sprites.bg.y=0,this._container.addChild(this._staticContainer.Container),this._container.addChild(this._fishContainer),this._container.addChild(this._pufferContainer),this._winBanner=new createjs.Shape,this._winBanner.graphics.beginFill("black"),this._winBanner.graphics.drawRect(0,0,this._game.StageWidth,50),this._winBanner.cache(0,0,this._game.StageWidth,50),this._winContainer.addChild(this._winBanner),this._winText=d.Sprites.generateBitmapText("Win!",m.LoadManager.Spritesheets.TypographyWhite),this._winContainer.addChild(this._winText),this._winText.x=this._game.StageWidth/2-this._winText.getBounds().width/2,this._container.addChild(this._winContainer),this._winContainer.y=this._game.StageHeight+50,this._winContainer.mouseEnabled=!1,this._cat.create(this._container),null!=this._game.CurrentLevelData){for(var t=0;t<this._game.CurrentLevelData.data.length;t++){var n=this._game.CurrentLevelData.data[t];switch(n.id){case C.PERSEPHONE:case C.FISH:var r=h.ObjectPool.checkout(n.id);r.create(this._fishContainer),null!=n.speed&&(r.Speed=n.speed),null!=n.x&&(r.X=n.x),null!=n.y&&(r.Y=n.y),null!=n.flip&&n.flip&&(r.DirectionX=-1),r.setNaturalY(),this._fishes.push(r);break;case C.PUFFERFISH:var i=h.ObjectPool.checkout(C.PUFFERFISH);i.create(this._pufferContainer),null!=n.speed&&(i.Speed=n.speed),null!=n.x&&(i.X=n.x),null!=n.y&&(i.Y=n.y),null!=n.flip&&n.flip&&(i.DirectionX=-1),this._puffers.push(i)}}this._remainingFish=this._fishes.length}null!=this._game.CurrentLevelData.tutorials&&this._tutorialCreator.queueTutorials(this._game.CurrentLevelData.tutorials),null!=this._game.CurrentLevelData.background?this._staticContainer.Sprites.bg.gotoAndStop(this._game.CurrentLevelData.background):this._staticContainer.Sprites.bg.gotoAndStop("bg1");var a=this._game.CurrentLevelData;console.log(this._game.CurrentLevelData);var o=!(null!=a.showScore&&!a.showScore),s=null!=a.duration,c=!(null!=a.showRemainingFish&&!a.showRemainingFish);return this._gameScore.startHUD(o,c,s),null}},{key:"destroy",value:function(){return this._cat.destroy(),this._fishes.forEach(function(e){e.destroy()}),this._puffers.forEach(function(e){e.destroy()}),h.ObjectPool.releaseAllObjects(),this.reset(),l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){if(!this._pauseLogic){var t=Math.min(1,e)+.5;this._fishes.forEach(function(e){e.update(t)}),this._puffers.forEach(function(e){e.update(t)}),this._cat.update(t),this._gameScore.update(e),l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"update",this).call(this,e)}}},{key:"enable",value:function(){this._container.on("click",this._cat.grab,this._cat)}},{key:"disable",value:function(){this._container.removeAllEventListeners()}},{key:"reset",value:function(){this._cat.X=290,this._fishes.forEach(function(e){h.ObjectPool.return(e)}),this._puffers.forEach(function(e){h.ObjectPool.return(e)}),h.ObjectPool.releaseAllObjects(),this._fishContainer.removeAllChildren(),this._pufferContainer.removeAllChildren(),this._fishes=[],this._puffers=[],l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"reset",this).call(this)}},{key:"Game",get:function(){return this._game}},{key:"Cat",get:function(){return this._cat}},{key:"Fishes",get:function(){return this._fishes}},{key:"IsGamelogicPaused",get:function(){return this._pauseLogic}}]),u}();n.GameScreen=u;var C=function(){function e(){i(this,e)}return r(e,null,[{key:"CAT",get:function(){return"cat"}},{key:"FISH",get:function(){return"fish"}},{key:"PUFFERFISH",get:function(){return"puffer"}},{key:"PERSEPHONE",get:function(){return"persephone"}}]),e}();n.POOL=C},{"../Functions":1,"../ObjectPool":3,"../entities/Cat":4,"../entities/Fish":6,"../entities/Puffer":7,"../entities/specials/Persephone":8,"../managers/DataManager":11,"../managers/LoadManager":12,"../managers/ProgressManager":13,"../managers/ScreenManager":14,"../ui/Sprites":22,"../ui/display/Container":24,"../ui/partials/GameScore":26,"./Screen":19,"./TutorialCreator":21}],17:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Screen"),o=e("../managers/ScreenManager"),s=e("../ui/Sprites"),c=e("../managers/LoadManager"),u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._game=e,t._text="",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Screen),r(n,[{key:"queueNextScreen",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3e3,r=window.setTimeout(function(){o.ScreenManager.setCurrentScreen(e,t._game.Stage),window.clearTimeout(r)},n)}},{key:"create",value:function(e){return this._bg=new createjs.Shape,this._bg.graphics.beginFill("#191919"),this._bg.graphics.drawRect(0,0,this._game.StageWidth,this._game.StageHeight),this._bg.graphics.endFill(),this._bg.cache(0,0,this._game.StageWidth,this._game.StageHeight),this._container.addChild(this._bg),this._textContainer=new createjs.Container,this._container.addChild(this._textContainer),""!=this._text&&(this._txtSprite=s.Sprites.generateBitmapText(this._text,c.LoadManager.Spritesheets.TypographyWhite),this._txtSprite.scale=.6,this._textContainer.addChild(this._txtSprite),this._textContainer.x=this._game.StageWidth/2-this._txtSprite.getBounds().width/2*.6,this._textContainer.y=this._game.StageHeight/2-this._txtSprite.getBounds().height/2),i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"create",this).call(this,e)}},{key:"destroy",value:function(){return this._textContainer.removeAllChildren(),i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"enable",value:function(){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"enable",this).call(this)}},{key:"disable",value:function(){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disable",this).call(this),this.reset()}},{key:"reset",value:function(){this.Text="",i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"reset",this).call(this)}},{key:"Text",set:function(e){this._text=e}}]),n}();n.IntermediaryScreen=u},{"../managers/LoadManager":12,"../managers/ScreenManager":14,"../ui/Sprites":22,"./Screen":19}],18:[function(e,t,n){"use strict";var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};var o=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./Screen"),c=e("../managers/ScreenManager"),u=e("../ui/Sprites"),l=e("../managers/LoadManager"),h=e("../ui/display/Container"),p=e("../Functions"),_=e("../ui/custom/LevelSelectDisplay"),f=e("./GameScreen"),g=e("../managers/DataManager"),d=e("../entities/specials/Persephone"),v=e("../managers/ProgressManager"),r=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));t._game=e,t._swipeContainer=new createjs.Container,t._staticContainer=new h.Container;var n=new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"bg");return t._staticContainer.addMany({bg:n}),t._mainContainer=new createjs.Container,t._logo=new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"logo"),t._logo.x=t._game.StageWidth-t._logo.getBounds().width-20,t._logo.y=.4*t._game.StageHeight,t._mainContainer.addChild(t._logo),t._mainButtonsContainer=new h.Container(h.Container.LAYOUT_OPTIONS.ColumnLeftBottom),t._mainButtonsContainer.addMany({btnNewGame:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"btnNewGame"),btnOptions:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"btnOptions"),btnLevelSelect:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"btnLevelSelect"),btnExit:new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"btnExit")}),t._mainContainer.addChild(t._mainButtonsContainer.Container),t._fancyFish=new createjs.Sprite(l.LoadManager.Spritesheets.Catfish_Main,"fancyFish"),t._fancyFish.x=t._game.StageWidth-t._fancyFish.getBounds().width-20,t._fancyFish.y=t._game.StageHeight-t._fancyFish.getBounds().height-20,t._mainContainer.addChild(t._fancyFish),t._fancyFish.visible=!1,t._optionsContainer=new h.Container,t._optionsContainer.addMany({txtOptions:u.Sprites.generateBitmapText("Options",l.LoadManager.Spritesheets.Typography),btnClearData:u.Sprites.Buttons.ClearData}),t._optionsContainer.Container.x-=t._game.StageWidth,t._clearedContainer=new h.Container,t._clearedContainer.add("txtCleared",u.Sprites.generateBitmapText("Data successfully cleared!",l.LoadManager.Spritesheets.Typography)),t._clearedContainer.Container.x-=t._game.StageWidth,t._clearedContainer.Container.y-=t._game.StageHeight,t._levelSelectDisplay=new _.LevelSelectDisplay(e),t._levelSelectDisplay.Container.x+=t._game.StageWidth,t._collectedContainer=new createjs.Container,t._collectedContainer.y+=t._game.StageHeight,t._collectibleFish=[],t._swipeSpeed=800,t._currentScreen="main",t._initialSwipePos={x:-1,y:-1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.Screen),i(r,[{key:"_onNewGame",value:function(){var e=this;p.Logging.message("Go to new game!");var n=g.DataManager.getLevelDataByIndex(0);this._game.changeCurrentLevel(n);var r=c.ScreenManager.getScreenByKey("intermediary");new Promise(function(t){return o(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.Text=n.name,e.next=3,c.ScreenManager.setCurrentScreen(r,this.Stage);case 3:r.queueNextScreen("game"),t();case 5:case"end":return e.stop()}},e,this)}))})}},{key:"_onOptions",value:function(){p.Logging.message("Go to options!"),createjs.Tween.get(this._swipeContainer).to({x:this._game.StageWidth},this._swipeSpeed,createjs.Ease.circOut),this._currentScreen="options"}},{key:"_onLevelSelect",value:function(){p.Logging.message("Go to level select!"),createjs.Tween.get(this._swipeContainer).to({x:-this._game.StageWidth},this._swipeSpeed,createjs.Ease.circOut),this._currentScreen="levelSelect"}},{key:"_onFish",value:function(){p.Logging.message("Go to fish!"),createjs.Tween.get(this._swipeContainer).to({y:-this._game.StageHeight},this._swipeSpeed,createjs.Ease.circOut),this._currentScreen="fish"}},{key:"_onExit",value:function(){p.Logging.message("Go to exit!")}},{key:"_onMain",value:function(){p.Logging.message("Go to main!"),createjs.Tween.get(this._swipeContainer).to({x:0,y:0},this._swipeSpeed,createjs.Ease.bounceOut),this._currentScreen="main"}},{key:"_onClearData",value:function(){var e=this;p.Logging.success("Cleared data!"),createjs.Tween.get(this._swipeContainer).to({x:this._game.StageWidth,y:this._game.StageHeight},this._swipeSpeed,createjs.Ease.cubicIn);var t=window.setTimeout(function(){createjs.Tween.get(e._swipeContainer).to({x:e._game.StageWidth,y:0},e._swipeSpeed,createjs.Ease.cubicInOut),window.clearInterval(t),e._currentScreen="options"},2e3)}},{key:"_onDragStart",value:function(e){var t=this;this._initialSwipePos={x:e.stageX,y:e.stageY},null!=this._dragTimer&&window.clearTimeout(this._dragTimer),this._dragTimer=setTimeout(function(){t._initialSwipePos={x:-1,y:-1},t._dragTimer=null},500)}},{key:"_onDragEnd",value:function(e){-1==this._initialSwipePos.x&&-1==this._initialSwipePos.y||(20<this._initialSwipePos.x-e.stageX?"options"==this._currentScreen&&this._onMain():this._initialSwipePos.x-e.stageX<-20?"levelSelect"==this._currentScreen&&this._onMain():this._initialSwipePos.y-e.stageY<-20&&"fish"==this._currentScreen&&this._onMain())}},{key:"create",value:function(e){return this._staticContainer.Sprites.bg.y=0,this._container.addChild(this._staticContainer.Container),this._container.addChild(this._swipeContainer),this._swipeContainer.addChild(this._mainContainer),this._swipeContainer.addChild(this._optionsContainer.Container),this._swipeContainer.addChild(this._clearedContainer.Container),this._swipeContainer.addChild(this._collectedContainer),this._swipeContainer.addChild(this._levelSelectDisplay.Container),a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"create",this).call(this,e)}},{key:"enable",value:function(){var t=this;console.log("LOAD IN MENU ACTIONS"),a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"enable",this).call(this),this._mainButtonsContainer.Sprites.btnNewGame.on("click",this._onNewGame,this,!0),this._mainButtonsContainer.Sprites.btnOptions.on("click",this._onOptions,this),this._mainButtonsContainer.Sprites.btnLevelSelect.on("click",this._onLevelSelect,this),this._mainButtonsContainer.Sprites.btnExit.on("click",this._onExit,this),this._fancyFish.on("click",this._onFish,this),u.Sprites.listenToClearData(),this._optionsContainer.Sprites.btnClearData.on(u.Sprites.CLEAR_DATA,this._onClearData,this),this._staticContainer.Sprites.bg.on("mousedown",this._onDragStart,this),this._staticContainer.Sprites.bg.on("click",this._onDragEnd,this),this._levelSelectDisplay.enable(),console.log("MY PROGRESS DATA AT NOw",v.ProgressManager.ProgressData);var e=[].concat.apply([],v.ProgressManager.ProgressData.specials).filter(function(e){return null!=e&&e.collected}).map(function(e){return e.unlocks});e.forEach(function(e){switch(e.toLowerCase()){case f.POOL.PERSEPHONE:t._collectibleFish.push(new d.Persephone(t._game))}}),console.log(e),this._collectibleFish.forEach(function(e){e.setMainPage(!0),e.create(t._collectedContainer),e.Speed=3*Math.random()+3}),e.length<=0?this._fancyFish.visible=!1:(this._fancyFish.visible=!0,this._fancyFish.alpha=0,createjs.Tween.get(this._fancyFish).to({alpha:1},500,createjs.Ease.circIn)),console.log("SPECIAL FISHIES?",this._collectibleFish),createjs.Tween.get(this._fancyFish,{loop:!0}).to({y:this._fancyFish.y-30},3e3,createjs.Ease.sineInOut).to({y:this._fancyFish.y},3e3,createjs.Ease.sineInOut),createjs.Tween.get(this._logo,{loop:!0}).wait(1200).to({y:this._logo.y-15},4500,createjs.Ease.sineInOut).to({y:this._logo.y},4800,createjs.Ease.sineInOut)}},{key:"disable",value:function(){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"disable",this).call(this),this._mainButtonsContainer.Sprites.btnNewGame.off("click",this._onNewGame),this._mainButtonsContainer.Sprites.btnOptions.off("click",this._onOptions),this._mainButtonsContainer.Sprites.btnLevelSelect.off("click",this._onLevelSelect),this._mainButtonsContainer.Sprites.btnExit.off("click",this._onExit),this._fancyFish.removeAllEventListeners(),u.Sprites.stopListenToClearData(),this._optionsContainer.Sprites.btnClearData.off(u.Sprites.CLEAR_DATA,this._onClearData),this._staticContainer.Sprites.bg.off("mousedown",this._onDragStart),this._staticContainer.Sprites.bg.off("click",this._onDragEnd),this._mainButtonsContainer.Sprites.btnNewGame.removeAllEventListeners(),this._mainButtonsContainer.Sprites.btnOptions.removeAllEventListeners(),this._mainButtonsContainer.Sprites.btnLevelSelect.removeAllEventListeners(),this._mainButtonsContainer.Sprites.btnExit.removeAllEventListeners(),this._staticContainer.Sprites.bg.removeAllEventListeners(),this._levelSelectDisplay.disable(),this.reset(),createjs.Tween.removeAllTweens()}},{key:"reset",value:function(){this._swipeContainer.x=0,this._swipeContainer.y=0,a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"reset",this).call(this)}},{key:"update",value:function(t){this._collectibleFish.forEach(function(e){return e.update(t)})}}]),r}();n.MenuScreen=r},{"../Functions":1,"../entities/specials/Persephone":8,"../managers/DataManager":11,"../managers/LoadManager":12,"../managers/ProgressManager":13,"../managers/ScreenManager":14,"../ui/Sprites":22,"../ui/custom/LevelSelectDisplay":23,"../ui/display/Container":24,"./GameScreen":16,"./Screen":19}],19:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=new createjs.Container}return r(e,[{key:"update",value:function(e){}},{key:"create",value:function(e){return this._stage=e,this._stage.addChild(this._container),this}},{key:"destroy",value:function(){return this._stage.removeChild(this._container),this}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"reset",value:function(){}},{key:"Container",get:function(){return this._container}},{key:"Stage",get:function(){return this._stage}}]),e}();n.Screen=i},{}],20:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Screen"),o=e("../ui/Sprites"),a=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t._game=e,t._textSpritesheet=new createjs.SpriteSheet({images:["assets/spritesheets/typography_white.png"],frames:[[0,329,27,44,0,0,0],[89,47,21,44,0,0,0],[63,47,23,44,0,0,0],[32,141,24,44,0,0,0],[89,94,21,44,0,0,0],[110,141,20,44,0,0,0],[34,94,26,44,0,0,0],[0,188,28,44,0,0,0],[152,282,14,44,0,0,0],[158,94,16,44,0,0,0],[59,141,24,44,0,0,0],[136,94,19,44,0,0,0],[0,47,32,44,0,0,0],[0,141,29,44,0,0,0],[0,235,28,44,0,0,0],[86,141,21,44,0,0,0],[0,282,28,44,0,0,0],[63,94,23,44,0,0,0],[156,141,17,44,0,0,0],[81,235,21,44,0,0,0],[30,329,27,44,0,0,0],[66,0,24,44,0,0,0],[0,0,35,44,0,0,0],[31,188,23,44,0,0,0],[31,235,22,44,0,0,0],[57,188,23,44,0,0,0],[108,329,18,44,0,0,0],[60,329,21,44,0,0,0],[159,47,17,44,0,0,0],[118,0,20,44,0,0,0],[129,329,18,44,0,0,0],[169,282,14,44,0,0,0],[113,47,20,44,0,0,0],[84,329,21,44,0,0,0],[171,329,12,44,0,0,0],[186,282,12,44,0,0,0],[113,94,20,44,0,0,0],[191,188,12,44,0,0,0],[0,94,31,44,0,0,0],[56,235,22,44,0,0,0],[60,282,22,44,0,0,0],[108,188,20,44,0,0,0],[85,282,20,44,0,0,0],[177,94,15,44,0,0,0],[184,0,15,44,0,0,0],[179,47,15,44,0,0,0],[31,282,22,44,0,0,0],[131,282,18,44,0,0,0],[38,0,25,44,0,0,0],[150,329,18,44,0,0,0],[108,282,20,44,0,0,0],[152,235,18,44,0,0,0],[35,47,25,44,0,0,0],[153,188,16,44,0,0,0],[83,188,22,44,0,0,0],[131,188,19,44,0,0,0],[93,0,22,44,0,0,0],[129,235,20,44,0,0,0],[133,141,20,44,0,0,0],[141,0,20,44,0,0,0],[105,235,21,44,0,0,0],[136,47,20,44,0,0,0],[194,141,12,44,0,0,0],[195,94,12,44,0,0,0],[197,47,12,44,0,0,0],[172,188,16,44,0,0,0],[176,141,15,44,0,0,0],[173,235,14,44,0,0,0],[164,0,17,44,0,0,0]],animations:{A:[0,0,!0],B:[1,1,!0],C:[2,2,!0],D:[3,3,!0],E:[4,4,!0],F:[5,5,!0],G:[6,6,!0],H:[7,7,!0],I:[8,8,!0],J:[9,9,!0],K:[10,10,!0],L:[11,11,!0],M:[12,12,!0],N:[13,13,!0],O:[14,14,!0],P:[15,15,!0],Q:[16,16,!0],R:[17,17,!0],S:[18,18,!0],T:[19,19,!0],U:[20,20,!0],V:[21,21,!0],W:[22,22,!0],X:[23,23,!0],Y:[24,24,!0],Z:[25,25,!0],a:[26,26,!0],b:[27,27,!0],c:[28,28,!0],d:[29,29,!0],e:[30,30,!0],f:[31,31,!0],g:[32,32,!0],h:[33,33,!0],i:[34,34,!0],j:[35,35,!0],k:[36,36,!0],l:[37,37,!0],m:[38,38,!0],n:[39,39,!0],o:[40,40,!0],p:[41,41,!0],q:[42,42,!0],r:[43,43,!0],s:[44,44,!0],t:[45,45,!0],u:[46,46,!0],v:[47,47,!0],w:[48,48,!0],x:[49,49,!0],y:[50,50,!0],z:[51,51,!0],0:[52,52,!0],1:[53,53,!0],2:[54,54,!0],3:[55,55,!0],4:[56,56,!0],5:[57,57,!0],6:[58,58,!0],7:[59,59,!0],8:[60,60,!0],9:[61,61,!0],".":[62,62,!0],",":[63,63,!0],"'":[64,64,!0],'"':[65,65,!0],"?":[66,66,!0],"!":[67,67,!0],$:[68,68,!0]}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.Screen),r(a,[{key:"create",value:function(n){var r=this,i=document.createElement("img");return i.onload=function(e){var t=new createjs.Bitmap(i);r._container.addChild(t),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"create",r).call(r,n)},i.src="assets/images/splash.png",this._textContainer=new createjs.Container,this._container.addChild(this._textContainer),this.Text="0",n.update(),this}},{key:"Text",set:function(e){this._textContainer.removeAllChildren();var t=o.Sprites.generateBitmapText(e,this._textSpritesheet);this._textContainer.addChild(t),this._container.addChild(this._textContainer),this._game.Stage.update()}}]),a}();n.SplashScreen=a},{"../ui/Sprites":22,"./Screen":19}],21:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var s=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../managers/LoadManager"),a=function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._game=e,this._gameScreen=t,this._tutorialQueue=[],this._youOverlay=new createjs.Sprite(i.LoadManager.Spritesheets.Tutorial_Spritesheet,"you"),this._fishOverlay=new createjs.Sprite(i.LoadManager.Spritesheets.Tutorial_Spritesheet,"fish"),this._pufferOverlay=new createjs.Sprite(i.LoadManager.Spritesheets.Tutorial_Spritesheet,"puffer"),this._manyOverlay=new createjs.Sprite(i.LoadManager.Spritesheets.Tutorial_Spritesheet,"many"),this._pauseOverlay=new createjs.Sprite(i.LoadManager.Spritesheets.Tutorial_Spritesheet,"pause"),this._specialOverlay=new createjs.Sprite(i.LoadManager.Spritesheets.Tutorial_Spritesheet,"special")}return r(o,null,[{key:"KEY",get:function(){return{First:"first",You:"you",Fish:"fish",Puffer:"puffer",Many:"many",Pause:"pause",Special:"special"}}}]),r(o,[{key:"queueTutorials",value:function(a){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a[n],e.next=3,new Promise(function(t,e){return s(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("NUM",n),e.t0=r,e.next=e.t0===o.KEY.First?4:e.t0===o.KEY.You?15:e.t0===o.KEY.Fish?22:e.t0===o.KEY.Puffer?29:e.t0===o.KEY.Special?36:43;break;case 4:return e.next=6,this._runYou();case 6:return e.next=8,this._transition(this._fishOverlay);case 8:return e.next=10,this._runFish();case 10:return e.next=12,this._transition(null);case 12:return this._gameScreen.unpauseGameLogic(),t(),e.abrupt("break",43);case 15:return e.next=17,this._runYou();case 17:return e.next=19,this._transition(null);case 19:return this._gameScreen.unpauseGameLogic(),t(),e.abrupt("break",43);case 22:return e.next=24,this._runFish();case 24:return e.next=26,this._transition(null);case 26:return this._gameScreen.unpauseGameLogic(),t(),e.abrupt("break",43);case 29:return e.next=31,this._runPuffer();case 31:return e.next=33,this._transition(null);case 33:return this._gameScreen.unpauseGameLogic(),t(),e.abrupt("break",43);case 36:return e.next=38,this._runSpecial();case 38:return e.next=40,this._transition(null);case 40:return this._gameScreen.unpauseGameLogic(),t(),e.abrupt("break",43);case 43:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,i)}),n=0;case 2:if(n<a.length)return e.delegateYield(t(n),"t0",4);e.next=7;break;case 4:n++,e.next=2;break;case 7:case"end":return e.stop()}},e,this)}))}},{key:"_transition",value:function(i){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],null!=this._currentOverlay&&n.push(new Promise(function(n){return s(r,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:createjs.Tween.get(this._currentOverlay).to({alpha:0},500,createjs.Ease.linear).call(function(){t._gameScreen.Container.removeChild(t._currentOverlay),n()});case 1:case"end":return e.stop()}},e,this)}))})),e.abrupt("return",new Promise(function(t){return s(r,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n);case 2:if(null==i)return this._currentOverlay.alpha=1,t(),e.abrupt("return");e.next=6;break;case 6:this._currentOverlay.alpha=1,this._currentOverlay=i,this._gameScreen.Container.addChild(this._currentOverlay),this._currentOverlay.alpha=0,createjs.Tween.get(this._currentOverlay).to({alpha:1},500,createjs.Ease.linear).call(function(){t()});case 11:case"end":return e.stop()}},e,this)}))}));case 3:case"end":return e.stop()}},e,this)}))}},{key:"_runYou",value:function(){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){r._currentOverlay=r._youOverlay;var n=r._gameScreen.Cat.Y;r._gameScreen.Cat.Y=80,r._gameScreen.pauseGameLogic(),r._gameScreen.Container.addChild(r._youOverlay),r._game.Stage.on("pressup",function(){r._gameScreen.Cat.Y=n,e()},!0,!0)}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"_runFish",value:function(){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){n._currentOverlay=n._fishOverlay,n._gameScreen.pauseGameLogic(),n._gameScreen.Container.addChild(n._fishOverlay),n._game.Stage.on("pressup",function(){e()},!0,!0)}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"_runPuffer",value:function(){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){n._currentOverlay=n._pufferOverlay,n._gameScreen.pauseGameLogic(),n._gameScreen.Container.addChild(n._pufferOverlay),n._game.Stage.on("pressup",function(){e()},!0,!0)}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"_runSpecial",value:function(){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){n._currentOverlay=n._specialOverlay,n._gameScreen.pauseGameLogic(),n._gameScreen.Container.addChild(n._specialOverlay),n._game.Stage.on("pressup",function(){e()},!0,!0)}));case 1:case"end":return e.stop()}},e,this)}))}}]),o}();n.TutorialCreator=a},{"../managers/LoadManager":12}],22:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../managers/LoadManager"),a=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return r(n,null,[{key:"setup",value:function(){return new Promise(function(e,t){n._backgrounds.Main=new createjs.Sprite(i.LoadManager.Spritesheets.UI),n._backgrounds.Main.gotoAndStop("bg_main_static"),n._backgrounds.Logo=new createjs.Sprite(i.LoadManager.Spritesheets.Entities),n._backgrounds.Logo.gotoAndStop("icon_title"),n._backgrounds.BG=i.LoadManager.Images.BG,n._backgrounds.BGTop=i.LoadManager.Images.BGTop,n._backgrounds.Wave=new createjs.Sprite(i.LoadManager.Spritesheets.UI),n._backgrounds.Wave.gotoAndPlay("bg_main"),n._graphics.Timer=new createjs.Sprite(i.LoadManager.Spritesheets.ScoreHUD_Spritesheet),n._graphics.Timer.gotoAndPlay("sprTime"),n._graphics.Score=new createjs.Sprite(i.LoadManager.Spritesheets.ScoreHUD_Spritesheet),n._graphics.Score.gotoAndPlay("sprScore"),n._graphics.FishRemain=new createjs.Sprite(i.LoadManager.Spritesheets.ScoreHUD_Spritesheet),n._graphics.FishRemain.gotoAndPlay("sprFish"),n._buttons.NewGame=new createjs.Sprite(i.LoadManager.Spritesheets.Entities),n._buttons.NewGame.gotoAndStop("btn_new_game"),new createjs.ButtonHelper(n._buttons.NewGame,"btn_new_game","btn_new_game_hover","btn_new_game_hover"),n._buttons.Options=new createjs.Sprite(i.LoadManager.Spritesheets.Entities),n._buttons.Options.gotoAndStop("btn_new_game"),new createjs.ButtonHelper(n._buttons.Options,"btn_options","btn_options_hover","btn_options_hover"),n._buttons.LevelSelect=new createjs.Sprite(i.LoadManager.Spritesheets.Entities),n._buttons.LevelSelect.gotoAndStop("btn_select"),new createjs.ButtonHelper(n._buttons.LevelSelect,"btn_select","btn_select_hover","btn_select_hover"),n._buttons.Exit=new createjs.Sprite(i.LoadManager.Spritesheets.Entities),n._buttons.Exit.gotoAndStop("btn_select"),new createjs.ButtonHelper(n._buttons.Exit,"btn_exit","btn_exit_hover","btn_exit_hover"),n._buttons.Fishbowl=new createjs.Sprite(i.LoadManager.Spritesheets.Entities),n._buttons.Fishbowl.gotoAndStop("btn_select"),new createjs.ButtonHelper(n._buttons.Fishbowl,"icon_fishbowl","icon_fishbowl_hover","icon_fishbowl_hover",!0),n._backgrounds.LevelSelectBG=new createjs.Sprite(i.LoadManager.Spritesheets.Menu_Level_Select),n._backgrounds.LevelSelectBG.gotoAndStop("static_bg"),n._buttons.LevelEmpty=new createjs.Sprite(i.LoadManager.Spritesheets.Menu_Level_Select),n._buttons.LevelEmpty.gotoAndStop("level_empty"),n._buttons.LevelComplete=new createjs.Sprite(i.LoadManager.Spritesheets.Menu_Level_Select),n._buttons.LevelComplete.gotoAndStop("level_complete"),n._buttons.LevelSpecialEmpty=new createjs.Sprite(i.LoadManager.Spritesheets.Menu_Level_Select),n._buttons.LevelSpecialEmpty.gotoAndStop("level_special_empty"),n._buttons.LevelSpecialComplete=new createjs.Sprite(i.LoadManager.Spritesheets.Menu_Level_Select),n._buttons.LevelSpecialComplete.gotoAndStop("level_special_complete"),n._setupBTNClearData(),e()})}},{key:"_setupBTNClearData",value:function(){n._buttons.ClearData=new createjs.Sprite(i.LoadManager.Spritesheets.UI),n._buttons.ClearData.gotoAndStop("btn_clear_data"),n._buttons.ClearData.cursor="pointer",n._canClearData=!1}},{key:"listenToClearData",value:function(){n._buttons.ClearData.on("mousedown",n._btnDataDown),n._buttons.ClearData.on("animationend",n._btnDataComplete),n._buttons.ClearData.on("click",n._btnDataUp)}},{key:"stopListenToClearData",value:function(){n._buttons.ClearData.off("mousedown",n._btnDataDown),n._buttons.ClearData.off("animationend",n._btnDataComplete),n._buttons.ClearData.off("click",n._btnDataUp)}},{key:"_btnDataDown",value:function(e){n._buttons.ClearData.gotoAndPlay("btn_clear_data_progress"),n._canClearData=!0}},{key:"_btnDataUp",value:function(e){n._buttons.ClearData.gotoAndStop("btn_clear_data"),n._canClearData=!1}},{key:"_btnDataComplete",value:function(e){n._buttons.ClearData.gotoAndStop("btn_clear_data"),n._canClearData&&n._buttons.ClearData.dispatchEvent(new Event(n.CLEAR_DATA))}},{key:"generateText",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"20px Arial",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"#FFFEEE",r=new createjs.Text(e,t,n);return r.cache(0,0,r.getBounds().width,r.getBounds().height),r}},{key:"generateBitmapText",value:function(e,t){return new createjs.BitmapText(e,t)}},{key:"Backgrounds",get:function(){return n._backgrounds}},{key:"Buttons",get:function(){return n._buttons}},{key:"Graphics",get:function(){return n._graphics}}]),n}();a.CLEAR_DATA="onClearData",a._backgrounds={},a._buttons={},a._graphics={},a._canClearData=!1,n.Sprites=a},{"../managers/LoadManager":12}],23:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a=function(a,o,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(a,o||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Sprites"),i=e("../../managers/LoadManager"),s=e("../../managers/ProgressManager"),c=e("../../managers/DataManager"),u=e("../../managers/ScreenManager"),l=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._game=e,this._levelButtons=[],this._container=new createjs.Container,this._background=o.Sprites.Backgrounds.LevelSelectBG,this._background.x=e.StageWidth/2-this._background.getBounds().width/2,this._background.y=80,this._levelsContainer=new createjs.Container,this._container.addChild(this._background);var t=o.Sprites.generateBitmapText("Level Select",i.LoadManager.Spritesheets.Typography);t.x=e.StageWidth/2-t.getBounds().width/2,t.y=30,this._container.addChild(t),this._levelTextContainer=new createjs.Container,this._container.addChild(this._levelTextContainer),this.LevelText="",this.rebuild()}return r(n,[{key:"enable",value:function(){var t=this;this.rebuild(),this._levelButtons.forEach(function(e){e.on("click",t._onLevelClick,t),e.on("mouseover",t._onLevelHover,t),e.on("mouseout",t._onLevelUnhover,t)})}},{key:"disable",value:function(){this._levelButtons.forEach(function(e){e.removeAllEventListeners()})}},{key:"rebuild",value:function(){var t=this;this._levelButtons.forEach(function(e){t._container.removeChild(e),e.removeAllEventListeners(),e=null}),this._levelButtons=[],this._levelsContainer.removeAllChildren(),this._levelsData=c.DataManager.WorldsData.worlds.map(function(e,i){return[].concat.apply([],e).map(function(e,t){var n=s.ProgressManager.ProgressData.specials[i][t],r=e;return r.unlocked=s.ProgressManager.ProgressData.levels[i][t].unlocked,r.completed=s.ProgressManager.ProgressData.levels[i][t].completed,r.special=null!=n,r})}),console.log("LEVEL DISPLAY DATA",this._levelsData);for(var e=0;e<this._levelsData.length;e++)for(var n=0;n<this._levelsData[e].length;n++){var r=this._levelsData[e][n];console.log("LEVEL",r);var i=o.Sprites.Buttons.LevelEmpty.clone();null!=r.special&&r.special&&(i=o.Sprites.Buttons.LevelSpecialEmpty.clone()),r.completed&&(i=o.Sprites.Buttons.LevelComplete.clone(),null!=r.special&&r.special&&(i=o.Sprites.Buttons.LevelSpecialComplete)),r.unlocked?(i.alpha=1,i.cursor="pointer"):i.alpha=.25,i.x=60*n,i.y=50*e,this._levelsContainer.addChild(i),this._levelButtons.push(i)}this._levelsContainer.x=this._game.StageWidth/2-this._levelsContainer.getBounds().width/2,this._levelsContainer.y=100,this._container.addChild(this._levelsContainer)}},{key:"_getDataByIndex",value:function(e){return this._levelsData.reduce(function(e,t){return e.concat(t)})[e]}},{key:"_onLevelClick",value:function(e){var n=this,t=this._levelButtons.indexOf(e.target);if(-1!=t){var r=c.DataManager.getLevelDataByIndex(t);if(null!=r&&r.unlocked){console.log("MY LEVEL DATA",r),this._game.changeCurrentLevel(r);var i=u.ScreenManager.getScreenByKey("intermediary");new Promise(function(t){return a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.Text=r.name,e.next=3,u.ScreenManager.setCurrentScreen(i,this._game.Stage);case 3:i.queueNextScreen("game",1e3),t();case 5:case"end":return e.stop()}},e,this)}))})}}}},{key:"_onLevelHover",value:function(e){var t=this._levelButtons.indexOf(e.target);if(-1!=t){var n=this._getDataByIndex(t);null!=n&&n.unlocked&&(this.LevelText=n.name)}}},{key:"_onLevelUnhover",value:function(e){this.LevelText=""}},{key:"Container",get:function(){return this._container}},{key:"LevelText",set:function(e){if(""!=e){var t=o.Sprites.generateBitmapText(e,i.LoadManager.Spritesheets.TypographyWhite);t.scale=.6,this._levelTextContainer.removeAllChildren(),this._levelTextContainer.addChild(t),this._levelTextContainer.x=this._game.StageWidth/2-t.getBounds().width/2*.6,this._levelTextContainer.y=this._game.StageHeight-30}else this._levelTextContainer.removeAllChildren()}}]),n}();n.LevelSelectDisplay=l},{"../../managers/DataManager":11,"../../managers/LoadManager":12,"../../managers/ProgressManager":13,"../../managers/ScreenManager":14,"../Sprites":22}],24:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Layout"),o=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._sprites={},this._container=new createjs.Container,this._layout=null!=e?new i.Layout(this._container,e.direction,e.alignment,e.crossAlignment,e.spacing):i.Layout.MAKE_VERTICAL_CENTER(this._container)}return r(t,[{key:"add",value:function(e,t){var n,r=this,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return null==this._sprites[e]&&(this._sprites[e]=t.clone(),i&&(n=this._layout).buildLayout.apply(n,[!0].concat(a(Object.keys(this._sprites).map(function(e){return r._sprites[e]})))),!0)}},{key:"addMany",value:function(t){var e,n=this;Object.keys(t).forEach(function(e){n.add(e,t[e],!1)}),(e=this._layout).buildLayout.apply(e,[!0].concat(a(Object.keys(this._sprites).map(function(e){return n._sprites[e]}))))}},{key:"changeLayout",value:function(e){this._layout=e}},{key:"checkoutSprites",value:function(){var e,t=this;(e=this._layout).buildLayout.apply(e,[!0].concat(a(Object.keys(this._sprites).map(function(e){return t._sprites[e]}))))}},{key:"Container",get:function(){return this._container}},{key:"Sprites",get:function(){return this._sprites}}],[{key:"LAYOUT_OPTIONS",get:function(){return{ColumnLeftTop:{direction:i.Layout.VERTICAL,alignment:i.Layout.START,crossAlignment:i.Layout.START,spacing:5},ColumnLeftCenter:{direction:i.Layout.VERTICAL,alignment:i.Layout.START,crossAlignment:i.Layout.CENTER,spacing:5},ColumnLeftBottom:{direction:i.Layout.VERTICAL,alignment:i.Layout.START,crossAlignment:i.Layout.END,spacing:5},ColumnCenterTop:{direction:i.Layout.VERTICAL,alignment:i.Layout.CENTER,crossAlignment:i.Layout.START,spacing:5},ColumnCenterCenter:{direction:i.Layout.VERTICAL,alignment:i.Layout.CENTER,crossAlignment:i.Layout.CENTER,spacing:5},ColumnCenterBottom:{direction:i.Layout.VERTICAL,alignment:i.Layout.CENTER,crossAlignment:i.Layout.END,spacing:5},ColumnRightTop:{direction:i.Layout.VERTICAL,alignment:i.Layout.END,crossAlignment:i.Layout.START,spacing:5},ColumnRightCenter:{direction:i.Layout.VERTICAL,alignment:i.Layout.END,crossAlignment:i.Layout.CENTER,spacing:5},ColumnRightBottom:{direction:i.Layout.VERTICAL,alignment:i.Layout.END,crossAlignment:i.Layout.END,spacing:5}}}}]),t}();n.Container=o},{"./Layout":25}],25:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var f=e("../../Game"),i=function(){function _(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:5;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),this._parent=e,this._items=[],this._direction=t,this._alignment=n,this._crossAlignment=r,this._spacing=i}return r(_,[{key:"buildLayout",value:function(){for(var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!(n.length<=0)&&(this._items=n,e&&this._parent.removeAllChildren(),this._direction==_.VERTICAL)){var i=0;switch(this._alignment){case _.START:for(var a=0;a<n.length;a++){var o=n[a];o.x=0,o.y=i,i+=o.getBounds().height+this._spacing,e&&this._parent.addChild(o)}break;case _.CENTER:for(var s=0;s<n.length;s++){var c=n[s];c.x=f.Game.WIDTH/2-c.getBounds().width/2,c.y=i,i+=c.getBounds().height+this._spacing,e&&this._parent.addChild(c)}break;case _.END:for(var u=0;u<n.length;u++){var l=n[u];l.x=f.Game.WIDTH-l.getBounds().width,l.y=i,i+=l.getBounds().height+this._spacing,e&&this._parent.addChild(l)}}switch(this._crossAlignment){case _.START:break;case _.CENTER:i+=n[n.length-1].getBounds().height;for(var h=0;h<n.length;h++){n[h].y+=f.Game.HEIGHT/2-i/2}break;case _.END:i+=n[n.length-1].getBounds().height;for(var p=0;p<n.length;p++){n[p].y+=f.Game.HEIGHT-i}}}}}],[{key:"MAKE_VERTICAL_CENTER",value:function(e){return new _(e,_.VERTICAL,_.CENTER,_.CENTER,5)}},{key:"MAKE_VERTICAL_START",value:function(e){return new _(e,_.VERTICAL,_.CENTER,_.START,5)}}]),_}();i.HORIZONTAL="horizontal",i.VERTICAL="vertical",i.START="start",i.END="end",i.CENTER="center",n.Layout=i},{"../../Game":2}],26:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Sprites"),i=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._useTimer=!1,this._useFishRemain=!0,this._useScore=!0,this._game=e,this._container=new createjs.Container,this._bg=new createjs.Shape,this._bg.graphics.beginFill("#000000"),this._bg.graphics.drawRect(0,0,this._game.StageWidth,40),this._bg.graphics.endFill(),this._bg.cache(0,0,this._game.StageWidth,40),this._container.addChild(this._bg),this._timerContainer=new createjs.Container,this._timerContainer.x+=10;var t=a.Sprites.Graphics.Timer.clone();this._timerContainer.addChild(t),this._timerTextContainer=new createjs.Container,this._timerTextContainer.y+=8,this._timerTextContainer.x+=a.Sprites.Graphics.Timer.getBounds().width+10,this._timerContainer.addChild(this._timerTextContainer),this._container.addChild(this._timerContainer),this._fishRemainContainer=new createjs.Container;var n=a.Sprites.Graphics.FishRemain.clone();this._fishRemainContainer.addChild(n),this._fishRemainTextContainer=new createjs.Container,this._fishRemainTextContainer.y+=8,this._fishRemainTextContainer.x+=a.Sprites.Graphics.FishRemain.getBounds().width+10,this._fishRemainContainer.addChild(this._fishRemainTextContainer),this._container.addChild(this._fishRemainContainer),this._scoreContainer=new createjs.Container,this._scoreContainer.x=this._game.StageWidth-a.Sprites.Graphics.Score.getBounds().width-40;var r=a.Sprites.Graphics.Score.clone();this._scoreContainer.addChild(r),this._scoreTextContainer=new createjs.Container,this._scoreTextContainer.y+=8,this._scoreTextContainer.x+=a.Sprites.Graphics.Score.getBounds().width+10,this._scoreContainer.addChild(this._scoreTextContainer),this._container.addChild(this._scoreContainer)}return r(i,[{key:"startHUD",value:function(e,t,n){this._useScore=e,this._useFishRemain=t,this._useTimer=n,console.log("SHOW ME THE SCORE, REMAIN, TIMER",e,t,n),this._useScore?this._container.addChild(this._scoreContainer):this._container.removeChild(this._scoreContainer),this._useFishRemain?this._container.addChild(this._fishRemainContainer):this._container.removeChild(this._fishRemainContainer),this._useTimer?this._container.addChild(this._timerContainer):this._container.removeChild(this._timerContainer)}},{key:"update",value:function(e){}},{key:"Container",get:function(){return this._container}}]),i}();n.GameScore=i},{"../Sprites":22}]},{},[10]);
//# sourceMappingURL=bundle.js.map
